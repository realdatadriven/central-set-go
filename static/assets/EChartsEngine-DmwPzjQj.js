import{S as J,i as K,s as P,a as L,t as Q,b as R,f as E,d as N,g as w,h as U,n as V,X,u as j,y as F,z as W,A as Y,C as Z,D as G,l as x}from"./index-XSy4RcHY.js";import"./pt-C8dmXWAd.js";import{i as v}from"./index-Da4b5_QG.js";function d(a){let c,l,f,r;return{c(){var o;c=L("span"),l=Q(a[3]),f=R(),r=L("div"),E(c,"display","none"),N(r,"id",a[0]),E(r,"width",a[1]||"100%"),E(r,"height",((o=a[2])==null?void 0:o.height)||"200px")},m(o,h){w(o,c,h),U(c,l),w(o,f,h),w(o,r,h)},p(o,[h]){var u;h&8&&V(l,o[3]),h&1&&N(r,"id",o[0]),h&2&&E(r,"width",o[1]||"100%"),h&4&&E(r,"height",((u=o[2])==null?void 0:u.height)||"200px")},i:X,o:X,d(o){o&&(j(c),j(f),j(r))}}}function k(a,c,l){let f,r;F(a,W,n=>l(6,f=n)),F(a,Y,n=>l(7,r=n));let{chrt_id:o=`id_${Math.floor(Math.random()*Date.now())}`}=c,{width:h="100%"}=c,{data:u=[]}=c,{options:b={}}=c,{_id:A=""}=c,H=["legend","xAxis","yAxis","series"],g=null;const D=(n,s)=>{let e=x.cloneDeep(n);return delete e.type,H.forEach(t=>{var O,z,C,M,S,T,q,B;if(e!=null&&e[t]){if(Array.isArray(e[t])){for(let i=0;i<e[t].length;i++)if((O=e[t][i])!=null&&O.data){if(typeof((z=e[t][i])==null?void 0:z.data)=="string")e[t][i].data=(s==null?void 0:s.map(m=>m==null?void 0:m[e[t][i].data]))||[];else if(typeof((C=e[t][i])==null?void 0:C.data)=="object"){const m=Object.keys(e[t][i].data),p=e[t][i].data;let y={};e[t][i].data=(s==null?void 0:s.map(_=>(y={},m.forEach(I=>{y[I]=_==null?void 0:_[p[I]]}),x.cloneDeep(y))))||[]}}}else if(typeof e[t]=="object"&&(M=e==null?void 0:e[t])!=null&&M.data){if(typeof((S=e==null?void 0:e[t])==null?void 0:S.data)=="string")t==="legend"?e[t].data=(s==null?void 0:s.map(i=>`${i==null?void 0:i[e[t].data]}`))||[]:e[t].type==="category"?e[t].data=(s==null?void 0:s.map(i=>`${i==null?void 0:i[e[t].data]}`))||[]:e[t].type==="value"?e[t].data=(s==null?void 0:s.map(i=>Number(i==null?void 0:i[e[t].data])))||[]:e[t].data=(s==null?void 0:s.map(i=>i==null?void 0:i[e[t].data]))||[];else if(typeof((T=e==null?void 0:e[t])==null?void 0:T.data)=="object"){const i=Object.keys((q=e==null?void 0:e[t])==null?void 0:q.data),m=(B=e==null?void 0:e[t])==null?void 0:B.data;let p={};e[t].data=(s==null?void 0:s.map(y=>(p={},i.forEach(_=>{p[_]=y==null?void 0:y[m[_]]}),x.cloneDeep(p))))||[]}}}}),e};return Z(async()=>{r.changeLanguage(f==null?void 0:f.lang);try{G.locale(f==null?void 0:f.lang)}catch{G.locale("en-us")}try{const n=document.getElementById(o);l(5,g=v(n));const s=D(b.options,u);setTimeout(()=>{g.setOption(s,!0),g.resize()},500)}catch(n){console.log("Err. EchartsEngine",n==null?void 0:n.message)}}),a.$$set=n=>{"chrt_id"in n&&l(0,o=n.chrt_id),"width"in n&&l(1,h=n.width),"data"in n&&l(4,u=n.data),"options"in n&&l(2,b=n.options),"_id"in n&&l(3,A=n._id)},a.$$.update=()=>{if(a.$$.dirty&52){const n=D(b.options,u);setTimeout(()=>{g.setOption(n,!0),g.resize()},50)}},[o,h,b,A,u,g]}class ie extends J{constructor(c){super(),K(this,c,k,d,P,{chrt_id:0,width:1,data:4,options:2,_id:3})}}export{ie as default};
