const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Export-dM3arQuF.js","./index-XSy4RcHY.js","./index-CFjTrgiX.css","./pt-C8dmXWAd.js"])))=>i.map(i=>d[i]);
import{S as Pl,i as Wl,s as Jl,I as Be,e as _e,a as x,b as F,c as oe,t as Te,F as Jt,d as c,f as Ee,a3 as zl,g as M,h as m,m as ie,j as Ne,a4 as el,k as H,E as Fl,p as pt,q as R,r as rt,o as S,n as Fe,u as z,v as ce,w as mt,x as Bt,y as ll,z as Xl,A as Kl,a7 as sl,C as Ql,D as Ut,l as Wt,G as ye,H as et,X as Ue,N as Gl,T as Vl,J as Yl,M as Zl,K as $l,L as ql,Z as yl,W as nl,R as es,a8 as ts,P as ls,a2 as pl,Q as ss,$ as rl}from"./index-XSy4RcHY.js";import"./pt-C8dmXWAd.js";import{P as Hl}from"./Pagination-CGKBM0ax.js";function hl(t,s,l){const n=t.slice();return n[108]=s[l],n[116]=s,n[110]=l,n}function al(t,s,l){const n=t.slice();return n[111]=s[l],n[117]=s,n[113]=l,n}function ol(t,s,l){const n=t.slice();return n[118]=s[l],n}function il(t,s,l){const n=t.slice();return n[111]=s[l],n[115]=l,n}function cl(t,s,l){const n=t.slice();return n[108]=s[l],n[110]=l,n}function fl(t,s,l){const n=t.slice();return n[111]=s[l],n[113]=l,n}function ul(t,s,l){const n=t.slice();return n[111]=s[l],n[115]=l,n}function bl(t,s,l){const n=t.slice();return n[122]=s[l],n[123]=s,n[124]=l,n}function _l(t,s,l){const n=t.slice();return n[125]=s[l],n}function ml(t,s,l){const n=t.slice();return n[128]=s[l],n[124]=l,n}function dl(t,s,l){const n=t.slice();return n[130]=s[l],n[124]=l,n}function gl(t,s,l){const n=t.slice();return n[128]=s[l],n[124]=l,n}function ns(t){var Z;let s,l,n,o,p,r,u,i,d,b,v,k,g;o=new Be({props:{type:"outline",icon:"chevron-left",path:"icons"}});let O=_e((Z=t[8])==null?void 0:Z.tables),e=[];for(let L=0;L<O.length;L+=1)e[L]=xl(gl(t,O,L));return b=new Be({props:{type:"outline",icon:"chevron-right",path:"icons"}}),{c(){var L,y,B,re;s=x("div"),l=x("div"),n=x("span"),oe(o.$$.fragment),p=F(),r=x("div");for(let N=0;N<e.length;N+=1)e[N].c();u=F(),i=x("div"),d=x("span"),oe(b.$$.fragment),c(n,"class","h-5 w-full"),c(l,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),Ee(l,"display",((y=(L=t[8])==null?void 0:L.tables)==null?void 0:y.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(r,"id",t[19]+"-selected"),c(r,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(d,"class","h-5 w-full"),c(i,"class","w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),Ee(i,"display",((re=(B=t[8])==null?void 0:B.tables)==null?void 0:re.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(s,"class","w-full border-r-slate-200 flex flex-row")},m(L,y){M(L,s,y),m(s,l),m(l,n),ie(o,n,null),m(s,p),m(s,r);for(let B=0;B<e.length;B+=1)e[B]&&e[B].m(r,null);m(s,u),m(s,i),m(i,d),ie(b,d,null),v=!0,k||(g=[H(l,"click",t[29]),H(i,"click",t[28])],k=!0)},p(L,y){var B,re,N,G,W;if(y[0]&256&&Ee(l,"display",((re=(B=L[8])==null?void 0:B.tables)==null?void 0:re.length)>0&&L[25](`${L[19]}-selected`,"width",L[8])?null:"none"),y[0]&524608|y[1]&2){O=_e((N=L[8])==null?void 0:N.tables);let T;for(T=0;T<O.length;T+=1){const K=gl(L,O,T);e[T]?e[T].p(K,y):(e[T]=xl(K),e[T].c(),e[T].m(r,null))}for(;T<e.length;T+=1)e[T].d(1);e.length=O.length}y[0]&256&&Ee(i,"display",((W=(G=L[8])==null?void 0:G.tables)==null?void 0:W.length)>0&&L[25](`${L[19]}-selected`,"width",L[8])?null:"none")},i(L){v||(S(o.$$.fragment,L),S(b.$$.fragment,L),v=!0)},o(L){R(o.$$.fragment,L),R(b.$$.fragment,L),v=!1},d(L){L&&z(s),ce(o),mt(e,L),ce(b),k=!1,Bt(g)}}}function ps(t){let s,l=`${t[17].t("crud.drag")} ${t[17].t("crud.table")} ${t[17].t("crud.here")}!`,n;return{c(){s=x("div"),n=Te(l),c(s,"class","border-dashed border-2 border-r-slate-400 text-center p-1 m-1 hover:border-none")},m(o,p){M(o,s,p),m(s,n)},p(o,p){p[0]&131072&&l!==(l=`${o[17].t("crud.drag")} ${o[17].t("crud.table")} ${o[17].t("crud.here")}!`)&&Fe(n,l)},i:Ue,o:Ue,d(o){o&&z(s)}}}function xl(t){let s,l=ye(t[128],20)+"",n,o,p,r,u,i,d;function b(){return t[52](t[128])}function v(...k){return t[53](t[128],...k)}return{c(){var k;s=x("div"),n=Te(l),o=F(),c(s,"id",p=t[19]+"-selected-"+t[128]),c(s,"title",r=et(t[128],20)),c(s,"class",u="mr-1 p-1 rounded-md border-dotted border-2 "+(((k=t[8])==null?void 0:k.selecetd_table)===t[128]?"bg-base-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-base-200"),c(s,"draggable",!0)},m(k,g){M(k,s,g),m(s,n),m(s,o),i||(d=[H(s,"click",b),H(s,"dragstart",v)],i=!0)},p(k,g){var O;t=k,g[0]&256&&l!==(l=ye(t[128],20)+"")&&Fe(n,l),g[0]&262400&&p!==(p=t[19]+"-selected-"+t[128])&&c(s,"id",p),g[0]&262400&&r!==(r=et(t[128],20))&&c(s,"title",r),g[0]&262400&&u!==(u="mr-1 p-1 rounded-md border-dotted border-2 "+(((O=t[8])==null?void 0:O.selecetd_table)===t[128]?"bg-base-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-base-200")&&c(s,"class",u)},d(k){k&&z(s),i=!1,Bt(d)}}}function wl(t){let s,l,n,o,p,r,u,i,d,b;return o=new Be({props:{type:"outline",icon:"search",path:"icons"}}),{c(){s=x("div"),l=x("button"),n=x("span"),oe(o.$$.fragment),p=F(),r=x("input"),c(n,"class","w-5 h-5"),c(l,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(r,"type","text"),c(r,"placeholder",u=`${t[17].t("crud.filter")} ${t[17].t("crud.field")}`),c(r,"class","grow input pl-8 input-bordered w-full input-sm"),c(r,"autocomplete","off"),c(r,"autocorrect","off"),c(s,"class","w-full flex border-b border-b-slate-200 p-1")},m(v,k){M(v,s,k),m(s,l),m(l,n),ie(o,n,null),m(s,p),m(s,r),Ne(r,t[12]),i=!0,d||(b=H(r,"input",t[56]),d=!0)},p(v,k){(!i||k[0]&131072&&u!==(u=`${v[17].t("crud.filter")} ${v[17].t("crud.field")}`))&&c(r,"placeholder",u),k[0]&4096&&r.value!==v[12]&&Ne(r,v[12])},i(v){i||(S(o.$$.fragment,v),i=!0)},o(v){R(o.$$.fragment,v),i=!1},d(v){v&&z(s),ce(o),d=!1,b()}}}function kl(t){let s,l,n,o,p;return{c(){var r;s=x("div"),l=Te("*"),c(s,"id",n=t[19]+"-"+((r=t[8])==null?void 0:r.selecetd_table)+"-*"),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(r,u){M(r,s,u),m(s,l),o||(p=H(s,"dragstart",t[57]),o=!0)},p(r,u){var i;u[0]&262400&&n!==(n=r[19]+"-"+((i=r[8])==null?void 0:i.selecetd_table)+"-*")&&c(s,"id",n)},d(r){r&&z(s),o=!1,p()}}}function vl(t){let s,l=ye(t[130],20)+"",n,o,p,r,u,i;function d(...b){return t[59](t[130],...b)}return{c(){var b;s=x("div"),n=Te(l),o=F(),c(s,"id",p=t[19]+"-"+((b=t[8])==null?void 0:b.selecetd_table)+"-"+t[130]),c(s,"title",r=et(t[130],20)),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(b,v){M(b,s,v),m(s,n),m(s,o),u||(i=H(s,"dragstart",d),u=!0)},p(b,v){var k;t=b,v[0]&4416&&l!==(l=ye(t[130],20)+"")&&Fe(n,l),v[0]&266560&&p!==(p=t[19]+"-"+((k=t[8])==null?void 0:k.selecetd_table)+"-"+t[130])&&c(s,"id",p),v[0]&266560&&r!==(r=et(t[130],20))&&c(s,"title",r)},d(b){b&&z(s),u=!1,i()}}}function El(t){let s,l=ye(t[128],20)+"",n,o,p,r,u,i;function d(...b){return t[61](t[128],...b)}return{c(){s=x("div"),n=Te(l),o=F(),c(s,"id",p=t[128]),c(s,"title",r=et(t[128],20)),c(s,"class","mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(b,v){M(b,s,v),m(s,n),m(s,o),u||(i=H(s,"dragstart",d),u=!0)},p(b,v){t=b,v[0]&2240&&l!==(l=ye(t[128],20)+"")&&Fe(n,l),v[0]&264384&&p!==(p=t[128])&&c(s,"id",p),v[0]&264384&&r!==(r=et(t[128],20))&&c(s,"title",r)},d(b){b&&z(s),u=!1,i()}}}function Nl(t){let s,l=t[125]+"",n,o;return{c(){s=x("option"),n=Te(l),s.__value=o=t[125],Ne(s,s.__value)},m(p,r){M(p,s,r),m(s,n)},p(p,r){r[0]&32768&&l!==(l=p[125]+"")&&Fe(n,l),r[0]&32768&&o!==(o=p[125])&&(s.__value=o,Ne(s,s.__value))},d(p){p&&z(s)}}}function Tl(t){let s,l,n,o,p,r;return n=new Be({props:{type:"outline",icon:"arrow-uturn-left",path:"icons"}}),{c(){s=x("button"),l=x("span"),oe(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(u,i){M(u,s,i),m(s,l),ie(n,l,null),o=!0,p||(r=H(s,"click",t[67]),p=!0)},p:Ue,i(u){o||(S(n.$$.fragment,u),o=!0)},o(u){R(n.$$.fragment,u),o=!1},d(u){u&&z(s),ce(n),p=!1,r()}}}function Ol(t){let s,l,n,o,p,r;return n=new Be({props:{type:"outline",icon:"save",path:"icons"}}),{c(){s=x("button"),l=x("span"),oe(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(u,i){M(u,s,i),m(s,l),ie(n,l,null),o=!0,p||(r=H(s,"click",t[68]),p=!0)},p:Ue,i(u){o||(S(n.$$.fragment,u),o=!0)},o(u){R(n.$$.fragment,u),o=!1},d(u){u&&z(s),ce(n),p=!1,r()}}}function rs(t){var n,o,p;let s=ye(((p=(o=(n=t[8])==null?void 0:n.tabs)==null?void 0:o[t[122]])==null?void 0:p.label)||t[122],20)+"",l;return{c(){l=Te(s)},m(r,u){M(r,l,u)},p(r,u){var i,d,b;u[0]&256&&s!==(s=ye(((b=(d=(i=r[8])==null?void 0:i.tabs)==null?void 0:d[r[122]])==null?void 0:b.label)||r[122],20)+"")&&Fe(l,s)},d(r){r&&z(l)}}}function hs(t){let s,l,n;function o(){t[69].call(s,t[122])}return{c(){s=x("input"),c(s,"type","text"),c(s,"class","input input-xs p-0 w-auto")},m(p,r){M(p,s,r),Ne(s,t[8].tabs[t[122]].label),l||(n=H(s,"input",o),l=!0)},p(p,r){t=p,r[0]&262400&&s.value!==t[8].tabs[t[122]].label&&Ne(s,t[8].tabs[t[122]].label)},d(p){p&&z(s),l=!1,n()}}}function as(t){let s,l,n,o,p;l=new Be({props:{type:"outline",icon:"x-mark",path:"icons"}});function r(){return t[70](t[122])}return{c(){s=x("span"),oe(l.$$.fragment),c(s,"class","ml-2 w-4 font-bold cursor-pointer -mr-2")},m(u,i){M(u,s,i),ie(l,s,null),n=!0,o||(p=H(s,"click",r),o=!0)},p(u,i){t=u},i(u){n||(S(l.$$.fragment,u),n=!0)},o(u){R(l.$$.fragment,u),n=!1},d(u){u&&z(s),ce(l),o=!1,p()}}}function Ll(t){let s,l,n,o,p,r,u,i,d,b;function v(Z,L){var y,B,re;return(re=(B=(y=Z[8])==null?void 0:y.tabs)==null?void 0:B[Z[122]])!=null&&re.edit?hs:rs}let k=v(t),g=k(t),O=t[124]>0&&as(t);function e(){return t[71](t[122])}return{c(){s=x("a"),l=x("div"),n=x("b"),g.c(),p=F(),O&&O.c(),u=F(),c(n,"title",o=et(t[122],20)),c(l,"class","flex-grow"),c(s,"role","tab"),c(s,"class",r="tab flex flex-row text-md "+(t[8].selected_tab===t[122]?"tab-active active":""))},m(Z,L){M(Z,s,L),m(s,l),m(l,n),g.m(n,null),m(s,p),O&&O.m(s,null),M(Z,u,L),i=!0,d||(b=[H(s,"click",Fl(e)),H(s,"dblclick",t[41])],d=!0)},p(Z,L){t=Z,k===(k=v(t))&&g?g.p(t,L):(g.d(1),g=k(t),g&&(g.c(),g.m(n,null))),(!i||L[0]&262400&&o!==(o=et(t[122],20)))&&c(n,"title",o),t[124]>0&&O.p(t,L),(!i||L[0]&262400&&r!==(r="tab flex flex-row text-md "+(t[8].selected_tab===t[122]?"tab-active active":"")))&&c(s,"class",r)},i(Z){i||(S(O),i=!0)},o(Z){R(O),i=!1},d(Z){Z&&(z(s),z(u)),g.d(),O&&O.d(),d=!1,Bt(b)}}}function os(t){let s,l,n=`${t[17].t("crud.drag")} ${t[17].t("crud.field")}s ${t[17].t("crud.here")}!`,o;return{c(){s=x("div"),l=x("p"),o=Te(n),c(s,"class","border-dashed h-64 border-2 border-r-slate-400 text-center align-middle p-1 m-1 hover:border-4"),Ee(s,"vertical-align","middle")},m(p,r){M(p,s,r),m(s,l),m(l,o)},p(p,r){r[0]&131072&&n!==(n=`${p[17].t("crud.drag")} ${p[17].t("crud.field")}s ${p[17].t("crud.here")}!`)&&Fe(o,n)},i:Ue,o:Ue,d(p){p&&z(s)}}}function is(t){var dt,ft,D,P,fe,Ye,ue,ut,Le,Ot,lt,bt,_t,gt;let s,l,n,o,p,r,u,i,d,b,v,k,g,O,e,Z,L,y,B,re,N,G,W,T,K,ee,J,He,ke,Ge,ve=t[17].t("crud.use")+"",A,X,se,Oe,Je,Me,Pe,ze,Xe,ne,Ke,Q,he,me,nt,ht;const tt=[us,fs],Ve=[];function We(I,te){var de,ge,xe,we;return(we=(xe=(de=I[8])==null?void 0:de.tabs)==null?void 0:xe[(ge=I[8])==null?void 0:ge.selected_tab])!=null&&we.show?0:1}return l=We(t),n=Ve[l]=tt[l](t),b=new Be({props:{type:"outline",icon:"search",path:"icons"}}),y=new Be({props:{type:"outline",icon:"play",path:"icons"}}),T=new Be({props:{type:"outline",icon:"code",path:"icons"}}),Xe=new Be({props:{type:"outline",icon:"save",path:"icons"}}),he=new Hl({props:{lang:(dt=t[16])==null?void 0:dt.lang,conf:(ft=t[16])==null?void 0:ft.conf,rows_per_page:((Ye=(fe=(D=t[8])==null?void 0:D.tabs)==null?void 0:fe[(P=t[8])==null?void 0:P.selected_tab])==null?void 0:Ye.limit)||10,page:((Ot=(Le=(ue=t[8])==null?void 0:ue.tabs)==null?void 0:Le[(ut=t[8])==null?void 0:ut.selected_tab])==null?void 0:Ot.offset)||0,total_rows:(((gt=(_t=(lt=t[8])==null?void 0:lt.tabs)==null?void 0:_t[(bt=t[8])==null?void 0:bt.selected_tab])==null?void 0:gt.fields)||[]).length}}),he.$on("pageChange",t[93]),{c(){var I,te,de,ge;s=x("div"),n.c(),o=F(),p=x("div"),r=x("div"),u=x("div"),i=x("button"),d=x("span"),oe(b.$$.fragment),v=F(),k=x("input"),O=F(),e=x("div"),Z=x("button"),L=x("span"),oe(y.$$.fragment),re=F(),N=x("div"),G=x("button"),W=x("span"),oe(T.$$.fragment),ee=F(),J=x("div"),He=x("label"),ke=x("span"),Ge=x("b"),A=Te(ve),X=Te(":"),se=F(),Oe=x("input"),Je=F(),Me=x("div"),Pe=x("button"),ze=x("span"),oe(Xe.$$.fragment),Ke=F(),Q=x("div"),oe(he.$$.fragment),c(s,"class","w-full overflow-x-auto text-center"),c(d,"class","w-5 h-5"),c(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(k,"type","text"),c(k,"placeholder",g=`${t[17].t("crud.filter")} ${t[17].t("crud.query")} ${t[17].t("crud.field")}`),c(k,"class","grow input pl-8 input-bordered w-full input-sm"),c(k,"autocomplete","off"),c(k,"autocorrect","off"),c(u,"class","grow flex max-w-xs mr-2"),c(L,"class","w-6"),c(Z,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(e,"class","tooltip tooltip-right"),c(e,"data-tip",B=t[17].t("crud.execute")),c(W,"class","w-6"),c(G,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(N,"class","tooltip tooltip-right"),c(N,"data-tip",K=t[17].t("crud.code")),c(ke,"class","label-text"),c(Oe,"type","checkbox"),c(Oe,"class","toggle toggle-sm ml-2"),c(He,"class","label cursor-pointer justify-start"),c(J,"class","form-control mr-2"),c(ze,"class","w-6"),c(Pe,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(Me,"class","tooltip tooltip-right"),c(Me,"data-tip",ne=t[17].t("crud.save")),c(r,"class","flex-grow flex flex-row align-middle p-2"),Ee(r,"display",(((ge=(de=(I=t[8])==null?void 0:I.tabs)==null?void 0:de[(te=t[8])==null?void 0:te.selected_tab])==null?void 0:ge.fields)||[]).length>0?null:"none"),c(p,"class","w-full overflow-hidden flex flex-row")},m(I,te){var de,ge;M(I,s,te),Ve[l].m(s,null),M(I,o,te),M(I,p,te),m(p,r),m(r,u),m(u,i),m(i,d),ie(b,d,null),m(u,v),m(u,k),Ne(k,t[8].tabs[(de=t[8])==null?void 0:de.selected_tab].field_filter),m(r,O),m(r,e),m(e,Z),m(Z,L),ie(y,L,null),m(r,re),m(r,N),m(N,G),m(G,W),ie(T,W,null),m(r,ee),m(r,J),m(J,He),m(He,ke),m(ke,Ge),m(Ge,A),m(Ge,X),m(He,se),m(He,Oe),Oe.checked=t[8].tabs[(ge=t[8])==null?void 0:ge.selected_tab].use,m(r,Je),m(r,Me),m(Me,Pe),m(Pe,ze),ie(Xe,ze,null),m(p,Ke),m(p,Q),ie(he,Q,null),me=!0,nt||(ht=[H(k,"input",t[88]),H(Z,"click",t[89]),H(G,"click",t[90]),H(Oe,"change",t[91]),H(Pe,"click",t[92])],nt=!0)},p(I,te){var xe,we,Lt,xt,wt,at,ot,it,Ze,kt,Dt,St,$e,It,U,ae,vt,De,Et,Se,Nt;let de=l;l=We(I),l===de?Ve[l].p(I,te):(pt(),R(Ve[de],1,1,()=>{Ve[de]=null}),rt(),n=Ve[l],n?n.p(I,te):(n=Ve[l]=tt[l](I),n.c()),S(n,1),n.m(s,null)),(!me||te[0]&131072&&g!==(g=`${I[17].t("crud.filter")} ${I[17].t("crud.query")} ${I[17].t("crud.field")}`))&&c(k,"placeholder",g),te[0]&262400&&k.value!==I[8].tabs[(xe=I[8])==null?void 0:xe.selected_tab].field_filter&&Ne(k,I[8].tabs[(we=I[8])==null?void 0:we.selected_tab].field_filter),(!me||te[0]&131072&&B!==(B=I[17].t("crud.execute")))&&c(e,"data-tip",B),(!me||te[0]&131072&&K!==(K=I[17].t("crud.code")))&&c(N,"data-tip",K),(!me||te[0]&131072)&&ve!==(ve=I[17].t("crud.use")+"")&&Fe(A,ve),te[0]&262400&&(Oe.checked=I[8].tabs[(Lt=I[8])==null?void 0:Lt.selected_tab].use),(!me||te[0]&131072&&ne!==(ne=I[17].t("crud.save")))&&c(Me,"data-tip",ne),te[0]&256&&Ee(r,"display",(((ot=(at=(xt=I[8])==null?void 0:xt.tabs)==null?void 0:at[(wt=I[8])==null?void 0:wt.selected_tab])==null?void 0:ot.fields)||[]).length>0?null:"none");const ge={};te[0]&65536&&(ge.lang=(it=I[16])==null?void 0:it.lang),te[0]&65536&&(ge.conf=(Ze=I[16])==null?void 0:Ze.conf),te[0]&256&&(ge.rows_per_page=(($e=(St=(kt=I[8])==null?void 0:kt.tabs)==null?void 0:St[(Dt=I[8])==null?void 0:Dt.selected_tab])==null?void 0:$e.limit)||10),te[0]&256&&(ge.page=((vt=(ae=(It=I[8])==null?void 0:It.tabs)==null?void 0:ae[(U=I[8])==null?void 0:U.selected_tab])==null?void 0:vt.offset)||0),te[0]&256&&(ge.total_rows=(((Nt=(Se=(De=I[8])==null?void 0:De.tabs)==null?void 0:Se[(Et=I[8])==null?void 0:Et.selected_tab])==null?void 0:Nt.fields)||[]).length),he.$set(ge)},i(I){me||(S(n),S(b.$$.fragment,I),S(y.$$.fragment,I),S(T.$$.fragment,I),S(Xe.$$.fragment,I),S(he.$$.fragment,I),me=!0)},o(I){R(n),R(b.$$.fragment,I),R(y.$$.fragment,I),R(T.$$.fragment,I),R(Xe.$$.fragment,I),R(he.$$.fragment,I),me=!1},d(I){I&&(z(s),z(o),z(p)),Ve[l].d(),ce(b),ce(y),ce(T),ce(Xe),ce(he),nt=!1,Bt(ht)}}}function cs(t){let s,l,n,o;const p=[Ls,Os],r=[];function u(i,d){var b,v;return((b=i[14])==null?void 0:b.success)===!0?0:(v=i[14])!=null&&v.msg?1:-1}return~(s=u(t))&&(l=r[s]=p[s](t)),{c(){l&&l.c(),n=Jt()},m(i,d){~s&&r[s].m(i,d),M(i,n,d),o=!0},p(i,d){let b=s;s=u(i),s===b?~s&&r[s].p(i,d):(l&&(pt(),R(r[b],1,1,()=>{r[b]=null}),rt()),~s?(l=r[s],l?l.p(i,d):(l=r[s]=p[s](i),l.c()),S(l,1),l.m(n.parentNode,n)):l=null)},i(i){o||(S(l),o=!0)},o(i){R(l),o=!1},d(i){i&&z(n),~s&&r[s].d(i)}}}function fs(t){var ke,Ge,ve,A,X,se,Oe,Je,Me,Pe,ze,Xe,ne,Ke,Q,he,me,nt,ht,tt,Ve,We,dt,ft;let s,l,n,o,p,r,u,i,d,b,v,k,g,O,e,Z,L,y,B,re,N,G,W,T=_e(t[18]||[]),K=[];for(let D=0;D<T.length;D+=1)K[D]=Dl(il(t,T,D));let ee=_e((((A=(ve=(ke=t[8])==null?void 0:ke.tabs)==null?void 0:ve[(Ge=t[8])==null?void 0:Ge.selected_tab])==null?void 0:A.fields)||[]).filter(t[77]).slice((((Je=(Oe=(X=t[8])==null?void 0:X.tabs)==null?void 0:Oe[(se=t[8])==null?void 0:se.selected_tab])==null?void 0:Je.offset)||0)*(((Xe=(ze=(Me=t[8])==null?void 0:Me.tabs)==null?void 0:ze[(Pe=t[8])==null?void 0:Pe.selected_tab])==null?void 0:Xe.limit)||10),(((he=(Q=(ne=t[8])==null?void 0:ne.tabs)==null?void 0:Q[(Ke=t[8])==null?void 0:Ke.selected_tab])==null?void 0:he.offset)||0)*(((tt=(ht=(me=t[8])==null?void 0:me.tabs)==null?void 0:ht[(nt=t[8])==null?void 0:nt.selected_tab])==null?void 0:tt.limit)||10)+(((ft=(dt=(Ve=t[8])==null?void 0:Ve.tabs)==null?void 0:dt[(We=t[8])==null?void 0:We.selected_tab])==null?void 0:ft.limit)||10))),J=[];for(let D=0;D<ee.length;D+=1)J[D]=jl(hl(t,ee,D));const He=D=>R(J[D],1,1,()=>{J[D]=null});return B=new Be({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){var D;s=x("table"),l=x("thead"),n=x("tr");for(let P=0;P<K.length;P+=1)K[P].c();o=F(),p=x("tbody");for(let P=0;P<J.length;P+=1)J[P].c();r=F(),u=x("tr"),i=x("td"),d=x("input"),v=F(),k=x("td"),g=x("input"),e=F(),Z=x("td"),L=x("button"),y=x("span"),oe(B.$$.fragment),c(d,"type","text"),c(d,"class","input input-sm p-0 w-full bg-transparent"),c(d,"placeholder",b=t[17].t("crud.formula")),c(i,"class","p-0.5"),c(i,"colspan",((D=t[18]||[])==null?void 0:D.length)-3),c(g,"type","text"),c(g,"class","input input-sm p-0 w-full bg-transparent"),c(g,"placeholder",O=t[17].t("crud.label")),c(k,"class","p-0.5 w-32"),c(k,"colspan",2),c(y,"class","w-5"),c(L,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(Z,"class","p-0.5 w-8 text-right"),c(Z,"title",re=t[17].t("crud.add")),c(s,"class","table table-zebra w-[98%] normal-case table-xs")},m(D,P){var fe,Ye;M(D,s,P),m(s,l),m(l,n);for(let ue=0;ue<K.length;ue+=1)K[ue]&&K[ue].m(n,null);m(s,o),m(s,p);for(let ue=0;ue<J.length;ue+=1)J[ue]&&J[ue].m(p,null);m(p,r),m(p,u),m(u,i),m(i,d),Ne(d,t[8].tabs[(fe=t[8])==null?void 0:fe.selected_tab].formula),m(u,v),m(u,k),m(k,g),Ne(g,t[8].tabs[(Ye=t[8])==null?void 0:Ye.selected_tab].formula_label),m(u,e),m(u,Z),m(Z,L),m(L,y),ie(B,y,null),N=!0,G||(W=[H(d,"input",t[85]),H(g,"input",t[86]),H(L,"click",t[87])],G=!0)},p(D,P){var fe,Ye,ue,ut,Le,Ot,lt,bt,_t,gt,I,te,de,ge,xe,we,Lt,xt,wt,at,ot,it,Ze,kt,Dt,St,$e,It;if(P[0]&393216){T=_e(D[18]||[]);let U;for(U=0;U<T.length;U+=1){const ae=il(D,T,U);K[U]?K[U].p(ae,P):(K[U]=Dl(ae),K[U].c(),K[U].m(n,null))}for(;U<K.length;U+=1)K[U].d(1);K.length=T.length}if(P[0]&393536|P[1]&6400){ee=_e((((ut=(ue=(fe=D[8])==null?void 0:fe.tabs)==null?void 0:ue[(Ye=D[8])==null?void 0:Ye.selected_tab])==null?void 0:ut.fields)||[]).filter(D[77]).slice((((bt=(lt=(Le=D[8])==null?void 0:Le.tabs)==null?void 0:lt[(Ot=D[8])==null?void 0:Ot.selected_tab])==null?void 0:bt.offset)||0)*(((te=(I=(_t=D[8])==null?void 0:_t.tabs)==null?void 0:I[(gt=D[8])==null?void 0:gt.selected_tab])==null?void 0:te.limit)||10),(((we=(xe=(de=D[8])==null?void 0:de.tabs)==null?void 0:xe[(ge=D[8])==null?void 0:ge.selected_tab])==null?void 0:we.offset)||0)*(((at=(wt=(Lt=D[8])==null?void 0:Lt.tabs)==null?void 0:wt[(xt=D[8])==null?void 0:xt.selected_tab])==null?void 0:at.limit)||10)+(((kt=(Ze=(ot=D[8])==null?void 0:ot.tabs)==null?void 0:Ze[(it=D[8])==null?void 0:it.selected_tab])==null?void 0:kt.limit)||10)));let U;for(U=0;U<ee.length;U+=1){const ae=hl(D,ee,U);J[U]?(J[U].p(ae,P),S(J[U],1)):(J[U]=jl(ae),J[U].c(),S(J[U],1),J[U].m(p,r))}for(pt(),U=ee.length;U<J.length;U+=1)He(U);rt()}(!N||P[0]&131072&&b!==(b=D[17].t("crud.formula")))&&c(d,"placeholder",b),P[0]&262400&&d.value!==D[8].tabs[(Dt=D[8])==null?void 0:Dt.selected_tab].formula&&Ne(d,D[8].tabs[(St=D[8])==null?void 0:St.selected_tab].formula),(!N||P[0]&131072&&O!==(O=D[17].t("crud.label")))&&c(g,"placeholder",O),P[0]&262400&&g.value!==D[8].tabs[($e=D[8])==null?void 0:$e.selected_tab].formula_label&&Ne(g,D[8].tabs[(It=D[8])==null?void 0:It.selected_tab].formula_label),(!N||P[0]&131072&&re!==(re=D[17].t("crud.add")))&&c(Z,"title",re)},i(D){if(!N){for(let P=0;P<ee.length;P+=1)S(J[P]);S(B.$$.fragment,D),N=!0}},o(D){J=J.filter(Boolean);for(let P=0;P<J.length;P+=1)R(J[P]);R(B.$$.fragment,D),N=!1},d(D){D&&z(s),mt(K,D),mt(J,D),ce(B),G=!1,Bt(W)}}}function us(t){let s,l,n;return{c(){s=x("textarea"),c(s,"class","textarea textarea-bordered h-100 w-full textarea-xs --min-h-max"),c(s,"autocomplete","off"),c(s,"autocorrect","off"),c(s,"rows",10)},m(o,p){M(o,s,p),Ne(s,t[8].tabs[t[8].selected_tab].sql),l||(n=H(s,"input",t[76]),l=!0)},p(o,p){p[0]&262400&&Ne(s,o[8].tabs[o[8].selected_tab].sql)},i:Ue,o:Ue,d(o){o&&z(s),l=!1,n()}}}function Dl(t){var p,r;let s,l=(((p=t[111])==null?void 0:p.label)||t[17].t(`crud.${(r=t[111])==null?void 0:r.name}`))+"",n,o;return{c(){var u,i,d;s=x("th"),n=Te(l),o=F(),c(s,"class","normal-case "+(((u=t[111])==null?void 0:u.width)||"")+" "+(((i=t[111])==null?void 0:i.type)==="button"?"p-1":"")),c(s,"style",((d=t[111])==null?void 0:d.style)||"")},m(u,i){M(u,s,i),m(s,n),m(s,o)},p(u,i){var d,b;i[0]&131072&&l!==(l=(((d=u[111])==null?void 0:d.label)||u[17].t(`crud.${(b=u[111])==null?void 0:b.name}`))+"")&&Fe(n,l)},d(u){u&&z(s)}}}function bs(t){let s,l,n,o;function p(){t[82].call(l,t[111],t[116],t[110])}return{c(){var r,u;s=x("td"),l=x("input"),c(l,"type","text"),c(l,"class","input input-sm p-0 "+(((r=t[111])==null?void 0:r.width)||"w-full")+" bg-transparent"),c(s,"class","p-0.5 "+(((u=t[111])==null?void 0:u.width)||""))},m(r,u){var i;M(r,s,u),m(s,l),Ne(l,t[108][(i=t[111])==null?void 0:i.name]),n||(o=H(l,"input",p),n=!0)},p(r,u){var i,d;t=r,u[0]&262464&&l.value!==t[108][(i=t[111])==null?void 0:i.name]&&Ne(l,t[108][(d=t[111])==null?void 0:d.name])},i:Ue,o:Ue,d(r){r&&z(s),n=!1,o()}}}function _s(t){let s,l,n,o;function p(){t[81].call(l,t[111],t[116],t[110])}return{c(){var r,u;s=x("td"),l=x("input"),c(l,"type","date"),c(l,"class","input input-sm p-0 pl-2 pr-2 "+(((r=t[111])==null?void 0:r.width)||"w-full")+" input-bordered bg-transparent"),c(s,"class","p-0.5 "+(((u=t[111])==null?void 0:u.width)||""))},m(r,u){var i;M(r,s,u),m(s,l),Ne(l,t[108][(i=t[111])==null?void 0:i.name]),n||(o=H(l,"input",p),n=!0)},p(r,u){var i;t=r,u[0]&262464&&Ne(l,t[108][(i=t[111])==null?void 0:i.name])},i:Ue,o:Ue,d(r){r&&z(s),n=!1,o()}}}function ms(t){var d;let s,l,n,o,p,r,u;o=new Be({props:{type:"outline",icon:(d=t[111])==null?void 0:d.icon,path:"icons"}});function i(){return t[80](t[111],t[108],t[110])}return{c(){var b;s=x("td"),l=x("button"),n=x("span"),oe(o.$$.fragment),c(n,"class","w-5"),c(l,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(s,"class","p-0.5 w-8 text-right"),c(s,"title",(b=t[111])==null?void 0:b.label)},m(b,v){M(b,s,v),m(s,l),m(l,n),ie(o,n,null),p=!0,r||(u=H(l,"click",i),r=!0)},p(b,v){t=b},i(b){p||(S(o.$$.fragment,b),p=!0)},o(b){R(o.$$.fragment,b),p=!1},d(b){b&&z(s),ce(o),r=!1,u()}}}function ds(t){var i;let s,l,n,o,p=_e(((i=t[111])==null?void 0:i.options)||[]),r=[];for(let d=0;d<p.length;d+=1)r[d]=Sl(ol(t,p,d));function u(){t[79].call(l,t[111],t[116],t[110])}return{c(){var d,b,v;s=x("td"),l=x("select");for(let k=0;k<r.length;k+=1)r[k].c();c(l,"class","select text-xs select-sm p-0.5 pr-2 "+(((d=t[111])==null?void 0:d.width)||"w-full bg-transparent")),t[108][(b=t[111])==null?void 0:b.name]===void 0&&zl(u),c(s,"class","p-0.5 "+(((v=t[111])==null?void 0:v.width)||""))},m(d,b){var v;M(d,s,b),m(s,l);for(let k=0;k<r.length;k+=1)r[k]&&r[k].m(l,null);el(l,t[108][(v=t[111])==null?void 0:v.name],!0),n||(o=H(l,"change",u),n=!0)},p(d,b){var v,k;if(t=d,b[0]&393216){p=_e(((v=t[111])==null?void 0:v.options)||[]);let g;for(g=0;g<p.length;g+=1){const O=ol(t,p,g);r[g]?r[g].p(O,b):(r[g]=Sl(O),r[g].c(),r[g].m(l,null))}for(;g<r.length;g+=1)r[g].d(1);r.length=p.length}b[0]&262464&&el(l,t[108][(k=t[111])==null?void 0:k.name])},i:Ue,o:Ue,d(d){d&&z(s),mt(r,d),n=!1,o()}}}function gs(t){let s,l,n,o;function p(){t[78].call(l,t[111],t[116],t[110])}return{c(){var r;s=x("td"),l=x("input"),c(l,"type","checkbox"),c(l,"class","toggle toggle-sm toggle-primary"),c(s,"class","p-0.5 text-center align-middle "+(((r=t[111])==null?void 0:r.width)||""))},m(r,u){var i;M(r,s,u),m(s,l),l.checked=t[108][(i=t[111])==null?void 0:i.name],n||(o=H(l,"change",p),n=!0)},p(r,u){var i;t=r,u[0]&262464&&(l.checked=t[108][(i=t[111])==null?void 0:i.name])},i:Ue,o:Ue,d(r){r&&z(s),n=!1,o()}}}function xs(t){let s;function l(p,r){return p[113]!==0?ks:ws}let o=l(t)(t);return{c(){o.c(),s=Jt()},m(p,r){o.m(p,r),M(p,s,r)},p(p,r){o.p(p,r)},i:Ue,o:Ue,d(p){p&&z(s),o.d(p)}}}function Sl(t){var o,p;let s,l=((o=t[118])!=null&&o.label?t[17].t(`crud.${(p=t[118])==null?void 0:p.label}`):t[118].value)+"",n;return{c(){s=x("option"),n=Te(l),s.__value=t[118].value,Ne(s,s.__value)},m(r,u){M(r,s,u),m(s,n)},p(r,u){var i,d;u[0]&131072&&l!==(l=((i=r[118])!=null&&i.label?r[17].t(`crud.${(d=r[118])==null?void 0:d.label}`):r[118].value)+"")&&Fe(n,l)},d(r){r&&z(s)}}}function ws(t){let s;function l(p,r){return p[111].dt_frmt?Es:vs}let o=l(t)(t);return{c(){var p,r;s=x("th"),o.c(),c(s,"class","normal-case "+(((p=t[111])==null?void 0:p.width)||"")),c(s,"style",((r=t[111])==null?void 0:r.style)||"")},m(p,r){M(p,s,r),o.m(s,null)},p(p,r){o.p(p,r)},d(p){p&&z(s),o.d()}}}function ks(t){let s;function l(p,r){return p[111].dt_frmt?Ts:Ns}let o=l(t)(t);return{c(){var p,r;s=x("td"),o.c(),c(s,"class","normal-case "+(((p=t[111])==null?void 0:p.width)||"")),c(s,"style",((r=t[111])==null?void 0:r.style)||"")},m(p,r){M(p,s,r),o.m(s,null)},p(p,r){o.p(p,r)},d(p){p&&z(s),o.d()}}}function vs(t){var p,r,u;let s,l=ye((r=t[108])==null?void 0:r[(p=t[111])==null?void 0:p.name],((u=t[111])==null?void 0:u.ellipsis)||30)+"",n,o;return{c(){var i,d,b;s=x("span"),n=Te(l),c(s,"title",o=t[108][(i=t[111])==null?void 0:i.tooltip]||et(t[108][(d=t[111])==null?void 0:d.name],((b=t[111])==null?void 0:b.ellipsis)||30))},m(i,d){M(i,s,d),m(s,n)},p(i,d){var b,v,k,g,O,e;d[0]&320&&l!==(l=ye((v=i[108])==null?void 0:v[(b=i[111])==null?void 0:b.name],((k=i[111])==null?void 0:k.ellipsis)||30)+"")&&Fe(n,l),d[0]&262464&&o!==(o=i[108][(g=i[111])==null?void 0:g.tooltip]||et(i[108][(O=i[111])==null?void 0:O.name],((e=i[111])==null?void 0:e.ellipsis)||30))&&c(s,"title",o)},d(i){i&&z(s)}}}function Es(t){var n,o;let s=Ut((o=t[108])==null?void 0:o[(n=t[111])==null?void 0:n.name]).format(t[111].dt_frmt)+"",l;return{c(){l=Te(s)},m(p,r){M(p,l,r)},p(p,r){var u,i;r[0]&320&&s!==(s=Ut((i=p[108])==null?void 0:i[(u=p[111])==null?void 0:u.name]).format(p[111].dt_frmt)+"")&&Fe(l,s)},d(p){p&&z(l)}}}function Ns(t){var p,r,u;let s,l=ye((r=t[108])==null?void 0:r[(p=t[111])==null?void 0:p.name],((u=t[111])==null?void 0:u.ellipsis)||30)+"",n,o;return{c(){var i,d,b;s=x("span"),n=Te(l),c(s,"title",o=t[108][(i=t[111])==null?void 0:i.tooltip]||et(t[108][(d=t[111])==null?void 0:d.name],((b=t[111])==null?void 0:b.ellipsis)||30))},m(i,d){M(i,s,d),m(s,n)},p(i,d){var b,v,k,g,O,e;d[0]&320&&l!==(l=ye((v=i[108])==null?void 0:v[(b=i[111])==null?void 0:b.name],((k=i[111])==null?void 0:k.ellipsis)||30)+"")&&Fe(n,l),d[0]&262464&&o!==(o=i[108][(g=i[111])==null?void 0:g.tooltip]||et(i[108][(O=i[111])==null?void 0:O.name],((e=i[111])==null?void 0:e.ellipsis)||30))&&c(s,"title",o)},d(i){i&&z(s)}}}function Ts(t){var n,o;let s=Ut((o=t[108])==null?void 0:o[(n=t[111])==null?void 0:n.name]).format(t[111].dt_frmt)+"",l;return{c(){l=Te(s)},m(p,r){M(p,l,r)},p(p,r){var u,i;r[0]&320&&s!==(s=Ut((i=p[108])==null?void 0:i[(u=p[111])==null?void 0:u.name]).format(p[111].dt_frmt)+"")&&Fe(l,s)},d(p){p&&z(l)}}}function Il(t){let s,l,n,o;const p=[xs,gs,ds,ms,_s,bs],r=[];function u(i,d){var b,v,k,g,O,e;return((b=i[111])==null?void 0:b.type)==="data"&&!((v=i[108])!=null&&v.formula)?0:((k=i[111])==null?void 0:k.type)==="boolean"?1:((g=i[111])==null?void 0:g.type)==="select"?2:((O=i[111])==null?void 0:O.type)==="button"?3:((e=i[111])==null?void 0:e.type)==="date"?4:5}return s=u(t),l=r[s]=p[s](t),{c(){l.c(),n=Jt()},m(i,d){r[s].m(i,d),M(i,n,d),o=!0},p(i,d){let b=s;s=u(i),s===b?r[s].p(i,d):(pt(),R(r[b],1,1,()=>{r[b]=null}),rt(),l=r[s],l?l.p(i,d):(l=r[s]=p[s](i),l.c()),S(l,1),l.m(n.parentNode,n))},i(i){o||(S(l),o=!0)},o(i){R(l),o=!1},d(i){i&&z(n),r[s].d(i)}}}function jl(t){let s,l,n,o,p=_e(t[18]||[]),r=[];for(let b=0;b<p.length;b+=1)r[b]=Il(al(t,p,b));const u=b=>R(r[b],1,1,()=>{r[b]=null});function i(...b){return t[83](t[108],t[110],...b)}function d(...b){return t[84](t[108],t[110],...b)}return{c(){s=x("tr");for(let b=0;b<r.length;b+=1)r[b].c();c(s,"class","hover"),c(s,"draggable",!0),Ee(s,"display",t[108].excluded?"None":null)},m(b,v){M(b,s,v);for(let k=0;k<r.length;k+=1)r[k]&&r[k].m(s,null);l=!0,n||(o=[H(s,"dragstart",i),H(s,"drop",d)],n=!0)},p(b,v){if(t=b,v[0]&393536|v[1]&256){p=_e(t[18]||[]);let k;for(k=0;k<p.length;k+=1){const g=al(t,p,k);r[k]?(r[k].p(g,v),S(r[k],1)):(r[k]=Il(g),r[k].c(),S(r[k],1),r[k].m(s,null))}for(pt(),k=p.length;k<r.length;k+=1)u(k);rt()}v[0]&320&&Ee(s,"display",t[108].excluded?"None":null)},i(b){if(!l){for(let v=0;v<p.length;v+=1)S(r[v]);l=!0}},o(b){r=r.filter(Boolean);for(let v=0;v<r.length;v+=1)R(r[v]);l=!1},d(b){b&&z(s),mt(r,b),n=!1,Bt(o)}}}function Os(t){var n;let s=((n=t[14])==null?void 0:n.msg)+"",l;return{c(){l=Te(s)},m(o,p){M(o,l,p)},p(o,p){var r;p[0]&16384&&s!==(s=((r=o[14])==null?void 0:r.msg)+"")&&Fe(l,s)},i:Ue,o:Ue,d(o){o&&z(l)}}}function Ls(t){var K,ee,J,He,ke,Ge,ve;let s,l,n,o,p,r,u,i,d,b,v,k,g,O,e,Z,L,y,B,re,N=_e(((K=t[14])==null?void 0:K.cols)||Object.keys(((J=(ee=t[14])==null?void 0:ee.data)==null?void 0:J[0])||{})||[]),G=[];for(let A=0;A<N.length;A+=1)G[A]=Al(ul(t,N,A));let W=_e((((He=t[14])==null?void 0:He.data)||[]).filter(t[73])),T=[];for(let A=0;A<W.length;A+=1)T[A]=Rl(cl(t,W,A));return g=new Be({props:{type:"outline",icon:"save",path:"icons"}}),L=new Hl({props:{lang:(ke=t[16])==null?void 0:ke.lang,conf:(Ge=t[16])==null?void 0:Ge.conf,rows_per_page:t[4]||10,page:t[5]||0,total_rows:(ve=t[14])==null?void 0:ve.n_rows}}),L.$on("pageChange",t[75]),{c(){var A;s=x("div"),l=x("table"),n=x("thead"),o=x("tr");for(let X=0;X<G.length;X+=1)G[X].c();p=F(),r=x("tbody");for(let X=0;X<T.length;X+=1)T[X].c();u=F(),i=x("div"),d=x("div"),b=x("div"),v=x("button"),k=x("span"),oe(g.$$.fragment),e=F(),Z=x("div"),oe(L.$$.fragment),c(l,"class","table table-zebra w-[98%] normal-case table-xs"),c(s,"class","w-full overflow-x-auto text-center"),c(k,"class","w-6"),c(v,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(b,"class","tooltip tooltip-right"),c(b,"data-tip",O=t[17].t("crud.save")),c(d,"class","flex-grow flex flex-row align-middle p-2"),Ee(d,"display",(((A=t[14])==null?void 0:A.data)||[]).length>0?null:"none"),c(i,"class","w-full overflow-hidden flex flex-row")},m(A,X){M(A,s,X),m(s,l),m(l,n),m(n,o);for(let se=0;se<G.length;se+=1)G[se]&&G[se].m(o,null);m(l,p),m(l,r);for(let se=0;se<T.length;se+=1)T[se]&&T[se].m(r,null);M(A,u,X),M(A,i,X),m(i,d),m(d,b),m(b,v),m(v,k),ie(g,k,null),m(i,e),m(i,Z),ie(L,Z,null),y=!0,B||(re=H(v,"click",t[74]),B=!0)},p(A,X){var Oe,Je,Me,Pe,ze,Xe,ne,Ke;if(X[0]&16384){N=_e(((Oe=A[14])==null?void 0:Oe.cols)||Object.keys(((Me=(Je=A[14])==null?void 0:Je.data)==null?void 0:Me[0])||{})||[]);let Q;for(Q=0;Q<N.length;Q+=1){const he=ul(A,N,Q);G[Q]?G[Q].p(he,X):(G[Q]=Al(he),G[Q].c(),G[Q].m(o,null))}for(;Q<G.length;Q+=1)G[Q].d(1);G.length=N.length}if(X[0]&16640|X[1]&262144){W=_e((((Pe=A[14])==null?void 0:Pe.data)||[]).filter(A[73]));let Q;for(Q=0;Q<W.length;Q+=1){const he=cl(A,W,Q);T[Q]?T[Q].p(he,X):(T[Q]=Rl(he),T[Q].c(),T[Q].m(r,null))}for(;Q<T.length;Q+=1)T[Q].d(1);T.length=W.length}(!y||X[0]&131072&&O!==(O=A[17].t("crud.save")))&&c(b,"data-tip",O),X[0]&16384&&Ee(d,"display",(((ze=A[14])==null?void 0:ze.data)||[]).length>0?null:"none");const se={};X[0]&65536&&(se.lang=(Xe=A[16])==null?void 0:Xe.lang),X[0]&65536&&(se.conf=(ne=A[16])==null?void 0:ne.conf),X[0]&16&&(se.rows_per_page=A[4]||10),X[0]&32&&(se.page=A[5]||0),X[0]&16384&&(se.total_rows=(Ke=A[14])==null?void 0:Ke.n_rows),L.$set(se)},i(A){y||(S(g.$$.fragment,A),S(L.$$.fragment,A),y=!0)},o(A){R(g.$$.fragment,A),R(L.$$.fragment,A),y=!1},d(A){A&&(z(s),z(u),z(i)),mt(G,A),mt(T,A),ce(g),ce(L),B=!1,re()}}}function Al(t){let s,l=ye(t[111],20)+"",n,o;return{c(){s=x("th"),n=Te(l),c(s,"class","normal-case"),c(s,"title",o=et(t[111],20))},m(p,r){M(p,s,r),m(s,n)},p(p,r){r[0]&16384&&l!==(l=ye(p[111],20)+"")&&Fe(n,l),r[0]&16384&&o!==(o=et(p[111],20))&&c(s,"title",o)},d(p){p&&z(s)}}}function Ds(t){var p;let s,l=ye((p=t[108])==null?void 0:p[t[111]],30)+"",n,o;return{c(){var r;s=x("td"),n=Te(l),c(s,"class","normal-case whitespace-nowrap"),c(s,"title",o=et((r=t[108])==null?void 0:r[t[111]],30))},m(r,u){M(r,s,u),m(s,n)},p(r,u){var i,d;u[0]&16384&&l!==(l=ye((i=r[108])==null?void 0:i[r[111]],30)+"")&&Fe(n,l),u[0]&16384&&o!==(o=et((d=r[108])==null?void 0:d[r[111]],30))&&c(s,"title",o)},d(r){r&&z(s)}}}function Ss(t){var o;let s,l=rl((o=t[108])==null?void 0:o[t[111]],",",0)+"",n;return{c(){s=x("th"),n=Te(l),c(s,"class","normal-case")},m(p,r){M(p,s,r),m(s,n)},p(p,r){var u;r[0]&16384&&l!==(l=rl((u=p[108])==null?void 0:u[p[111]],",",0)+"")&&Fe(n,l)},d(p){p&&z(s)}}}function Cl(t){let s,l;function n(r,u){var i,d,b,v,k,g;return u[0]&16640&&(s=null),s==null&&(s=!!((g=r[49]((k=(v=(i=r[8])==null?void 0:i.tabs)==null?void 0:v[((d=r[8])==null?void 0:d.selected_tab_2_prev)||((b=r[8])==null?void 0:b.selected_tab)])==null?void 0:k.fields,r[111]))!=null&&g.tousnd_sep)),s?Ss:Ds}let o=n(t,[-1,-1,-1,-1,-1]),p=o(t);return{c(){p.c(),l=Jt()},m(r,u){p.m(r,u),M(r,l,u)},p(r,u){o===(o=n(r,u))&&p?p.p(r,u):(p.d(1),p=o(r),p&&(p.c(),p.m(l.parentNode,l)))},d(r){r&&z(l),p.d(r)}}}function Rl(t){var p,r,u;let s,l,n=_e(((p=t[14])==null?void 0:p.cols)||Object.keys(((u=(r=t[14])==null?void 0:r.data)==null?void 0:u[0])||{})||[]),o=[];for(let i=0;i<n.length;i+=1)o[i]=Cl(fl(t,n,i));return{c(){s=x("tr");for(let i=0;i<o.length;i+=1)o[i].c();l=F()},m(i,d){M(i,s,d);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(s,null);m(s,l)},p(i,d){var b,v,k;if(d[0]&16640|d[1]&262144){n=_e(((b=i[14])==null?void 0:b.cols)||Object.keys(((k=(v=i[14])==null?void 0:v.data)==null?void 0:k[0])||{})||[]);let g;for(g=0;g<n.length;g+=1){const O=fl(i,n,g);o[g]?o[g].p(O,d):(o[g]=Cl(O),o[g].c(),o[g].m(s,l))}for(;g<o.length;g+=1)o[g].d(1);o.length=n.length}},d(i){i&&z(s),mt(o,i)}}}function Bl(t){let s,l;return s=new Gl({props:{open:t[13]}}),{c(){oe(s.$$.fragment)},m(n,o){ie(s,n,o),l=!0},p(n,o){const p={};o[0]&8192&&(p.open=n[13]),s.$set(p)},i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){R(s.$$.fragment,n),l=!1},d(n){ce(s,n)}}}function Ul(t){let s,l;return s=new Vl({props:{open:t[9].open,type:t[9].type,msg:t[9].msg,timer:2e4}}),s.$on("dismiss",t[96]),{c(){oe(s.$$.fragment)},m(n,o){ie(s,n,o),l=!0},p(n,o){const p={};o[0]&512&&(p.open=n[9].open),o[0]&512&&(p.type=n[9].type),o[0]&512&&(p.msg=n[9].msg),s.$set(p)},i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){R(s.$$.fragment,n),l=!1},d(n){ce(s,n)}}}function Ml(t){let s,l;const n=[t[10]];let o={};for(let p=0;p<n.length;p+=1)o=Yl(o,n[p]);return s=new Zl({props:o}),s.$on("dismiss",t[97]),{c(){oe(s.$$.fragment)},m(p,r){ie(s,p,r),l=!0},p(p,r){const u=r[0]&1024?$l(n,[ql(p[10])]):{};s.$set(u)},i(p){l||(S(s.$$.fragment,p),l=!0)},o(p){R(s.$$.fragment,p),l=!1},d(p){ce(s,p)}}}function Is(t){var Qt,Gt,Vt,Yt,Zt,$t,qt,yt,h,f;let s,l,n,o,p,r,u,i,d,b,v,k,g,O,e,Z,L,y,B,re,N,G,W,T,K,ee,J,He,ke,Ge,ve,A,X,se,Oe,Je,Me,Pe,ze,Xe,ne,Ke,Q,he,me,nt,ht,tt,Ve,We,dt,ft,D,P,fe,Ye,ue,ut,Le,Ot,lt,bt,_t=`${t[17].t("crud.preview")} ${((Yt=(Vt=(Qt=t[8])==null?void 0:Qt.tabs)==null?void 0:Vt[(Gt=t[14])==null?void 0:Gt.tab])==null?void 0:Yt.label)||""}`,gt,I,te,de,ge,xe,we,Lt,xt,wt,at,ot,it,Ze,kt,Dt;const St=[ps,ns],$e=[];function It(a,_){var E,j;return((j=(E=a[8])==null?void 0:E.tables)==null?void 0:j.length)===0?0:1}p=It(t),r=$e[p]=St[p](t);let U=(($t=(Zt=t[8])==null?void 0:Zt.selected_table_fields)==null?void 0:$t.length)>0&&wl(t);g=new Be({props:{type:"outline",icon:"chevron-up",path:"icons"}});let ae=((yt=(qt=t[8])==null?void 0:qt.selected_table_fields)==null?void 0:yt.length)>0&&kl(t),vt=_e((h=t[8])==null?void 0:h.selected_table_fields.filter(t[58])),De=[];for(let a=0;a<vt.length;a+=1)De[a]=vl(dl(t,vt,a));N=new Be({props:{type:"outline",icon:"chevron-down",path:"icons"}}),J=new Be({props:{type:"outline",icon:"chevron-left",path:"icons"}});let Et=_e(t[7].filter(t[60])),Se=[];for(let a=0;a<Et.length;a+=1)Se[a]=El(ml(t,Et,a));X=new Be({props:{type:"outline",icon:"chevron-right",path:"icons"}}),ze=new Be({props:{type:"outline",icon:"search",path:"icons"}}),tt=new Be({props:{type:"outline",icon:"circle-stack",path:"icons"}});let Nt=_e(t[15]),Qe=[];for(let a=0;a<Nt.length;a+=1)Qe[a]=Nl(_l(t,Nt,a));let Ie=t[1]&&Tl(t),je=t[2]&&Ol(t),Ct=_e(Object.keys(((f=t[8])==null?void 0:f.tabs)||{})),be=[];for(let a=0;a<Ct.length;a+=1)be[a]=Ll(bl(t,Ct,a));const tl=a=>R(be[a],1,1,()=>{be[a]=null});Le=new Be({props:{type:"outline",icon:"plus",path:"icons"}});const Xt=[cs,is,os],jt=[];function Kt(a,_){var E,j,V,$;return a[8].selected_tab==="query_preview"?0:((($=(V=(E=a[8])==null?void 0:E.tabs)==null?void 0:V[(j=a[8])==null?void 0:j.selected_tab])==null?void 0:$.fields)||[]).length>0?1:2}xe=Kt(t),we=jt[xe]=Xt[xe](t);let Ae=t[13]&&Bl(t),Ce=t[9].open&&Ul(t),Re=t[10].open&&Ml(t);return{c(){var a,_,E,j,V,$,pe;s=x("div"),l=x("div"),n=x("div"),o=x("div"),r.c(),u=F(),i=x("div"),U&&U.c(),d=F(),b=x("div"),v=x("div"),k=x("span"),oe(g.$$.fragment),O=F(),e=x("div"),ae&&ae.c(),Z=F();for(let Y=0;Y<De.length;Y+=1)De[Y].c();y=F(),B=x("div"),re=x("span"),oe(N.$$.fragment),G=F(),W=x("div"),T=x("div"),K=x("div"),ee=x("span"),oe(J.$$.fragment),He=F(),ke=x("div");for(let Y=0;Y<Se.length;Y+=1)Se[Y].c();Ge=F(),ve=x("div"),A=x("span"),oe(X.$$.fragment),se=F(),Oe=x("div"),Je=x("div"),Me=x("button"),Pe=x("span"),oe(ze.$$.fragment),Xe=F(),ne=x("input"),Q=F(),he=x("div"),me=x("div"),nt=x("button"),ht=x("span"),oe(tt.$$.fragment),Ve=F(),We=x("select");for(let Y=0;Y<Qe.length;Y+=1)Qe[Y].c();dt=F(),Ie&&Ie.c(),ft=F(),je&&je.c(),D=F(),P=x("div"),fe=x("div");for(let Y=0;Y<be.length;Y+=1)be[Y].c();Ye=F(),ue=x("a"),ut=x("span"),oe(Le.$$.fragment),Ot=F(),lt=x("a"),bt=x("b"),gt=Te(_t),te=F(),de=x("a"),de.innerHTML="<b></b>",ge=F(),we.c(),Lt=F(),xt=x("span"),wt=F(),Ae&&Ae.c(),at=F(),Ce&&Ce.c(),ot=F(),Re&&Re.c(),it=Jt(),c(o,"class","w-full h-10 align-middle border-b border-r-slate-200 hover:border-dashed"),c(k,"class","h-5 w-5 m-auto"),c(v,"class","h-5 w-full flex cursor-pointer hover:bg-base-300 hover:rounded-md !text-center"),Ee(v,"display",((_=(a=t[8])==null?void 0:a.tables)==null?void 0:_.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(e,"id",L=t[19]+"-"+((E=t[8])==null?void 0:E.selecetd_table)+"-selected"),c(e,"class","flex-grow flex flex-col overflow-hidden pt-0.5 pb-0.5"),c(re,"class","h-5 w-5 m-auto"),c(B,"class","h-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md !text-center"),Ee(B,"display",((V=(j=t[8])==null?void 0:j.tables)==null?void 0:V.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(b,"class","w-full flex flex-col flex-grow h-["+(window.innerHeight-200)+"px]"),c(i,"class","w-full align-middle border-r border-r-slate-200 hover:border-dashed flex flex-col"),c(n,"class","w-[18%] min-h-[90%] max-h-[90%] border-r border-r-slate-200"),Ee(n,"min-height",t[47]-130+"px"),Ee(n,"max-height",t[47]-130+"px"),c(ee,"class","h-5 w-full"),c(K,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),Ee(K,"display",(($=t[7])==null?void 0:$.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(ke,"id",t[19]),c(ke,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(A,"class","h-5 w-full"),c(ve,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),Ee(ve,"display",((pe=t[7])==null?void 0:pe.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(Pe,"class","w-5 h-5"),c(Me,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(ne,"type","text"),c(ne,"placeholder",Ke=`${t[17].t("crud.filter")} ${t[17].t("crud.table")}`),c(ne,"class","grow input pl-8 input-bordered w-full input-sm"),c(ne,"autocomplete","off"),c(ne,"autocorrect","off"),c(Je,"class","grow flex"),c(Oe,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 pt-0.5 flex flex-row"),c(ht,"class","w-5 h-5"),c(nt,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(We,"class","grow pl-8 select select-sm select-bordered w-full"),t[0].database===void 0&&zl(()=>t[65].call(We)),c(me,"class","grow flex"),c(he,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 ml-1 pt-0.5 flex flex-row"),c(T,"class","w-full h-10 border-b border-r-slate-200 flex flex-row align-baseline"),c(ut,"class","w-5 font-bold"),c(ue,"role","tab"),c(ue,"class","tab text-md"),c(lt,"role","tab"),c(lt,"class",I="tab text-md "+(t[8].selected_tab==="query_preview"?"tab-active active":"")),c(de,"role","tab"),c(de,"class","tab text-md grow"),c(fe,"role","tablist"),c(fe,"class","tabs tabs-lifted w-full flex"),c(P,"class","w-full flex-grow h-["+(window.innerHeight-200)+"px]"),c(W,"class","w-[82%] flex flex-col"),c(l,"class","flex flex-row"),c(xt,"class","w-10 w-20 h-[300px] h-[301px] h-[302px] h-[303px] h-[304px] h-[305px] h-[306px] h-[307px] h-[308px] h-[309px] h-[310px] h-[311px] h-[312px] h-[313px] h-[314px] h-[315px] h-[316px] h-[317px] h-[318px] h-[319px] h-[320px] h-[321px] h-[322px] h-[323px] h-[324px] h-[325px] h-[326px] h-[327px] h-[328px] h-[329px] h-[330px] h-[331px] h-[332px] h-[333px] h-[334px] h-[335px] h-[336px] h-[337px] h-[338px] h-[339px] h-[340px] h-[341px] h-[342px] h-[343px] h-[344px] h-[345px] h-[346px] h-[347px] h-[348px] h-[349px] h-[350px] h-[351px] h-[352px] h-[353px] h-[354px] h-[355px] h-[356px] h-[357px] h-[358px] h-[359px] h-[360px] h-[361px] h-[362px] h-[363px] h-[364px] h-[365px] h-[366px] h-[367px] h-[368px] h-[369px] h-[370px] h-[371px] h-[372px] h-[373px] h-[374px] h-[375px] h-[376px] h-[377px] h-[378px] h-[379px] h-[380px] h-[381px] h-[382px] h-[383px] h-[384px] h-[385px] h-[386px] h-[387px] h-[388px] h-[389px] h-[390px] h-[391px] h-[392px] h-[393px] h-[394px] h-[395px] h-[396px] h-[397px] h-[398px] h-[399px] h-[400px] h-[401px] h-[402px] h-[403px] h-[404px] h-[405px] h-[406px] h-[407px] h-[408px] h-[409px] h-[410px] h-[411px] h-[412px] h-[413px] h-[414px] h-[415px] h-[416px] h-[417px] h-[418px] h-[419px] h-[420px] h-[421px] h-[422px] h-[423px] h-[424px] h-[425px] h-[426px] h-[427px] h-[428px] h-[429px] h-[430px] h-[431px] h-[432px] h-[433px] h-[434px] h-[435px] h-[436px] h-[437px] h-[438px] h-[439px] h-[440px] h-[441px] h-[442px] h-[443px] h-[444px] h-[445px] h-[446px] h-[447px] h-[448px] h-[449px] h-[450px] h-[451px] h-[452px] h-[453px] h-[454px] h-[455px] h-[456px] h-[457px] h-[458px] h-[459px] h-[460px] h-[461px] h-[462px] h-[463px] h-[464px] h-[465px] h-[466px] h-[467px] h-[468px] h-[469px] h-[470px] h-[471px] h-[472px] h-[473px] h-[474px] h-[475px] h-[476px] h-[477px] h-[478px] h-[479px] h-[480px] h-[481px] h-[482px] h-[483px] h-[484px] h-[485px] h-[486px] h-[487px] h-[488px] h-[489px] h-[490px] h-[491px] h-[492px] h-[493px] h-[494px] h-[495px] h-[496px] h-[497px] h-[498px] h-[499px] h-[500px] h-[501px] h-[502px] h-[503px] h-[504px] h-[505px] h-[506px] h-[507px] h-[508px] h-[509px] h-[510px] h-[511px] h-[512px] h-[513px] h-[514px] h-[515px] h-[516px] h-[517px] h-[518px] h-[519px] h-[520px] h-[521px] h-[522px] h-[523px] h-[524px] h-[525px] h-[526px] h-[527px] h-[528px] h-[529px] h-[530px] h-[531px] h-[532px] h-[533px] h-[534px] h-[535px] h-[536px] h-[537px] h-[538px] h-[539px] h-[540px] h-[541px] h-[542px] h-[543px] h-[544px] h-[545px] h-[546px] h-[547px] h-[548px] h-[549px] h-[550px] h-[551px] h-[552px] h-[553px] h-[554px] h-[555px] h-[556px] h-[557px] h-[558px] h-[559px] h-[560px] h-[561px] h-[562px] h-[563px] h-[564px] h-[565px] h-[566px] h-[567px] h-[568px] h-[569px] h-[570px] h-[571px] h-[572px] h-[573px] h-[574px] h-[575px] h-[576px] h-[577px] h-[578px] h-[579px] h-[580px] h-[581px] h-[582px] h-[583px] h-[584px] h-[585px] h-[586px] h-[587px] h-[588px] h-[589px] h-[590px] h-[591px] h-[592px] h-[593px] h-[594px] h-[595px] h-[596px] h-[597px] h-[598px] h-[599px] h-[600px] h-[601px] h-[602px] h-[603px] h-[604px] h-[605px] h-[606px] h-[607px] h-[608px] h-[609px] h-[610px] h-[611px] h-[612px] h-[613px] h-[614px] h-[615px] h-[616px] h-[617px] h-[618px] h-[619px] h-[620px] h-[621px] h-[622px] h-[623px] h-[624px] h-[625px] h-[626px] h-[627px] h-[628px] h-[629px] h-[630px] h-[631px] h-[632px] h-[633px] h-[634px] h-[635px] h-[636px] h-[637px] h-[638px] h-[639px] h-[640px] h-[641px] h-[642px] h-[643px] h-[644px] h-[645px] h-[646px] h-[647px] h-[648px] h-[649px] h-[650px] h-[651px] h-[652px] h-[653px] h-[654px] h-[655px] h-[656px] h-[657px] h-[658px] h-[659px] h-[660px] h-[661px] h-[662px] h-[663px] h-[664px] h-[665px] h-[666px] h-[667px] h-[668px] h-[669px] h-[670px] h-[671px] h-[672px] h-[673px] h-[674px] h-[675px] h-[676px] h-[677px] h-[678px] h-[679px] h-[680px] h-[681px] h-[682px] h-[683px] h-[684px] h-[685px] h-[686px] h-[687px] h-[688px] h-[689px] h-[690px] h-[691px] h-[692px] h-[693px] h-[694px] h-[695px] h-[696px] h-[697px] h-[698px] h-[699px] h-[700px] h-[701px] h-[702px] h-[703px] h-[704px] h-[705px] h-[706px] h-[707px] h-[708px] h-[709px] h-[710px] h-[711px] h-[712px] h-[713px] h-[714px] h-[715px] h-[716px] h-[717px] h-[718px] h-[719px] h-[720px] h-[721px] h-[722px] h-[723px] h-[724px] h-[725px] h-[726px] h-[727px] h-[728px] h-[729px] h-[730px] h-[731px] h-[732px] h-[733px] h-[734px] h-[735px] h-[736px] h-[737px] h-[738px] h-[739px] h-[740px] h-[741px] h-[742px] h-[743px] h-[744px] h-[745px] h-[746px] h-[747px] h-[748px] h-[749px] h-[750px] h-[751px] h-[752px] h-[753px] h-[754px] h-[755px] h-[756px] h-[757px] h-[758px] h-[759px] h-[760px] h-[761px] h-[762px] h-[763px] h-[764px] h-[765px] h-[766px] h-[767px] h-[768px] h-[769px] h-[770px] h-[771px] h-[772px] h-[773px] h-[774px] h-[775px] h-[776px] h-[777px] h-[778px] h-[779px] h-[780px] h-[781px] h-[782px] h-[783px] h-[784px] h-[785px] h-[786px] h-[787px] h-[788px] h-[789px] h-[790px] h-[791px] h-[792px] h-[793px] h-[794px] h-[795px] h-[796px] h-[797px] h-[798px] h-[799px] h-[800px] h-[801px] h-[802px] h-[803px] h-[804px] h-[805px] h-[806px] h-[807px] h-[808px] h-[809px] h-[810px] h-[811px] h-[812px] h-[813px] h-[814px] h-[815px] h-[816px] h-[817px] h-[818px] h-[819px] h-[820px] h-[821px] h-[822px] h-[823px] h-[824px] h-[825px] h-[826px] h-[827px] h-[828px] h-[829px] h-[830px] h-[831px] h-[832px] h-[833px] h-[834px] h-[835px] h-[836px] h-[837px] h-[838px] h-[839px] h-[840px] h-[841px] h-[842px] h-[843px] h-[844px] h-[845px] h-[846px] h-[847px] h-[848px] h-[849px] h-[850px] h-[851px] h-[852px] h-[853px] h-[854px] h-[855px] h-[856px] h-[857px] h-[858px] h-[859px] h-[860px] h-[861px] h-[862px] h-[863px] h-[864px] h-[865px] h-[866px] h-[867px] h-[868px] h-[869px] h-[870px] h-[871px] h-[872px] h-[873px] h-[874px] h-[875px] h-[876px] h-[877px] h-[878px] h-[879px] h-[880px] h-[881px] h-[882px] h-[883px] h-[884px] h-[885px] h-[886px] h-[887px] h-[888px] h-[889px] h-[890px] h-[891px] h-[892px] h-[893px] h-[894px] h-[895px] h-[896px] h-[897px] h-[898px] h-[899px] h-[900px] h-[901px] h-[902px] h-[903px] h-[904px] h-[905px] h-[906px] h-[907px] h-[908px] h-[909px] h-[910px] h-[911px] h-[912px] h-[913px] h-[914px] h-[915px] h-[916px] h-[917px] h-[918px] h-[919px] h-[920px] h-[921px] h-[922px] h-[923px] h-[924px] h-[925px] h-[926px] h-[927px] h-[928px] h-[929px] h-[930px] h-[931px] h-[932px] h-[933px] h-[934px] h-[935px] h-[936px] h-[937px] h-[938px] h-[939px] h-[940px] h-[941px] h-[942px] h-[943px] h-[944px] h-[945px] h-[946px] h-[947px] h-[948px] h-[949px] h-[950px] h-[951px] h-[952px] h-[953px] h-[954px] h-[955px] h-[956px] h-[957px] h-[958px] h-[959px] h-[960px] h-[961px] h-[962px] h-[963px] h-[964px] h-[965px] h-[966px] h-[967px] h-[968px] h-[969px] h-[970px] h-[971px] h-[972px] h-[973px] h-[974px] h-[975px] h-[976px] h-[977px] h-[978px] h-[979px] h-[980px] h-[981px] h-[982px] h-[983px] h-[984px] h-[985px] h-[986px] h-[987px] h-[988px] h-[989px] h-[990px] h-[991px] h-[992px] h-[993px] h-[994px] h-[995px] h-[996px] h-[997px] h-[998px] h-[999px] "),c(s,"class","w-full --m-3")},m(a,_){M(a,s,_),m(s,l),m(l,n),m(n,o),$e[p].m(o,null),m(n,u),m(n,i),U&&U.m(i,null),m(i,d),m(i,b),m(b,v),m(v,k),ie(g,k,null),m(b,O),m(b,e),ae&&ae.m(e,null),m(e,Z);for(let E=0;E<De.length;E+=1)De[E]&&De[E].m(e,null);m(b,y),m(b,B),m(B,re),ie(N,re,null),m(l,G),m(l,W),m(W,T),m(T,K),m(K,ee),ie(J,ee,null),m(T,He),m(T,ke);for(let E=0;E<Se.length;E+=1)Se[E]&&Se[E].m(ke,null);m(T,Ge),m(T,ve),m(ve,A),ie(X,A,null),m(T,se),m(T,Oe),m(Oe,Je),m(Je,Me),m(Me,Pe),ie(ze,Pe,null),m(Je,Xe),m(Je,ne),Ne(ne,t[11]),m(T,Q),m(T,he),m(he,me),m(me,nt),m(nt,ht),ie(tt,ht,null),m(me,Ve),m(me,We);for(let E=0;E<Qe.length;E+=1)Qe[E]&&Qe[E].m(We,null);el(We,t[0].database,!0),m(T,dt),Ie&&Ie.m(T,null),m(T,ft),je&&je.m(T,null),m(W,D),m(W,P),m(P,fe);for(let E=0;E<be.length;E+=1)be[E]&&be[E].m(fe,null);m(fe,Ye),m(fe,ue),m(ue,ut),ie(Le,ut,null),m(fe,Ot),m(fe,lt),m(lt,bt),m(bt,gt),m(fe,te),m(fe,de),m(P,ge),jt[xe].m(P,null),m(s,Lt),m(s,xt),M(a,wt,_),Ae&&Ae.m(a,_),M(a,at,_),Ce&&Ce.m(a,_),M(a,ot,_),Re&&Re.m(a,_),M(a,it,_),Ze=!0,kt||(Dt=[H(o,"drop",t[54]),H(o,"dragover",t[55]),H(v,"click",t[31]),H(B,"click",t[30]),H(K,"click",t[27]),H(ke,"drop",t[62]),H(ke,"dragover",t[63]),H(ve,"click",t[26]),H(ne,"input",t[64]),H(We,"change",t[65]),H(We,"change",t[66]),H(ue,"click",t[40]),H(lt,"click",Fl(t[72])),H(P,"drop",t[94]),H(P,"dragover",t[95])],kt=!0)},p(a,_){var V,$,pe,Y,w,ct,qe,q,le,At,st,Mt,zt,Ft,Ht,Rt,Pt;let E=p;if(p=It(a),p===E?$e[p].p(a,_):(pt(),R($e[E],1,1,()=>{$e[E]=null}),rt(),r=$e[p],r?r.p(a,_):(r=$e[p]=St[p](a),r.c()),S(r,1),r.m(o,null)),(($=(V=a[8])==null?void 0:V.selected_table_fields)==null?void 0:$.length)>0?U?(U.p(a,_),_[0]&256&&S(U,1)):(U=wl(a),U.c(),S(U,1),U.m(i,d)):U&&(pt(),R(U,1,1,()=>{U=null}),rt()),_[0]&256&&Ee(v,"display",((Y=(pe=a[8])==null?void 0:pe.tables)==null?void 0:Y.length)>0&&a[25](`${a[19]}-${a[8].selecetd_table}-selected`,"height",a[8])?null:"none"),((ct=(w=a[8])==null?void 0:w.selected_table_fields)==null?void 0:ct.length)>0?ae?ae.p(a,_):(ae=kl(a),ae.c(),ae.m(e,Z)):ae&&(ae.d(1),ae=null),_[0]&528704|_[1]&32){vt=_e((qe=a[8])==null?void 0:qe.selected_table_fields.filter(a[58]));let C;for(C=0;C<vt.length;C+=1){const Tt=dl(a,vt,C);De[C]?De[C].p(Tt,_):(De[C]=vl(Tt),De[C].c(),De[C].m(e,null))}for(;C<De.length;C+=1)De[C].d(1);De.length=vt.length}if((!Ze||_[0]&262400&&L!==(L=a[19]+"-"+((q=a[8])==null?void 0:q.selecetd_table)+"-selected"))&&c(e,"id",L),_[0]&256&&Ee(B,"display",((At=(le=a[8])==null?void 0:le.tables)==null?void 0:At.length)>0&&a[25](`${a[19]}-${a[8].selecetd_table}-selected`,"height",a[8])?null:"none"),_[0]&128&&Ee(K,"display",((st=a[7])==null?void 0:st.length)>0&&a[25](a[19],"width",a[7])?null:"none"),_[0]&2240|_[1]&2){Et=_e(a[7].filter(a[60]));let C;for(C=0;C<Et.length;C+=1){const Tt=ml(a,Et,C);Se[C]?Se[C].p(Tt,_):(Se[C]=El(Tt),Se[C].c(),Se[C].m(ke,null))}for(;C<Se.length;C+=1)Se[C].d(1);Se.length=Et.length}if(_[0]&128&&Ee(ve,"display",((Mt=a[7])==null?void 0:Mt.length)>0&&a[25](a[19],"width",a[7])?null:"none"),(!Ze||_[0]&131072&&Ke!==(Ke=`${a[17].t("crud.filter")} ${a[17].t("crud.table")}`))&&c(ne,"placeholder",Ke),_[0]&2048&&ne.value!==a[11]&&Ne(ne,a[11]),_[0]&32768){Nt=_e(a[15]);let C;for(C=0;C<Nt.length;C+=1){const Tt=_l(a,Nt,C);Qe[C]?Qe[C].p(Tt,_):(Qe[C]=Nl(Tt),Qe[C].c(),Qe[C].m(We,null))}for(;C<Qe.length;C+=1)Qe[C].d(1);Qe.length=Nt.length}if(_[0]&32769&&el(We,a[0].database),a[1]?Ie?(Ie.p(a,_),_[0]&2&&S(Ie,1)):(Ie=Tl(a),Ie.c(),S(Ie,1),Ie.m(T,ft)):Ie&&(pt(),R(Ie,1,1,()=>{Ie=null}),rt()),a[2]?je?(je.p(a,_),_[0]&4&&S(je,1)):(je=Ol(a),je.c(),S(je,1),je.m(T,null)):je&&(pt(),R(je,1,1,()=>{je=null}),rt()),_[0]&256|_[1]&1024){Ct=_e(Object.keys(((zt=a[8])==null?void 0:zt.tabs)||{}));let C;for(C=0;C<Ct.length;C+=1){const Tt=bl(a,Ct,C);be[C]?(be[C].p(Tt,_),S(be[C],1)):(be[C]=Ll(Tt),be[C].c(),S(be[C],1),be[C].m(fe,Ye))}for(pt(),C=Ct.length;C<be.length;C+=1)tl(C);rt()}(!Ze||_[0]&147712)&&_t!==(_t=`${a[17].t("crud.preview")} ${((Pt=(Rt=(Ft=a[8])==null?void 0:Ft.tabs)==null?void 0:Rt[(Ht=a[14])==null?void 0:Ht.tab])==null?void 0:Pt.label)||""}`)&&Fe(gt,_t),(!Ze||_[0]&262400&&I!==(I="tab text-md "+(a[8].selected_tab==="query_preview"?"tab-active active":"")))&&c(lt,"class",I);let j=xe;xe=Kt(a),xe===j?jt[xe].p(a,_):(pt(),R(jt[j],1,1,()=>{jt[j]=null}),rt(),we=jt[xe],we?we.p(a,_):(we=jt[xe]=Xt[xe](a),we.c()),S(we,1),we.m(P,null)),a[13]?Ae?(Ae.p(a,_),_[0]&8192&&S(Ae,1)):(Ae=Bl(a),Ae.c(),S(Ae,1),Ae.m(at.parentNode,at)):Ae&&(pt(),R(Ae,1,1,()=>{Ae=null}),rt()),a[9].open?Ce?(Ce.p(a,_),_[0]&512&&S(Ce,1)):(Ce=Ul(a),Ce.c(),S(Ce,1),Ce.m(ot.parentNode,ot)):Ce&&(pt(),R(Ce,1,1,()=>{Ce=null}),rt()),a[10].open?Re?(Re.p(a,_),_[0]&1024&&S(Re,1)):(Re=Ml(a),Re.c(),S(Re,1),Re.m(it.parentNode,it)):Re&&(pt(),R(Re,1,1,()=>{Re=null}),rt())},i(a){if(!Ze){S(r),S(U),S(g.$$.fragment,a),S(N.$$.fragment,a),S(J.$$.fragment,a),S(X.$$.fragment,a),S(ze.$$.fragment,a),S(tt.$$.fragment,a),S(Ie),S(je);for(let _=0;_<Ct.length;_+=1)S(be[_]);S(Le.$$.fragment,a),S(we),S(Ae),S(Ce),S(Re),Ze=!0}},o(a){R(r),R(U),R(g.$$.fragment,a),R(N.$$.fragment,a),R(J.$$.fragment,a),R(X.$$.fragment,a),R(ze.$$.fragment,a),R(tt.$$.fragment,a),R(Ie),R(je),be=be.filter(Boolean);for(let _=0;_<be.length;_+=1)R(be[_]);R(Le.$$.fragment,a),R(we),R(Ae),R(Ce),R(Re),Ze=!1},d(a){a&&(z(s),z(wt),z(at),z(ot),z(it)),$e[p].d(),U&&U.d(),ce(g),ae&&ae.d(),mt(De,a),ce(N),ce(J),mt(Se,a),ce(X),ce(ze),ce(tt),mt(Qe,a),Ie&&Ie.d(),je&&je.d(),mt(be,a),ce(Le),jt[xe].d(),Ae&&Ae.d(a),Ce&&Ce.d(a),Re&&Re.d(a),kt=!1,Bt(Dt)}}}function js(t,s,l){let n,o;ll(t,Xl,h=>l(16,n=h)),ll(t,Kl,h=>l(17,o=h));let{data:p}=s,{return_query:r}=s,{extra_save_op:u}=s,{option:i={}}=s,{action:d={}}=s,b={manage_query_id:null,manage_query:null,database:null,manage_query_conf:null,active:!0},v=10,k=0,g={},O=[],e={tables:[],selecetd_table:null,selected_table_fields:[],selected_tab:"Query 1",selected_tab_2_prev:null,tabs:{"Query 1":{label:"Query 1",fields:[],sql:null,show:!1,use:!1,limit:10,offset:0}}};const B=[{name:"field",type:"data",ellipsis:30},{name:"table",type:"data",ellipsis:30},{name:"func",type:"select",input:!0,options:[{value:"",label:""},{value:"COUNT",label:"COUNT",agreg:!0},{value:"SUM",label:"SUM",agreg:!0},{value:"AVG",label:"AVG",agreg:!0},{value:"MAX",label:"MAX",agreg:!0},{value:"MIN",label:"MIN",agreg:!0}],width:"w-10"},{name:"join",type:"text",input:!0,width:"w-10"},{name:"where_cond",type:"select",input:!0,options:[{value:"",label:""},{value:"=",label:"equal"},{value:">",label:"gt"},{value:">=",label:"gt_eq"},{value:"<",label:"lt"},{value:"<=",label:"lt_eq"},{value:"!=",label:"dif"},{value:"LIKE",label:"like"},{value:"NOT LIKE",label:"not_like"},{value:"IN",label:"in"},{value:"NOT IN",label:"not_in"},{value:"BETWEEN",label:"between"},{value:"NOT BETWEEN",label:"not_between"},{value:"IS NULL",label:"is_null"},{value:"IS NOT NULL",label:"is_not_null"},{value:"IS TRUE",label:"is_true"},{value:"IS FALSE",label:"is_false"}],width:"w-10"},{name:"where_val",type:"text",input:!0,width:"w-10"},{name:"group_by",type:"boolean",input:!0},{name:"order_by",type:"select",input:!0,options:[{value:"",label:""},{value:"ASC",label:"ASC"},{value:"DESC",label:"DESC"}]},{name:"label",type:"text",input:!0,width:"w-10"},{name:"ignore",type:"boolean",input:!0},{name:"formula",type:"boolean",input:!0},{name:"tousnd_sep",type:"boolean",input:!0},{name:"hidden",type:"boolean",input:!0},{name:"delete",type:"button",input:!0,action:"delete",icon:"trash",width:"w-10"}];let re=sl("database-tables"),N={open:!1,msg:null,type:null},G={format:"csv",name:"export",compress:!1,compress_format:"gz",display_fields:"interface_fields",records:"all_records",column_names:"comments",csv:{sep:",",decimal:".",encoding:"utf-8",chunksize:1e4}},W={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},T="",K="",ee=!1,J={};const He=async h=>{var _,E;if(!(h!=null&&h.data)){const j={...b,manage_query_conf:JSON.stringify(e)};j.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[e==null?void 0:e.selected_tab])==null?void 0:E.label,h.data=j}l(13,ee=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:h.table||"manage_query",data:h.data};if(!f.data||!f.table)return l(13,ee=!1),null;const a=await yl(f);console.log("save res:",a,f.data),a.success===!0?(l(9,N.open=!0,N),l(9,N.type="success",N),l(9,N.msg=a.msg,N),a!=null&&a.inserted_primary_key&&l(3,b.manage_query_id=a.inserted_primary_key,b),d!=null&&d.action&&d.action({})):(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N)),l(13,ee=!1)},ke=async h=>{l(13,ee=!0);try{const f={lang:h.lang||(n==null?void 0:n.lang),conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:h.app,database:h==null?void 0:h.database},a=await ss(f);if(l(13,ee=!1),a.success===!0&&a.data)return a.data;l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N)}catch(f){console.log(f.message),l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=f.message,N)}l(13,ee=!1)},Ge=h=>{h.detail.type==="next"?l(8,e.tabs[e.selected_tab].offset+=1,e):h.detail.type==="back"?l(8,e.tabs[e.selected_tab].offset-=1,e):h.detail.type==="first"?l(8,e.tabs[e.selected_tab].offset=0,e):h.detail.type==="last"?l(8,e.tabs[e.selected_tab].offset=Math.ceil(e.tabs[e.selected_tab].limit/((h==null?void 0:h.length)||e.tabs[e.selected_tab].limit)),e):h.detail.type==="rows_per_page"&&(l(8,e.tabs[e.selected_tab].limit=h.detail.rows_per_page,e),l(8,e.tabs[e.selected_tab].offset=0,e)),l(8,e={...e})},ve=h=>{h.detail.type==="next"?l(5,k+=1):h.detail.type==="back"?l(5,k-=1):h.detail.type==="first"?l(5,k=0):h.detail.type==="last"?l(5,k=Math.ceil(v/((h==null?void 0:h.length)||v))):h.detail.type==="rows_per_page"&&(l(4,v=h.detail.rows_per_page),l(5,k=0));let f=v,a=k;console.log(a*f),P({tab:(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab),limit:f,offset:a*f})},A=h=>{l(10,W.open=!1,W)},X=async h=>{var a,_,E,j;h=h||{database:(a=n==null?void 0:n.selected_app)==null?void 0:a.db,...p};const f=await ke({database:h==null?void 0:h.database,app:n==null?void 0:n.selected_app,lang:h.lang});l(6,g={...f}),p!=null&&p.table&&(g!=null&&g[p==null?void 0:p.table])&&((_=e==null?void 0:e.tables)!=null&&_.includes(p==null?void 0:p.table)||(e.tables.push(p==null?void 0:p.table),l(8,e.selecetd_table=p==null?void 0:p.table,e),l(8,e.selected_table_fields=((E=g==null?void 0:g[p==null?void 0:p.table])==null?void 0:E.fields_order)||Object.keys((j=g==null?void 0:g[p==null?void 0:p.table])==null?void 0:j.fields),e),l(8,e={...e}))),l(7,O=Object.keys(g||{}))},se=(h,f,a)=>{try{const _=document.getElementById(h);let E=!1;return f==="width"?E=(_==null?void 0:_.clientWidth)<(_==null?void 0:_.scrollWidth):E=(_==null?void 0:_.clientHeight)<(_==null?void 0:_.scrollHeight),E}catch(_){return console.log(_.message),!1}},Oe=()=>{const h=O[0];O.push(h),O.splice(0,1),l(7,O=[...O])},Je=()=>{const h=O[O.length-1];O.splice(O.length-1,1),O.unshift(h),l(7,O=[...O])},Me=()=>{const h=e==null?void 0:e.tables[0];e==null||e.tables.push(h),e==null||e.tables.splice(0,1),l(8,e={...e})},Pe=()=>{var f,a;const h=e==null?void 0:e.tables[(e==null?void 0:e.tables.length)-1];(f=e==null?void 0:e.tables)==null||f.splice((e==null?void 0:e.tables.length)-1,1),(a=e==null?void 0:e.tables)==null||a.unshift(h),l(8,e={...e})},ze=()=>{var f,a,_;const h=(f=e==null?void 0:e.selected_table_fields)==null?void 0:f[0];(a=e==null?void 0:e.selected_table_fields)==null||a.push(h),(_=e==null?void 0:e.selected_table_fields)==null||_.splice(0,1),l(8,e={...e})},Xe=()=>{var f,a,_,E,j;const h=(a=e==null?void 0:e.selected_table_fields)==null?void 0:a[((f=e==null?void 0:e.selected_table_fields)==null?void 0:f.length)-1];(E=e==null?void 0:e.selected_table_fields)==null||E.splice(((_=e==null?void 0:e.selected_table_fields)==null?void 0:_.length)-1,1),(j=e==null?void 0:e.selected_table_fields)==null||j.unshift(h),l(8,e={...e})},ne=(h,f)=>{h.dataTransfer.setData("TABLE",f)},Ke=h=>{h.preventDefault()},Q=h=>{var a,_,E;h.preventDefault();const f=h.dataTransfer.getData("TABLE");e!=null&&e.tables||l(8,e.tables=[],e),!((a=e==null?void 0:e.tables)!=null&&a.includes(f))&&f&&(e.tables.push(f),l(8,e.selecetd_table=f,e),l(8,e.selected_table_fields=((_=g==null?void 0:g[f])==null?void 0:_.fields_order)||Object.keys((E=g==null?void 0:g[f])==null?void 0:E.fields),e),l(8,e={...e}))},he=h=>{var a,_,E,j,V,$;h.preventDefault();const f=h.dataTransfer.getData("TABLE");if(e!=null&&e.tables||l(8,e.tables=[],e),(a=e==null?void 0:e.tables)!=null&&a.includes(f)&&f){if(e.tables.splice((_=e==null?void 0:e.tables)==null?void 0:_.indexOf(f),1),e.selecetd_table===f)if(((E=e==null?void 0:e.tables)==null?void 0:E.length)>0){const pe=(j=e==null?void 0:e.tables)==null?void 0:j[0];l(8,e.selected_table_fields=((V=g==null?void 0:g[pe])==null?void 0:V.fields_order)||Object.keys(($=g==null?void 0:g[pe])==null?void 0:$.fields),e)}else l(8,e.selected_table_fields=[],e);l(8,e={...e})}},me=(h,f,a)=>{h.dataTransfer.setData("TABLE",f),h.dataTransfer.setData("FIELD",a)},nt=h=>{h.preventDefault()},ht=(h,f)=>{var a,_;h.preventDefault();try{const E=h.dataTransfer.getData("TABLE"),j=h.dataTransfer.getData("FIELD");(_=(a=e==null?void 0:e.tabs)==null?void 0:a[f])!=null&&_.fields||l(8,e.tabs[f].fields=[],e),E&&j&&f&&(e.tabs[f].fields.push({table:E,field:j}),e.tabs[f].fields.map((V,$)=>(V.index=$,V)),l(8,e={...e}))}catch{}},tt=h=>{var f,a,_,E;((f=h==null?void 0:h.field)==null?void 0:f.action)==="delete"&&((E=(_=(a=e==null?void 0:e.tabs)==null?void 0:a[h==null?void 0:h.tab])==null?void 0:_.fields)==null||E.splice(h==null?void 0:h.index,1),e.tabs[h==null?void 0:h.tab].fields.map((j,V)=>(j.index=V,j)),l(8,e={...e}))},Ve=()=>{const f={label:`Query ${Object.keys(e==null?void 0:e.tabs).length+1}`,fields:[],sql:null,show:!1,use:!1,limit:10,offset:0};l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[f==null?void 0:f.label]:Wt.cloneDeep(f)}})},We=()=>{var h,f,a;l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[e==null?void 0:e.selected_tab]:{...(h=e==null?void 0:e.tabs)==null?void 0:h[e==null?void 0:e.selected_tab],edit:!((a=(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab])!=null&&a.edit)}}})},dt=(h,f,a)=>{h.dataTransfer.setData("TAB",f),h.dataTransfer.setData("INDEX",a)},ft=(h,f,a)=>{var V,$,pe,Y,w,ct,qe,q,le,At,st,Mt,zt,Ft,Ht;h.preventDefault();const _=h.dataTransfer.getData("TAB"),E=Number(h.dataTransfer.getData("INDEX")),j=a;if(console.log({_tab:_,_org_field_index:E,_dest_field_index:j}),E!==j&&((pe=($=(V=e==null?void 0:e.tabs)==null?void 0:V[_])==null?void 0:$.fields)!=null&&pe[E])&&((ct=(w=(Y=e==null?void 0:e.tabs)==null?void 0:Y[_])==null?void 0:w.fields)!=null&&ct[j]))try{const Rt=Wt.cloneDeep((le=(q=(qe=e==null?void 0:e.tabs)==null?void 0:qe[_])==null?void 0:q.fields)==null?void 0:le[E]);(Mt=(st=(At=e==null?void 0:e.tabs)==null?void 0:At[_])==null?void 0:st.fields)==null||Mt.splice(E,1),(Ht=(Ft=(zt=e==null?void 0:e.tabs)==null?void 0:zt[_])==null?void 0:Ft.fields)==null||Ht.splice(j,0,Wt.cloneDeep(Rt)),e.tabs[_].fields.map((Pt,C)=>(Pt.index=C,Pt)),l(8,e={...e})}catch(Rt){console.log(Rt==null?void 0:Rt.message)}},D=h=>{var E,j,V,$,pe,Y;const f={select:"",from:"",join:"",where:"",group_by:"",order_by:""},a=(h==null?void 0:h.tab)||(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab);(V=(j=(E=e==null?void 0:e.tabs)==null?void 0:E[a])==null?void 0:j.fields)==null||V.forEach((w,ct)=>{if(!(w!=null&&w.ignore)){let qe=` AS "${w==null?void 0:w.field}"`,q=`"${w==null?void 0:w.table}"."${w==null?void 0:w.field}"`;if(w!=null&&w.label&&(qe=` AS "${w==null?void 0:w.label}"`),(w==null?void 0:w.field)==="*"&&(qe="",q=`"${w==null?void 0:w.table}".${w==null?void 0:w.field}`),w!=null&&w.formula&&(q=`${w==null?void 0:w.field}`),w!=null&&w.hidden||(w!=null&&w.func?f.select+=`${f.select?", ":""}${w==null?void 0:w.func}(${q})${qe}`:f.select+=`${f.select?", ":""}${q}${qe}`),!f.from&&(w!=null&&w.table)&&(f.from+=`"${w==null?void 0:w.table}"`),w!=null&&w.join&&(f.join+=`${f.join?`
`:""}LEFT OUTER JOIN "${w==null?void 0:w.table}" ON "${w==null?void 0:w.table}"."${w==null?void 0:w.field}" = ${w==null?void 0:w.join}`),w!=null&&w.where_cond){let le=`'${w==null?void 0:w.where_val}'`,At=!1;if(["LIKE","NOT LIKE"].includes(w==null?void 0:w.where_cond))le.indexOf("%")!==-1?le=`${le}`:le=`'%${w==null?void 0:w.where_val}%'`;else if(["IN","NOT IN"].includes(w==null?void 0:w.where_cond)){const st=le.split(";");(st==null?void 0:st.length)>0?le=`(${st.join("', '")})`:At=!0}else if(["BETWEEN","NOT BETWEEN"].includes(w==null?void 0:w.where_cond)){const st=le.split(";");(st==null?void 0:st.length)===2?le=`${st.join("' AND '")}`:At=!0}else["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(w==null?void 0:w.where_cond)&&(console.log(w==null?void 0:w.where_cond),le="");!le&&!["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(w==null?void 0:w.where_cond)&&(At=!0),At===!1&&(f.where+=`${f.where?" AND ":""}${q} ${w==null?void 0:w.where_cond} ${le}`)}w!=null&&w.group_by&&!(w!=null&&w.hidden)&&(f.group_by+=`${f.group_by?", ":""}${q}`),w!=null&&w.order_by&&(f.order_by+=`${f.order_by?", ":""}${q} ${w==null?void 0:w.order_by}`)}});const _=`SELECT ${f==null?void 0:f.select}
FROM ${f==null?void 0:f.from}${f!=null&&f.join?`
${f==null?void 0:f.join}`:""}${f!=null&&f.where?`
WHERE ${f==null?void 0:f.where}`:""}${f!=null&&f.group_by?`
GROUP BY ${f==null?void 0:f.group_by}`:""}${f!=null&&f.order_by?`
ORDER BY ${f==null?void 0:f.order_by}`:""}`;return($=e==null?void 0:e.tabs)!=null&&$[a]&&!((Y=(pe=e==null?void 0:e.tabs)==null?void 0:pe[a])!=null&&Y.use)&&l(8,e.tabs[a].sql=_,e),_},P=async h=>{var _,E,j,V,$,pe,Y,w,ct,qe;let f=D(h);(E=(_=e==null?void 0:e.tabs)==null?void 0:_[h==null?void 0:h.tab])!=null&&E.use&&(f=(V=(j=e==null?void 0:e.tabs)==null?void 0:j[h==null?void 0:h.tab])==null?void 0:V.sql);const a={class:"crud",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(pe=($=e==null?void 0:e.tabs)==null?void 0:$[h==null?void 0:h.tab])!=null&&pe.use?null:(w=(Y=e==null?void 0:e.tabs)==null?void 0:Y[h==null?void 0:h.tab])==null?void 0:w.fields,query:f,use_query_string:(qe=(ct=e==null?void 0:e.tabs)==null?void 0:ct[h==null?void 0:h.tab])==null?void 0:qe.use,database:p==null?void 0:p.database,limit:(h==null?void 0:h.limit)||v,offset:(h==null?void 0:h.offset)||k}};l(13,ee=!0),(h==null?void 0:h.tab)!=="query_preview"&&(l(8,e.selected_tab_2_prev=h==null?void 0:h.tab,e),console.log("selected_tab_2_prev:",e.selected_tab_2_prev));try{const q=await nl(a);console.log("query run res:",q),l(14,J={...q,tab:h==null?void 0:h.tab}),l(8,e.selected_tab="query_preview",e),q.success===!0||(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=q.msg||q.toString(),N))}catch(q){l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=`${q==null?void 0:q.message}`,N)}l(13,ee=!1)},fe=async h=>{var f,a,_,E,j,V;if((f=e==null?void 0:e.tabs)!=null&&f[h==null?void 0:h.tab]&&!((_=(a=e==null?void 0:e.tabs)==null?void 0:a[h==null?void 0:h.tab])!=null&&_.show)){if(!((j=(E=e==null?void 0:e.tabs)==null?void 0:E[h==null?void 0:h.tab])!=null&&j.use)){const $=D(h);l(8,e.tabs[h==null?void 0:h.tab].sql=$,e)}l(8,e.tabs[h==null?void 0:h.tab].show=!0,e)}else(V=e==null?void 0:e.tabs)!=null&&V[h==null?void 0:h.tab]&&l(8,e.tabs[h==null?void 0:h.tab].show=!1,e)},Ye=async h=>{var f,a;G.name=(a=(f=e==null?void 0:e.tabs)==null?void 0:f[h==null?void 0:h.tab])==null?void 0:a.label,l(10,W.header=!0,W),l(10,W.title=`${o.t("crud.export")} ${o.t("crud.query")} - ${G.name}`,W),l(10,W.component=(await es(async()=>{const{default:_}=await import("./Export-dM3arQuF.js");return{default:_}},__vite__mapDeps([0,1,2,3]),import.meta.url)).default,W),l(10,W.data={type:"query",tab:h==null?void 0:h.tab,table:h.table,default_export:G},W),l(10,W.actions=[{type:"btn",icon:"ban",name:"CANCEL",class:"btn-sm text-error",label:o.t("crud.cancel"),action:A},{type:"btn",icon:"lightning-bolt",name:"YES",class:"btn-sm text-success",label:o.t("crud.exec"),action:ue}],W),l(10,W.width=4,W),l(10,W.heigth=null,W),l(10,W.open=!0,W)},ue=async h=>{var f,a,_,E,j,V,$,pe,Y;if(h!=null&&h.data){const w=(h==null?void 0:h.tab)||(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab);let ct=D(h);console.log("EXPORT:",w,ct),(a=(f=e==null?void 0:e.tabs)==null?void 0:f[w])!=null&&a.use&&(ct=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[w])==null?void 0:E.sql),G=h.data;const qe={class:"export",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(V=(j=e==null?void 0:e.tabs)==null?void 0:j[w])==null?void 0:V.fields,query:ct,use_query_string:(pe=($=e==null?void 0:e.tabs)==null?void 0:$[w])==null?void 0:pe.use,database:p==null?void 0:p.database,limit:-1}};qe.data._conf=G,A(),l(13,ee=!0);const q=await nl(qe);if(q.success===!0&&q.fname)try{const le=document.createElement("a");le.download=((Y=q==null?void 0:q.aux)==null?void 0:Y.name)||(q==null?void 0:q.fname),le.target="_blank",le.href=`${ts(n==null?void 0:n.conf,!0)}/${q==null?void 0:q.fname}?download`,console.log(le.download,le.href),le.setAttribute("style","display: none"),document.body.appendChild(le),le.click(),document.body.removeChild(le)}catch(le){console.log(le.message)}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=q.msg,N);l(13,ee=!1)}},ut=["etl_report_base","etl_rbase_output"];let Le=[];const Ot=async h=>{var _,E,j,V,$,pe;h.no_loding||l(13,ee=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:h==null?void 0:h.tables,fields:["database"],distinct:!0,limit:-1},a=await ls(f);if(l(15,Le=(_=n==null?void 0:n.apps)==null?void 0:_.map(Y=>Y.db)),a.success===!0&&a.data){for(const Y in a.data)if(Object.hasOwnProperty.call(a.data,Y))for(let w=0;w<((V=(j=(E=a==null?void 0:a.data)==null?void 0:E[Y])==null?void 0:j.data)==null?void 0:V.length);w++)Le.indexOf(($=a.data[Y].data[w])==null?void 0:$.database)===-1&&Le.push((pe=a.data[Y].data[w])==null?void 0:pe.database);l(15,Le=[...Le])}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N);l(13,ee=!1)};Ql(async()=>{var h,f,a,_,E;o.changeLanguage(n==null?void 0:n.lang);try{Ut.locale(n==null?void 0:n.lang)}catch{Ut.locale("en-us")}if(p!=null&&p.manage_query_id&&l(3,b={...p}),p!=null&&p.manage_query_conf){if(typeof(p==null?void 0:p.manage_query_conf)=="string")try{l(8,e=JSON.parse(p==null?void 0:p.manage_query_conf))}catch(j){console.log("ERR trying to parse manage_query_conf: ",j.message)}else if(typeof(p==null?void 0:p.manage_query_conf)=="object"){if((h=p==null?void 0:p.manage_query_conf)!=null&&h.tabs&&((f=p==null?void 0:p.manage_query_conf)!=null&&f.tabs))try{l(8,e=Wt.cloneDeep(p==null?void 0:p.manage_query_conf))}catch(j){console.log("ERR trying to parse manage_query_conf: ",j.message)}}}(p!=null&&p.database||(a=n==null?void 0:n.selected_app)!=null&&a.db)&&(l(3,b.database=(p==null?void 0:p.database)||((_=n==null?void 0:n.selected_app)==null?void 0:_.db),b),p!=null&&p.database||l(0,p.database=b.database,p),await X({database:(E=n==null?void 0:n.selected_app)==null?void 0:E.db,...p}),Ot({tables:ut}))});const lt=window.innerHeight;sl("db");const bt=h=>{var _,E;const f=D(h);l(8,e.tabs[h==null?void 0:h.tab].sql=f,e);const a={...b,database:p==null?void 0:p.database,manage_query_conf:JSON.stringify(e),sql:f};a.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[e==null?void 0:e.selected_tab])==null?void 0:E.label,r(a)},_t=(h,f)=>{var a;try{return(a=h==null?void 0:h.filter(_=>(_==null?void 0:_.field)===f))==null?void 0:a[0]}catch{return null}},gt=h=>{var f,a;l(8,e.selecetd_table=h,e),l(8,e.selected_table_fields=((f=g==null?void 0:g[h])==null?void 0:f.fields_order)||Object.keys(((a=g==null?void 0:g[h])==null?void 0:a.fields)||{}),e)},I=(h,f)=>ne(f,h),te=h=>Q(h),de=h=>Ke(h);function ge(){K=this.value,l(12,K)}const xe=h=>me(h,e==null?void 0:e.selecetd_table,"*"),we=h=>{var a,_;let f=!0;if(K){if(K.length>2)try{const E=new RegExp(K,"i");let j=((_=(a=g==null?void 0:g[e==null?void 0:e.selecetd_table])==null?void 0:a.fields[h])==null?void 0:_.comment)||h;f=!1,(h.match(E)||j.match(E))&&(f=!0)}catch(E){console.log(E)}}return f},Lt=(h,f)=>me(f,e==null?void 0:e.selecetd_table,h),xt=h=>{var a;let f=!0;if(T){if(T.length>2){const _=new RegExp(T,"i");let E=(a=g==null?void 0:g[h])==null?void 0:a.comment;f=!1,(h.match(_)||E.match(_))&&(f=!0)}}return f},wt=(h,f)=>ne(f,h),at=h=>he(h),ot=h=>Ke(h);function it(){T=this.value,l(11,T)}function Ze(){p.database=pl(this),l(0,p),l(15,Le)}const kt=h=>X(p),Dt=h=>bt({tab:(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab}),St=h=>{var _,E;const f=(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab,a={...b,manage_query_conf:JSON.stringify(e)};a.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[f])==null?void 0:E.label,He({table:"manage_query",data:a})};function $e(h){e.tabs[h].label=this.value,l(8,e),l(18,B)}const It=h=>{var a;const f=Object.keys((e==null?void 0:e.tabs)||{});(a=e==null?void 0:e.tabs)==null||delete a[h],l(8,e.selected_tab=f[0],e)},U=h=>{(e==null?void 0:e.selected_tab)!==h&&l(8,e={...e,selected_tab:h})},ae=()=>{(e==null?void 0:e.selected_tab)!=="query_preview"&&l(8,e={...e,selected_tab:"query_preview"})},vt=h=>!0,De=h=>Ye({tab:e==null?void 0:e.selected_tab_2_prev}),Et=h=>ve({detail:h.detail,length:J==null?void 0:J.n_rows});function Se(){e.tabs[e.selected_tab].sql=this.value,l(8,e),l(18,B)}const Nt=h=>{var a,_,E,j,V;let f=!0;if(e.tabs[e==null?void 0:e.selected_tab].field_filter){if(e.tabs[e==null?void 0:e.selected_tab].field_filter.length>2)try{const $=new RegExp(e.tabs[e==null?void 0:e.selected_tab].field_filter,"i");let pe=(E=(_=(a=g==null?void 0:g[e==null?void 0:e.selecetd_table])==null?void 0:a.fields)==null?void 0:_[h])==null?void 0:E.comment;f=!1,((j=h==null?void 0:h.field)!=null&&j.match($)||(V=h==null?void 0:h.label)!=null&&V.match($)||pe!=null&&pe.match($))&&(f=!0)}catch($){console.log($)}}return f};function Qe(h,f,a){f[a][h==null?void 0:h.name]=this.checked,l(8,e),l(6,g),l(18,B)}function Ie(h,f,a){f[a][h==null?void 0:h.name]=pl(this),l(8,e),l(6,g),l(18,B)}const je=(h,f,a)=>{var _;return tt({field:h,data:f,index:(f==null?void 0:f.index)||a,tab:e==null?void 0:e.selected_tab,name:f[(_=B==null?void 0:B[0])==null?void 0:_.name]})};function Ct(h,f,a){f[a][h==null?void 0:h.name]=this.value,l(8,e),l(6,g),l(18,B)}function be(h,f,a){f[a][h==null?void 0:h.name]=this.value,l(8,e),l(6,g),l(18,B)}const tl=(h,f,a)=>dt(a,e==null?void 0:e.selected_tab,(h==null?void 0:h.index)||f),Xt=(h,f,a)=>ft(a,e==null?void 0:e.selected_tab,(h==null?void 0:h.index)||f);function jt(){e.tabs[e==null?void 0:e.selected_tab].formula=this.value,l(8,e),l(18,B)}function Kt(){e.tabs[e==null?void 0:e.selected_tab].formula_label=this.value,l(8,e),l(18,B)}const Ae=()=>{var h,f,a;(a=(f=(h=e==null?void 0:e.tabs)==null?void 0:h[e==null?void 0:e.selected_tab])==null?void 0:f.fields)==null||a.push(Wt.cloneDeep({field:e.tabs[e==null?void 0:e.selected_tab].formula,table:e==null?void 0:e.selected_table,label:e.tabs[e==null?void 0:e.selected_tab].formula_label,formula:!0})),l(8,e.tabs[e==null?void 0:e.selected_tab].formula="",e),l(8,e.tabs[e==null?void 0:e.selected_tab].formula_label="",e),l(8,e={...e})};function Ce(){e.tabs[e==null?void 0:e.selected_tab].field_filter=this.value,l(8,e),l(18,B)}const Re=h=>P({tab:e==null?void 0:e.selected_tab}),Qt=h=>fe({tab:e==null?void 0:e.selected_tab});function Gt(){e.tabs[e==null?void 0:e.selected_tab].use=this.checked,l(8,e),l(18,B)}const Vt=h=>Ye({tab:e==null?void 0:e.selected_tab_2_prev}),Yt=h=>{var f,a,_;return Ge({detail:h.detail,data:(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab],length:(((_=(a=e==null?void 0:e.tabs)==null?void 0:a[e==null?void 0:e.selected_tab])==null?void 0:_.fields)||[]).length})},Zt=h=>ht(h,e==null?void 0:e.selected_tab),$t=h=>nt(h),qt=h=>{l(9,N.open=!1,N)},yt=h=>A(h.detail);return t.$$set=h=>{"data"in h&&l(0,p=h.data),"return_query"in h&&l(1,r=h.return_query),"extra_save_op"in h&&l(2,u=h.extra_save_op),"option"in h&&l(50,i=h.option),"action"in h&&l(51,d=h.action)},t.$$.update=()=>{var h,f,a;t.$$.dirty[0]&1&&console.log(p==null?void 0:p.database),t.$$.dirty[1]&1048576&&(((h=d==null?void 0:d.name)==null?void 0:h.toLowerCase())=="CANCEL".toLowerCase()&&(d==null||d.action()),((f=d==null?void 0:d.name)==null?void 0:f.toLowerCase())=="REFRESH".toLowerCase()&&X(null),((a=d==null?void 0:d.name)==null?void 0:a.toLowerCase())=="SAVE".toLowerCase()&&He({table:"manage_query"}))},[p,r,u,b,v,k,g,O,e,N,W,T,K,ee,J,Le,n,o,B,re,He,Ge,ve,A,X,se,Oe,Je,Me,Pe,ze,Xe,ne,Ke,Q,he,me,nt,ht,tt,Ve,We,dt,ft,P,fe,Ye,lt,bt,_t,i,d,gt,I,te,de,ge,xe,we,Lt,xt,wt,at,ot,it,Ze,kt,Dt,St,$e,It,U,ae,vt,De,Et,Se,Nt,Qe,Ie,je,Ct,be,tl,Xt,jt,Kt,Ae,Ce,Re,Qt,Gt,Vt,Yt,Zt,$t,qt,yt]}class Bs extends Pl{constructor(s){super(),Wl(this,s,js,Is,Jl,{data:0,return_query:1,extra_save_op:2,option:50,action:51},null,[-1,-1,-1,-1,-1])}}export{Bs as default};
