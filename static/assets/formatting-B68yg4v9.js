import{B as p,f as w,a as I,b as _,c as x,d as h}from"./EvidenceDash-BcoqogQS.js";import{au as O}from"./index-B3J7V0-m.js";const b="customFormattingSettings";function T(e,...t){if(typeof e=="function")throw new Error("You must supply the data as the first argument to tidy()");let r=e;for(const n of t)n&&(r=n(r));return r}function l(e){return r=>{const n=r.map(s=>({...s}));let f=0;for(const s of n){for(const i in e){const o=e[i],a=typeof o=="function"?o(s,f,n):o;s[i]=a}++f}return n}}function d(e){if(e&&typeof e=="string"){let t=e.split(" ");e.includes(":")||(e=e+"T00:00:00"),t.length>2&&(e=t[0]+" "+t[1]);const r=/\.([^\s]+)/;e=e.replace(r,""),e=e.replace("Z",""),e=e.replace(" ","T")}return e}function R(e,t){return e=T(e,l({[t]:r=>r[t]?new Date(d(r[t])):null})),e}function $(e,t){return e=T(e,l({[t]:r=>d(r[t])})),e}const g="axis",u="value",y=()=>{var e;try{return((e=O(b))==null?void 0:e.getCustomFormats())||[]}catch{return[]}},D=(e,t,r)=>{let n=E(e);if(t.evidenceType==="string")return;if(n){let s=y(),i=[...p,...s].find(o=>{var a,c;return((a=o.formatTag)==null?void 0:a.toLowerCase())===((c=n==null?void 0:n.toLowerCase)==null?void 0:c.call(n))});if(i)return i}let f=w(e,t,r);if(f)return f};function U(e,t=void 0){let r=e,n=y(),f=[...p,...n].find(i=>{var o,a;return((o=i.formatTag)==null?void 0:o.toLowerCase())===((a=r==null?void 0:r.toLowerCase)==null?void 0:a.call(r))}),s={};return f||(s={formatTag:"custom",formatCode:r},t&&(s.valueType=t),s)}const M=(e,t=void 0,r=void 0)=>{try{return C(e,t,r,u)}catch(n){return console.warn(`Unexpected error calling applyFormatting(${e}, ${t}, ${u}, ${r}). Error=${n}`),e}},V=(e,t=void 0,r=void 0)=>{try{return C(e,t,r,g)}catch{}return e},G=(e,t)=>{let r=e;if(e&&(t!=null&&t.formatTag)){let n=e.toLowerCase().lastIndexOf(`_${t.formatTag.toLowerCase()}`),f="";n>0&&(typeof(t==null?void 0:t.titleTagReplacement)=="string"&&(f=t.titleTagReplacement),r=e.substring(0,n)+f)}return r};function C(e,t=void 0,r=void 0,n=u){if(e==null)return"-";let f;if(t)try{let s=A(t,n),i;try{t.valueType==="date"&&typeof e=="string"?i=new Date(d(e)):e instanceof Date?i=new Date(e.toISOString().slice(0,-1)):t.valueType==="number"&&typeof e!="number"&&!Number.isNaN(e)?i=Number(e):i=e}catch{i=e}if(I(t,s))try{f=_(i,t,r)}catch(o){console.warn(`Unexpected error applying auto formatting. Error=${o}`)}else f=x.format(s,i)}catch(s){console.warn(`Unexpected error applying formatting ${s}`)}return f===void 0&&(f=h(e)),f}function A(e,t=u){return typeof e=="string"?e:t===g&&(e!=null&&e.axisFormatCode)?e.axisFormatCode:e==null?void 0:e.formatCode}function E(e){let t=e.toLowerCase(),r=t.lastIndexOf("_");if(r>0)return t.substr(r).replace("_","")}export{G as a,V as b,R as c,M as f,U as g,D as l,l as m,$ as s,T as t};
