import{S as SvelteComponent,i as init,s as safe_not_equal,T as Toast,a as element,t as text,b as space,c as create_component,d as attr,g as insert,h as append,m as mount_component,k as listen,E as prevent_default,n as set_data,p as group_outros,q as transition_out,r as check_outros,o as transition_in,u as detach,v as destroy_component,x as run_all,y as component_subscribe,z as _global,A as i18n,B as createEventDispatcher,C as onMount,D as hooks,l as lodashExports,N as Loadingv2,X as create_update,an as to_number,a0 as select_value,e as ensure_array_like,I as Icons,a1 as add_render_callback,ac as create_in_transition,ad as fly,w as destroy_each,j as set_input_value,F as empty,a2 as select_option}from"./index-BpRaDDNn.js";import"./pt-WpTh3RxT.js";import{P as Pagination}from"./Pagination-Bvi2KDzm.js";function get_each_context_6(e,t,l){const a=e.slice();return a[61]=t[l],a[72]=t,a[73]=l,a}function get_each_context_7(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_8(e,t,l){const a=e.slice();return a[58]=t[l],a[77]=t,a[60]=l,a}function get_each_context_9(e,t,l){const a=e.slice();return a[61]=t[l],a[78]=t,a[73]=l,a}function get_each_context_10(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_11(e,t,l){const a=e.slice();return a[61]=t[l],a}function get_each_context_3(e,t,l){const a=e.slice();return a[61]=t[l],a}function get_each_context_4(e,t,l){const a=e.slice();return a[58]=t[l],a[60]=l,a}function get_each_context_5(e,t,l){const a=e.slice();return a[69]=t[l],a}function get_each_context(e,t,l){const a=e.slice();return a[58]=t[l],a[59]=t,a[60]=l,a}function get_each_context_1(e,t,l){const a=e.slice();return a[61]=t[l],a[62]=t,a[63]=l,a}function get_each_context_2(e,t,l){const a=e.slice();return a[61]=t[l],a}function create_if_block_8(e){var R;let t,l,a,o,s,_,i,n,r,c,u,p,f,b,g,v,O,m,k,h,L,z=ensure_array_like(Object.keys(e[8])),$=[];for(let w=0;w<z.length;w+=1)$[w]=create_each_block_11(get_each_context_11(e,z,w));let S=ensure_array_like(((R=e[5])==null?void 0:R.extra_options)||[]),j=[];for(let w=0;w<S.length;w+=1)j[w]=create_each_block_8(get_each_context_8(e,S,w));const N=w=>transition_out(j[w],1,1,()=>{j[w]=null});let F=ensure_array_like(Object.keys(e[8])),T=[];for(let w=0;w<F.length;w+=1)T[w]=create_each_block_6(get_each_context_6(e,F,w));return O=new Icons({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){t=element("div"),l=element("div"),a=element("table"),o=element("thead"),s=element("tr");for(let w=0;w<$.length;w+=1)$[w].c();_=space(),i=element("th"),n=space(),r=element("tbody");for(let w=0;w<j.length;w+=1)j[w].c();c=space(),u=element("tfoot"),p=element("tr");for(let w=0;w<T.length;w+=1)T[w].c();f=space(),b=element("td"),g=element("button"),v=element("span"),create_component(O.$$.fragment),attr(i,"class","p-0.5 w-16"),attr(v,"class","w-6"),attr(g,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(b,"class","p-0.5 w-16 text-right"),attr(a,"class","table table-zebra w-[98%] normal-case table-xs"),attr(l,"class","w-full overflow-x-auto"),attr(t,"class","w-full")},m(w,P){insert(w,t,P),append(t,l),append(l,a),append(a,o),append(o,s);for(let M=0;M<$.length;M+=1)$[M]&&$[M].m(s,null);append(s,_),append(s,i),append(a,n),append(a,r);for(let M=0;M<j.length;M+=1)j[M]&&j[M].m(r,null);append(a,c),append(a,u),append(u,p);for(let M=0;M<T.length;M+=1)T[M]&&T[M].m(p,null);append(p,f),append(p,b),append(b,g),append(g,v),mount_component(O,v,null),k=!0,h||(L=listen(g,"click",e[45]),h=!0)},p(w,P){var M;if(P[0]&8448){z=ensure_array_like(Object.keys(w[8]));let C;for(C=0;C<z.length;C+=1){const q=get_each_context_11(w,z,C);$[C]?$[C].p(q,P):($[C]=create_each_block_11(q),$[C].c(),$[C].m(s,_))}for(;C<$.length;C+=1)$[C].d(1);$.length=z.length}if(P[0]&288){S=ensure_array_like(((M=w[5])==null?void 0:M.extra_options)||[]);let C;for(C=0;C<S.length;C+=1){const q=get_each_context_8(w,S,C);j[C]?(j[C].p(q,P),transition_in(j[C],1)):(j[C]=create_each_block_8(q),j[C].c(),transition_in(j[C],1),j[C].m(r,null))}for(group_outros(),C=S.length;C<j.length;C+=1)N(C);check_outros()}if(P[0]&66304){F=ensure_array_like(Object.keys(w[8]));let C;for(C=0;C<F.length;C+=1){const q=get_each_context_6(w,F,C);T[C]?T[C].p(q,P):(T[C]=create_each_block_6(q),T[C].c(),T[C].m(p,f))}for(;C<T.length;C+=1)T[C].d(1);T.length=F.length}},i(w){if(!k){for(let P=0;P<S.length;P+=1)transition_in(j[P]);transition_in(O.$$.fragment,w),w&&(m||add_render_callback(()=>{m=create_in_transition(t,fly,{x:-400,duration:200}),m.start()})),k=!0}},o(w){j=j.filter(Boolean);for(let P=0;P<j.length;P+=1)transition_out(j[P]);transition_out(O.$$.fragment,w),k=!1},d(w){w&&detach(t),destroy_each($,w),destroy_each(j,w),destroy_each(T,w),destroy_component(O),h=!1,L()}}}function create_if_block_7(e){var Ie,Me,Ne,Pe,Ae;let t,l,a,o,s,_,i=e[13].t("crud.allow_in_submenu")+"",n,r,c,u,p,f,b,g,v,O=e[13].t("crud.default_order_by")+"",m,k,h,L,z,$,S,j=e[13].t("crud.field")+"",N,F,T,R=e[13].t("crud.order")+"",w,P,M,C,q,_e,B,E,A,K,Z,re,Ce,ae,U,De,ne,x,ee,Ee,de,ce,ue,ie,Le,V,pe,Te,fe,me=e[13].t("crud.others")+"",we,ze,be,he,te,W,ge,ve,$e=e[13].t("crud.allow_import")+"",ye,ke,Oe,Q,je,Se,se=ensure_array_like(e[14]),X=[];for(let y=0;y<se.length;y+=1)X[y]=create_each_block_5(get_each_context_5(e,se,y));let le=ensure_array_like(((Me=(Ie=e[5])==null?void 0:Ie.layout)==null?void 0:Me.default_order)||[]),H=[];for(let y=0;y<le.length;y+=1)H[y]=create_each_block_4(get_each_context_4(e,le,y));const Fe=y=>transition_out(H[y],1,1,()=>{H[y]=null});let oe=ensure_array_like(Object.keys(((Ae=(Pe=(Ne=e[12])==null?void 0:Ne.tables)==null?void 0:Pe[e[0]])==null?void 0:Ae.fields)||{})),G=[];for(let y=0;y<oe.length;y+=1)G[y]=create_each_block_3(get_each_context_3(e,oe,y));return ie=new Icons({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){t=element("div"),l=element("div"),a=element("div"),o=element("input"),s=space(),_=element("div"),n=text(i),r=space(),c=element("div"),u=element("ul");for(let y=0;y<X.length;y+=1)X[y].c();p=space(),f=element("div"),b=element("input"),g=space(),v=element("div"),m=text(O),k=space(),h=element("div"),L=element("table"),z=element("thead"),$=element("tr"),S=element("th"),N=text(j),F=space(),T=element("th"),w=text(R),P=space(),M=element("th"),C=space(),q=element("tbody");for(let y=0;y<H.length;y+=1)H[y].c();_e=space(),B=element("tfoot"),E=element("tr"),A=element("td"),K=element("input"),Z=space(),re=element("datalist");for(let y=0;y<G.length;y+=1)G[y].c();Ce=space(),ae=element("td"),U=element("input"),De=space(),ne=element("datalist"),x=element("option"),x.innerHTML="",ee=element("option"),ee.innerHTML="",Ee=space(),de=element("td"),ce=element("button"),ue=element("span"),create_component(ie.$$.fragment),Le=space(),V=element("div"),pe=element("input"),Te=space(),fe=element("div"),we=text(me),ze=space(),be=element("div"),he=element("div"),te=element("label"),W=element("input"),ve=element("span"),ye=text($e),attr(o,"type","checkbox"),attr(o,"class","peer"),attr(_,"class","collapse-title text-md font-medium"),attr(u,"class","menu menu-compact w-full"),attr(c,"class","collapse-content border-t-slate-300"),attr(a,"tabindex","0"),attr(a,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm"),attr(b,"type","checkbox"),attr(b,"class","peer"),attr(v,"class","collapse-title text-md font-medium"),attr(S,"class","normal-case"),attr(T,"class","normal-case w-20"),attr(M,"class","p-0.5 w-16"),attr(K,"type","text"),attr(K,"class","input input-sm w-full bg-transparent"),attr(K,"name","field"),attr(K,"list","fields"),attr(re,"id","fields"),attr(A,"class","p-0.5"),attr(U,"type","text"),attr(U,"class","input input-sm w-20 bg-transparent"),attr(U,"name","order"),attr(U,"list","orders"),attr(x,"style","p-2 w-20"),x.__value="ASC",set_input_value(x,x.__value),attr(ee,"style","p-2 w-20"),ee.__value="DESC",set_input_value(ee,ee.__value),attr(ne,"style","p-2 w-20"),attr(ne,"id","orders"),attr(ae,"class","p-0.5 w-20"),attr(ue,"class","w-6"),attr(ce,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(de,"class","p-0.5 w-16 text-right"),attr(L,"class","table table-zebra w-[98%] normal-case table-xs"),attr(h,"class","collapse-content border-t-slate-300"),attr(f,"tabindex","0"),attr(f,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm "),attr(pe,"type","checkbox"),attr(pe,"class","peer"),attr(fe,"class","collapse-title text-md font-medium"),attr(W,"type","checkbox"),attr(W,"class","checkbox checkbox-sm mr-2"),attr(W,"id",ge=e[0]+"-allow_import"),attr(ve,"class","label-text"),attr(te,"class","label cursor-pointer justify-start"),attr(te,"for",ke=e[0]+"-allow_import"),attr(he,"class","form-control w-full max-w-xs m-auto"),attr(be,"class","collapse-content border-t-slate-300"),attr(V,"tabindex","0"),attr(V,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm "),attr(l,"class","md:w-6/12 m-auto"),attr(t,"class","w-full max-h-[30%] overflow-x-hidden overflow-y-auto")},m(y,I){insert(y,t,I),append(t,l),append(l,a),append(a,o),append(a,s),append(a,_),append(_,n),append(a,r),append(a,c),append(c,u);for(let J=0;J<X.length;J+=1)X[J]&&X[J].m(u,null);append(l,p),append(l,f),append(f,b),append(f,g),append(f,v),append(v,m),append(f,k),append(f,h),append(h,L),append(L,z),append(z,$),append($,S),append(S,N),append($,F),append($,T),append(T,w),append($,P),append($,M),append(L,C),append(L,q);for(let J=0;J<H.length;J+=1)H[J]&&H[J].m(q,null);append(L,_e),append(L,B),append(B,E),append(E,A),append(A,K),set_input_value(K,e[4].field),append(A,Z),append(A,re);for(let J=0;J<G.length;J+=1)G[J]&&G[J].m(re,null);append(E,Ce),append(E,ae),append(ae,U),set_input_value(U,e[4].order),append(ae,De),append(ae,ne),append(ne,x),append(ne,ee),append(E,Ee),append(E,de),append(de,ce),append(ce,ue),mount_component(ie,ue,null),append(l,Le),append(l,V),append(V,pe),append(V,Te),append(V,fe),append(fe,we),append(V,ze),append(V,be),append(be,he),append(he,te),append(te,W),W.checked=e[5].layout.allow_import,append(te,ve),append(ve,ye),Q=!0,je||(Se=[listen(K,"input",e[31]),listen(U,"input",e[32]),listen(ce,"click",e[33]),listen(W,"change",e[34])],je=!0)},p(y,I){var J,qe,Be,He,Je;if((!Q||I[0]&8192)&&i!==(i=y[13].t("crud.allow_in_submenu")+"")&&set_data(n,i),I[0]&20512){se=ensure_array_like(y[14]);let D;for(D=0;D<se.length;D+=1){const Y=get_each_context_5(y,se,D);X[D]?X[D].p(Y,I):(X[D]=create_each_block_5(Y),X[D].c(),X[D].m(u,null))}for(;D<X.length;D+=1)X[D].d(1);X.length=se.length}if((!Q||I[0]&8192)&&O!==(O=y[13].t("crud.default_order_by")+"")&&set_data(m,O),(!Q||I[0]&8192)&&j!==(j=y[13].t("crud.field")+"")&&set_data(N,j),(!Q||I[0]&8192)&&R!==(R=y[13].t("crud.order")+"")&&set_data(w,R),I[0]&32){le=ensure_array_like(((qe=(J=y[5])==null?void 0:J.layout)==null?void 0:qe.default_order)||[]);let D;for(D=0;D<le.length;D+=1){const Y=get_each_context_4(y,le,D);H[D]?(H[D].p(Y,I),transition_in(H[D],1)):(H[D]=create_each_block_4(Y),H[D].c(),transition_in(H[D],1),H[D].m(q,null))}for(group_outros(),D=le.length;D<H.length;D+=1)Fe(D);check_outros()}if(I[0]&16&&K.value!==y[4].field&&set_input_value(K,y[4].field),I[0]&4097){oe=ensure_array_like(Object.keys(((Je=(He=(Be=y[12])==null?void 0:Be.tables)==null?void 0:He[y[0]])==null?void 0:Je.fields)||{}));let D;for(D=0;D<oe.length;D+=1){const Y=get_each_context_3(y,oe,D);G[D]?G[D].p(Y,I):(G[D]=create_each_block_3(Y),G[D].c(),G[D].m(re,null))}for(;D<G.length;D+=1)G[D].d(1);G.length=oe.length}I[0]&16&&U.value!==y[4].order&&set_input_value(U,y[4].order),(!Q||I[0]&8192)&&me!==(me=y[13].t("crud.others")+"")&&set_data(we,me),(!Q||I[0]&1&&ge!==(ge=y[0]+"-allow_import"))&&attr(W,"id",ge),I[0]&288&&(W.checked=y[5].layout.allow_import),(!Q||I[0]&8192)&&$e!==($e=y[13].t("crud.allow_import")+"")&&set_data(ye,$e),(!Q||I[0]&1&&ke!==(ke=y[0]+"-allow_import"))&&attr(te,"for",ke)},i(y){if(!Q){for(let I=0;I<le.length;I+=1)transition_in(H[I]);transition_in(ie.$$.fragment,y),y&&(Oe||add_render_callback(()=>{Oe=create_in_transition(t,fly,{x:-400,duration:200}),Oe.start()})),Q=!0}},o(y){H=H.filter(Boolean);for(let I=0;I<H.length;I+=1)transition_out(H[I]);transition_out(ie.$$.fragment,y),Q=!1},d(y){y&&detach(t),destroy_each(X,y),destroy_each(H,y),destroy_each(G,y),destroy_component(ie),je=!1,run_all(Se)}}}function create_if_block_1(e){var v,O;let t,l,a,o,s,_,i,n,r,c,u,p=ensure_array_like(Object.keys(e[7])),f=[];for(let m=0;m<p.length;m+=1)f[m]=create_each_block_2(get_each_context_2(e,p,m));let b=ensure_array_like(e[10].slice(e[3]*e[2],e[3]*e[2]+e[2])),g=[];for(let m=0;m<b.length;m+=1)g[m]=create_each_block(get_each_context(e,b,m));return r=new Pagination({props:{lang:(v=e[12])==null?void 0:v.lang,conf:(O=e[12])==null?void 0:O.conf,rows_per_page:e[2],page:e[3],total_rows:e[10].length}}),r.$on("pageChange",e[28]),{c(){t=element("div"),l=element("div"),a=element("table"),o=element("thead"),s=element("tr");for(let m=0;m<f.length;m+=1)f[m].c();_=space(),i=element("tbody");for(let m=0;m<g.length;m+=1)g[m].c();n=space(),create_component(r.$$.fragment),attr(a,"class","table table-zebra w-[98%] normal-case table-xs table-pin-rows table-pin-cols"),attr(l,"class","overflow-x-auto"),attr(t,"class","w-full")},m(m,k){insert(m,t,k),append(t,l),append(l,a),append(a,o),append(o,s);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);append(a,_),append(a,i);for(let h=0;h<g.length;h+=1)g[h]&&g[h].m(i,null);append(t,n),mount_component(r,t,null),u=!0},p(m,k){var L,z;if(k[0]&8320){p=ensure_array_like(Object.keys(m[7]));let $;for($=0;$<p.length;$+=1){const S=get_each_context_2(m,p,$);f[$]?f[$].p(S,k):(f[$]=create_each_block_2(S),f[$].c(),f[$].m(s,null))}for(;$<f.length;$+=1)f[$].d(1);f.length=p.length}if(k[0]&459948){b=ensure_array_like(m[10].slice(m[3]*m[2],m[3]*m[2]+m[2]));let $;for($=0;$<b.length;$+=1){const S=get_each_context(m,b,$);g[$]?g[$].p(S,k):(g[$]=create_each_block(S),g[$].c(),g[$].m(i,null))}for(;$<g.length;$+=1)g[$].d(1);g.length=b.length}const h={};k[0]&4096&&(h.lang=(L=m[12])==null?void 0:L.lang),k[0]&4096&&(h.conf=(z=m[12])==null?void 0:z.conf),k[0]&4&&(h.rows_per_page=m[2]),k[0]&8&&(h.page=m[3]),k[0]&1024&&(h.total_rows=m[10].length),r.$set(h)},i(m){u||(transition_in(r.$$.fragment,m),m&&(c||add_render_callback(()=>{c=create_in_transition(t,fly,{x:-400,duration:200}),c.start()})),u=!0)},o(m){transition_out(r.$$.fragment,m),u=!1},d(m){m&&detach(t),destroy_each(f,m),destroy_each(g,m),destroy_component(r)}}}function create_each_block_11(e){let t,l=e[13].t(`crud.${e[61]}`)+"",a,o;return{c(){var s,_;t=element("th"),a=text(l),attr(t,"class",o="normal-case "+(((_=(s=e[8])==null?void 0:s[e[61]])==null?void 0:_.width)||""))},m(s,_){insert(s,t,_),append(t,a)},p(s,_){var i,n;_[0]&8448&&l!==(l=s[13].t(`crud.${s[61]}`)+"")&&set_data(a,l),_[0]&256&&o!==(o="normal-case "+(((n=(i=s[8])==null?void 0:i[s[61]])==null?void 0:n.width)||""))&&attr(t,"class",o)},d(s){s&&detach(t)}}}function create_else_block_1(e){let t,l,a,o,s,_;function i(){e[38].call(l,e[61],e[77],e[60])}return{c(){var n,r,c,u;t=element("td"),l=element("input"),attr(l,"type","p-0"),attr(l,"class",a="input input-sm "+(((r=(n=e[8])==null?void 0:n[e[61]])==null?void 0:r.width)||"w-full")+" bg-transparent"),attr(t,"class",o=((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"")},m(n,r){insert(n,t,r),append(t,l),set_input_value(l,e[58][e[61]]),s||(_=listen(l,"input",i),s=!0)},p(n,r){var c,u,p,f;e=n,r[0]&256&&a!==(a="input input-sm "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"w-full")+" bg-transparent")&&attr(l,"class",a),r[0]&288&&set_input_value(l,e[58][e[61]]),r[0]&256&&o!==(o=((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||"")&&attr(t,"class",o)},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_16(e){var c,u;let t,l,a,o,s,_,i=ensure_array_like(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.options)||[]),n=[];for(let p=0;p<i.length;p+=1)n[p]=create_each_block_10(get_each_context_10(e,i,p));function r(){e[37].call(l,e[61],e[77],e[60])}return{c(){var p,f,b,g;t=element("td"),l=element("select");for(let v=0;v<n.length;v+=1)n[v].c();attr(l,"class",a="select select-sm p-0.5 "+(((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||"w-full bg-transparent")),e[58][e[61]]===void 0&&add_render_callback(r),attr(t,"class",o="p-0 "+(((g=(b=e[8])==null?void 0:b[e[61]])==null?void 0:g.width)||""))},m(p,f){insert(p,t,f),append(t,l);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(l,null);select_option(l,e[58][e[61]],!0),s||(_=listen(l,"change",r),s=!0)},p(p,f){var b,g,v,O,m,k;if(e=p,f[0]&256){i=ensure_array_like(((g=(b=e[8])==null?void 0:b[e[61]])==null?void 0:g.options)||[]);let h;for(h=0;h<i.length;h+=1){const L=get_each_context_10(e,i,h);n[h]?n[h].p(L,f):(n[h]=create_each_block_10(L),n[h].c(),n[h].m(l,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=i.length}f[0]&256&&a!==(a="select select-sm p-0.5 "+(((O=(v=e[8])==null?void 0:v[e[61]])==null?void 0:O.width)||"w-full bg-transparent"))&&attr(l,"class",a),f[0]&288&&select_option(l,e[58][e[61]]),f[0]&256&&o!==(o="p-0 "+(((k=(m=e[8])==null?void 0:m[e[61]])==null?void 0:k.width)||""))&&attr(t,"class",o)},d(p){p&&detach(t),destroy_each(n,p),s=!1,_()}}}function create_if_block_15(e){let t,l,a,o,s,_;function i(){e[36].call(l,e[61],e[77],e[60])}return{c(){var n,r,c,u;t=element("td"),l=element("textarea"),attr(l,"rows",1),attr(l,"class",a="textarea textarea-sm p-1 min-h-5 "+(((r=(n=e[8])==null?void 0:n[e[61]])==null?void 0:r.width)||"w-full bg-transparent")),attr(t,"class",o="p-0 "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||""))},m(n,r){insert(n,t,r),append(t,l),set_input_value(l,e[58][e[61]]),s||(_=listen(l,"input",i),s=!0)},p(n,r){var c,u,p,f;e=n,r[0]&256&&a!==(a="textarea textarea-sm p-1 min-h-5 "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"w-full bg-transparent"))&&attr(l,"class",a),r[0]&288&&set_input_value(l,e[58][e[61]]),r[0]&256&&o!==(o="p-0 "+(((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||""))&&attr(t,"class",o)},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_14(e){let t,l,a,o,s;function _(){e[35].call(l,e[61],e[77],e[60])}return{c(){var i,n;t=element("td"),l=element("input"),attr(l,"type","checkbox"),attr(l,"class","checkbox checkbox-sm"),attr(t,"class",a="p-0.5 text-center "+(((n=(i=e[8])==null?void 0:i[e[61]])==null?void 0:n.width)||""))},m(i,n){insert(i,t,n),append(t,l),l.checked=e[58][e[61]],o||(s=listen(l,"change",_),o=!0)},p(i,n){var r,c;e=i,n[0]&288&&(l.checked=e[58][e[61]]),n[0]&256&&a!==(a="p-0.5 text-center "+(((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.width)||""))&&attr(t,"class",a)},d(i){i&&detach(t),o=!1,s()}}}function create_if_block_13(e){let t,l=e[58][e[61]]+"",a,o;return{c(){var s,_;t=element("th"),a=text(l),attr(t,"class",o="normal-case "+(((_=(s=e[8])==null?void 0:s[e[61]])==null?void 0:_.width)||""))},m(s,_){insert(s,t,_),append(t,a)},p(s,_){var i,n;_[0]&288&&l!==(l=s[58][s[61]]+"")&&set_data(a,l),_[0]&256&&o!==(o="normal-case "+(((n=(i=s[8])==null?void 0:i[s[61]])==null?void 0:n.width)||""))&&attr(t,"class",o)},d(s){s&&detach(t)}}}function create_each_block_10(e){let t,l=e[74].label+"",a,o;return{c(){t=element("option"),a=text(l),t.__value=o=e[74].value,set_input_value(t,t.__value)},m(s,_){insert(s,t,_),append(t,a)},p(s,_){_[0]&256&&l!==(l=s[74].label+"")&&set_data(a,l),_[0]&256&&o!==(o=s[74].value)&&(t.__value=o,set_input_value(t,t.__value))},d(s){s&&detach(t)}}}function create_each_block_9(e){let t;function l(s,_){var i,n,r,c,u,p;return s[73]===0?create_if_block_13:((n=(i=s[8])==null?void 0:i[s[61]])==null?void 0:n.type)==="boolean"?create_if_block_14:((c=(r=s[8])==null?void 0:r[s[61]])==null?void 0:c.type)==="text2"?create_if_block_15:((p=(u=s[8])==null?void 0:u[s[61]])==null?void 0:p.type)==="select"?create_if_block_16:create_else_block_1}let a=l(e),o=a(e);return{c(){o.c(),t=empty()},m(s,_){o.m(s,_),insert(s,t,_)},p(s,_){a===(a=l(s))&&o?o.p(s,_):(o.d(1),o=a(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&detach(t),o.d(s)}}}function create_each_block_8(e){let t,l,a,o,s,_,i,n,r,c,u=ensure_array_like(Object.keys(e[8])),p=[];for(let b=0;b<u.length;b+=1)p[b]=create_each_block_9(get_each_context_9(e,u,b));_=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function f(){return e[39](e[60])}return{c(){t=element("tr");for(let b=0;b<p.length;b+=1)p[b].c();l=space(),a=element("td"),o=element("button"),s=element("span"),create_component(_.$$.fragment),i=space(),attr(s,"class","w-6"),attr(o,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(a,"class","p-0.5 w-16 text-right")},m(b,g){insert(b,t,g);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(t,null);append(t,l),append(t,a),append(a,o),append(o,s),mount_component(_,s,null),append(t,i),n=!0,r||(c=listen(o,"click",f),r=!0)},p(b,g){if(e=b,g[0]&288){u=ensure_array_like(Object.keys(e[8]));let v;for(v=0;v<u.length;v+=1){const O=get_each_context_9(e,u,v);p[v]?p[v].p(O,g):(p[v]=create_each_block_9(O),p[v].c(),p[v].m(t,l))}for(;v<p.length;v+=1)p[v].d(1);p.length=u.length}},i(b){n||(transition_in(_.$$.fragment,b),n=!0)},o(b){transition_out(_.$$.fragment,b),n=!1},d(b){b&&detach(t),destroy_each(p,b),destroy_component(_),r=!1,c()}}}function create_if_block_12(e){var r,c;let t,l,a,o,s,_=ensure_array_like(((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.options)||[]),i=[];for(let u=0;u<_.length;u+=1)i[u]=create_each_block_7(get_each_context_7(e,_,u));function n(){e[44].call(t,e[61])}return{c(){var u,p,f,b;t=element("select");for(let g=0;g<i.length;g+=1)i[g].c();attr(t,"class",l="select select-sm p-0.5 "+(((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.width)||"w-full bg-transparent")),t.disabled=a=e[16]((b=(f=e[8])==null?void 0:f[e[61]])==null?void 0:b.disabled,e[61]),e[9][e[61]]===void 0&&add_render_callback(n)},m(u,p){insert(u,t,p);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);select_option(t,e[9][e[61]],!0),o||(s=listen(t,"change",n),o=!0)},p(u,p){var f,b,g,v,O,m;if(e=u,p[0]&256){_=ensure_array_like(((b=(f=e[8])==null?void 0:f[e[61]])==null?void 0:b.options)||[]);let k;for(k=0;k<_.length;k+=1){const h=get_each_context_7(e,_,k);i[k]?i[k].p(h,p):(i[k]=create_each_block_7(h),i[k].c(),i[k].m(t,null))}for(;k<i.length;k+=1)i[k].d(1);i.length=_.length}p[0]&256&&l!==(l="select select-sm p-0.5 "+(((v=(g=e[8])==null?void 0:g[e[61]])==null?void 0:v.width)||"w-full bg-transparent"))&&attr(t,"class",l),p[0]&256&&a!==(a=e[16]((m=(O=e[8])==null?void 0:O[e[61]])==null?void 0:m.disabled,e[61]))&&(t.disabled=a),p[0]&768&&select_option(t,e[9][e[61]])},d(u){u&&detach(t),destroy_each(i,u),o=!1,s()}}}function create_if_block_11(e){let t,l,a,o,s;function _(){e[43].call(t,e[61])}return{c(){var i,n,r,c;t=element("textarea"),attr(t,"rows",1),attr(t,"class",l="textarea textarea-sm p-1 min-h-5 "+(((n=(i=e[8])==null?void 0:i[e[61]])==null?void 0:n.width)||"w-full bg-transparent")),t.disabled=a=e[16]((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[61])},m(i,n){insert(i,t,n),set_input_value(t,e[9][e[61]]),o||(s=listen(t,"input",_),o=!0)},p(i,n){var r,c,u,p;e=i,n[0]&256&&l!==(l="textarea textarea-sm p-1 min-h-5 "+(((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.width)||"w-full bg-transparent"))&&attr(t,"class",l),n[0]&256&&a!==(a=e[16]((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[61]))&&(t.disabled=a),n[0]&768&&set_input_value(t,e[9][e[61]])},d(i){i&&detach(t),o=!1,s()}}}function create_if_block_10(e){let t,l,a,o,s;function _(){e[42].call(t,e[61])}return{c(){var i,n,r,c;t=element("input"),attr(t,"type","text"),attr(t,"class",l="input input-sm "+(((n=(i=e[8])==null?void 0:i[e[61]])==null?void 0:n.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[61])},m(i,n){insert(i,t,n),set_input_value(t,e[9][e[61]]),o||(s=listen(t,"input",_),o=!0)},p(i,n){var r,c,u,p;e=i,n[0]&256&&l!==(l="input input-sm "+(((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),n[0]&256&&a!==(a=e[16]((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[61]))&&(t.disabled=a),n[0]&768&&t.value!==e[9][e[61]]&&set_input_value(t,e[9][e[61]])},d(i){i&&detach(t),o=!1,s()}}}function create_if_block_9(e){let t,l,a,o;function s(){e[40].call(t,e[61])}function _(...i){return e[41](e[61],...i)}return{c(){var i,n;t=element("input"),attr(t,"type","checkbox"),attr(t,"class","checkbox checkbox-sm"),t.disabled=l=e[16]((n=(i=e[8])==null?void 0:i[e[61]])==null?void 0:n.disabled,e[61])},m(i,n){insert(i,t,n),t.checked=e[9][e[61]],a||(o=[listen(t,"change",s),listen(t,"change",_)],a=!0)},p(i,n){var r,c;e=i,n[0]&256&&l!==(l=e[16]((c=(r=e[8])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[61]))&&(t.disabled=l),n[0]&768&&(t.checked=e[9][e[61]])},d(i){i&&detach(t),a=!1,run_all(o)}}}function create_each_block_7(e){let t,l=e[74].label+"",a,o;return{c(){t=element("option"),a=text(l),t.__value=o=e[74].value,set_input_value(t,t.__value)},m(s,_){insert(s,t,_),append(t,a)},p(s,_){_[0]&256&&l!==(l=s[74].label+"")&&set_data(a,l),_[0]&256&&o!==(o=s[74].value)&&(t.__value=o,set_input_value(t,t.__value))},d(s){s&&detach(t)}}}function create_each_block_6(e){let t,l,a,o,s,_;function i(c,u){var p,f,b,g,v,O,m,k;if(u[0]&256&&(l=null),u[0]&256&&(a=null),u[0]&256&&(o=null),u[0]&256&&(s=null),l==null&&(l=!!["boolean"].includes((f=(p=c[8])==null?void 0:p[c[61]])==null?void 0:f.type)),l)return create_if_block_9;if(a==null&&(a=!!["string"].includes((g=(b=c[8])==null?void 0:b[c[61]])==null?void 0:g.type)),a)return create_if_block_10;if(o==null&&(o=!!["text"].includes((O=(v=c[8])==null?void 0:v[c[61]])==null?void 0:O.type)),o)return create_if_block_11;if(s==null&&(s=!!["select"].includes((k=(m=c[8])==null?void 0:m[c[61]])==null?void 0:k.type)),s)return create_if_block_12}let n=i(e,[-1,-1,-1]),r=n&&n(e);return{c(){var c,u;t=element("td"),r&&r.c(),attr(t,"class",_=((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"")},m(c,u){insert(c,t,u),r&&r.m(t,null)},p(c,u){var p,f;n===(n=i(c,u))&&r?r.p(c,u):(r&&r.d(1),r=n&&n(c),r&&(r.c(),r.m(t,null))),u[0]&256&&_!==(_=((f=(p=c[8])==null?void 0:p[c[61]])==null?void 0:f.width)||"")&&attr(t,"class",_)},d(c){c&&detach(t),r&&r.d()}}}function create_each_block_5(e){var p,f,b;let t,l,a,o,s=((b=(f=(p=e[12])==null?void 0:p.tables)==null?void 0:f[e[69].table])==null?void 0:b.comment)+"",_,i,n,r,c;function u(){return e[29](e[69])}return{c(){var g,v,O;t=element("li"),l=element("a"),a=element("b"),a.textContent=`${e[69].table}`,o=text(" - "),_=text(s),i=space(),attr(l,"class","text-ellipsis"),attr(t,"class",n=(O=(v=(g=e[5])==null?void 0:g.layout)==null?void 0:v.allow_in_submenu)!=null&&O[e[69].table]?"bordered bg-base-300":"")},m(g,v){insert(g,t,v),append(t,l),append(l,a),append(l,o),append(l,_),append(t,i),r||(c=listen(t,"click",u),r=!0)},p(g,v){var O,m,k,h,L,z;e=g,v[0]&4096&&s!==(s=((k=(m=(O=e[12])==null?void 0:O.tables)==null?void 0:m[e[69].table])==null?void 0:k.comment)+"")&&set_data(_,s),v[0]&288&&n!==(n=(z=(L=(h=e[5])==null?void 0:h.layout)==null?void 0:L.allow_in_submenu)!=null&&z[e[69].table]?"bordered bg-base-300":"")&&attr(t,"class",n)},d(g){g&&detach(t),r=!1,c()}}}function create_each_block_4(e){let t,l,a=e[58].field+"",o,s,_,i=e[58].order+"",n,r,c,u,p,f,b,g,v,O;f=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function m(){return e[30](e[60])}return{c(){t=element("tr"),l=element("td"),o=text(a),s=space(),_=element("td"),n=text(i),r=space(),c=element("td"),u=element("button"),p=element("span"),create_component(f.$$.fragment),b=space(),attr(_,"class","w-20"),attr(p,"class","w-6"),attr(u,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(c,"class","p-0.5 w-16 text-right")},m(k,h){insert(k,t,h),append(t,l),append(l,o),append(t,s),append(t,_),append(_,n),append(t,r),append(t,c),append(c,u),append(u,p),mount_component(f,p,null),append(t,b),g=!0,v||(O=listen(u,"click",m),v=!0)},p(k,h){e=k,(!g||h[0]&32)&&a!==(a=e[58].field+"")&&set_data(o,a),(!g||h[0]&32)&&i!==(i=e[58].order+"")&&set_data(n,i)},i(k){g||(transition_in(f.$$.fragment,k),g=!0)},o(k){transition_out(f.$$.fragment,k),g=!1},d(k){k&&detach(t),destroy_component(f),v=!1,O()}}}function create_each_block_3(e){let t,l;return{c(){t=element("option"),t.__value=l=e[61],set_input_value(t,t.__value)},m(a,o){insert(a,t,o)},p(a,o){o[0]&4097&&l!==(l=a[61])&&(t.__value=l,set_input_value(t,t.__value))},d(a){a&&detach(t)}}}function create_each_block_2(e){let t,l=e[13].t(`crud.${e[61]}`)+"",a,o,s;return{c(){var _,i;t=element("th"),a=text(l),o=space(),attr(t,"class",s="normal-case "+(((i=(_=e[7])==null?void 0:_[e[61]])==null?void 0:i.width)||""))},m(_,i){insert(_,t,i),append(t,a),append(t,o)},p(_,i){var n,r;i[0]&8320&&l!==(l=_[13].t(`crud.${_[61]}`)+"")&&set_data(a,l),i[0]&128&&s!==(s="normal-case "+(((r=(n=_[7])==null?void 0:n[_[61]])==null?void 0:r.width)||""))&&attr(t,"class",s)},d(_){_&&detach(t)}}}function create_else_block(e){let t,l,a,o;function s(n,r){var c,u,p,f,b,g,v,O,m,k,h,L,z,$,S,j,N,F,T;if(r[0]&1196&&(l=null),r[0]&1196&&(a=null),(f=(p=(c=n[5])==null?void 0:c.fields)==null?void 0:p[(u=n[58])==null?void 0:u.name])!=null&&f[n[61]]&&((g=(b=n[7])==null?void 0:b[n[61]])!=null&&g.no_input))return create_if_block_3;if(l==null&&(l=!!(["boolean"].includes((O=(v=n[7])==null?void 0:v[n[61]])==null?void 0:O.type)&&((h=(m=n[5])==null?void 0:m.fields)!=null&&h[(k=n[58])==null?void 0:k.name]))),l)return create_if_block_4;if(a==null&&(a=!!(["string"].includes((z=(L=n[7])==null?void 0:L[n[61]])==null?void 0:z.type)&&((j=($=n[5])==null?void 0:$.fields)!=null&&j[(S=n[58])==null?void 0:S.name]))),a)return create_if_block_5;if(n[58].name&&((T=(N=n[5])==null?void 0:N.fields)!=null&&T[(F=n[58])==null?void 0:F.name]))return create_if_block_6}let _=s(e,[-1,-1,-1]),i=_&&_(e);return{c(){var n,r,c,u;t=element("td"),i&&i.c(),attr(t,"class",o="p-0.5 "+((r=(n=e[7])==null?void 0:n[e[61]])!=null&&r.no_input?"text-left":"text-center")+" align-middle "+(((u=(c=e[7])==null?void 0:c[e[61]])==null?void 0:u.width)||""))},m(n,r){insert(n,t,r),i&&i.m(t,null)},p(n,r){var c,u,p,f;_===(_=s(n,r))&&i?i.p(n,r):(i&&i.d(1),i=_&&_(n),i&&(i.c(),i.m(t,null))),r[0]&128&&o!==(o="p-0.5 "+((u=(c=n[7])==null?void 0:c[n[61]])!=null&&u.no_input?"text-left":"text-center")+" align-middle "+(((f=(p=n[7])==null?void 0:p[n[61]])==null?void 0:f.width)||""))&&attr(t,"class",o)},d(n){n&&detach(t),i&&i.d()}}}function create_if_block_2(e){var i,n,r,c;let t,l=((c=(r=(i=e[5])==null?void 0:i.fields)==null?void 0:r[(n=e[58])==null?void 0:n.name])==null?void 0:c[e[61]])+"",a,o,s,_;return{c(){var u;t=element("th"),a=text(l),attr(t,"class","cursor-move"),attr(t,"id",o=(u=e[58])==null?void 0:u.name),attr(t,"draggable",!0)},m(u,p){insert(u,t,p),append(t,a),s||(_=[listen(t,"dragover",dragover_handler),listen(t,"dragstart",e[17]),listen(t,"drop",e[18])],s=!0)},p(u,p){var f,b,g,v,O;p[0]&1196&&l!==(l=((v=(g=(f=u[5])==null?void 0:f.fields)==null?void 0:g[(b=u[58])==null?void 0:b.name])==null?void 0:v[u[61]])+"")&&set_data(a,l),p[0]&1036&&o!==(o=(O=u[58])==null?void 0:O.name)&&attr(t,"id",o)},d(u){u&&detach(t),s=!1,run_all(_)}}}function create_if_block_6(e){let t,l,a,o,s;function _(){e[27].call(t,e[58],e[61])}return{c(){var i,n,r,c;t=element("input"),attr(t,"type","number"),attr(t,"class",l="input input-sm "+(((n=(i=e[7])==null?void 0:i[e[61]])==null?void 0:n.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(r=e[7])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[58],e[61])},m(i,n){insert(i,t,n),set_input_value(t,e[5].fields[e[58].name][e[61]]),o||(s=listen(t,"input",_),o=!0)},p(i,n){var r,c,u,p;e=i,n[0]&128&&l!==(l="input input-sm "+(((c=(r=e[7])==null?void 0:r[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),n[0]&1164&&a!==(a=e[16]((p=(u=e[7])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[58],e[61]))&&(t.disabled=a),n[0]&1452&&to_number(t.value)!==e[5].fields[e[58].name][e[61]]&&set_input_value(t,e[5].fields[e[58].name][e[61]])},d(i){i&&detach(t),o=!1,s()}}}function create_if_block_5(e){let t,l,a,o,s;function _(){e[26].call(t,e[58],e[61])}return{c(){var i,n,r,c;t=element("input"),attr(t,"type","text"),attr(t,"class",l="input input-sm "+(((n=(i=e[7])==null?void 0:i[e[61]])==null?void 0:n.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(r=e[7])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[58],e[61])},m(i,n){insert(i,t,n),set_input_value(t,e[5].fields[e[58].name][e[61]]),o||(s=listen(t,"input",_),o=!0)},p(i,n){var r,c,u,p;e=i,n[0]&128&&l!==(l="input input-sm "+(((c=(r=e[7])==null?void 0:r[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),n[0]&1164&&a!==(a=e[16]((p=(u=e[7])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[58],e[61]))&&(t.disabled=a),n[0]&1452&&t.value!==e[5].fields[e[58].name][e[61]]&&set_input_value(t,e[5].fields[e[58].name][e[61]])},d(i){i&&detach(t),o=!1,s()}}}function create_if_block_4(e){let t,l,a,o;function s(){e[24].call(t,e[58],e[61])}function _(...i){return e[25](e[61],...i)}return{c(){var i,n;t=element("input"),attr(t,"type","checkbox"),attr(t,"class","checkbox checkbox-sm"),t.disabled=l=e[16]((n=(i=e[7])==null?void 0:i[e[61]])==null?void 0:n.disabled,e[58],e[61])},m(i,n){insert(i,t,n),t.checked=e[5].fields[e[58].name][e[61]],a||(o=[listen(t,"change",s),listen(t,"change",_)],a=!0)},p(i,n){var r,c;e=i,n[0]&1164&&l!==(l=e[16]((c=(r=e[7])==null?void 0:r[e[61]])==null?void 0:c.disabled,e[58],e[61]))&&(t.disabled=l),n[0]&1452&&(t.checked=e[5].fields[e[58].name][e[61]])},d(i){i&&detach(t),a=!1,run_all(o)}}}function create_if_block_3(e){var a,o,s,_;let t=((_=(s=(a=e[5])==null?void 0:a.fields)==null?void 0:s[(o=e[58])==null?void 0:o.name])==null?void 0:_[e[61]])+"",l;return{c(){l=text(t)},m(i,n){insert(i,l,n)},p(i,n){var r,c,u,p;n[0]&1196&&t!==(t=((p=(u=(r=i[5])==null?void 0:r.fields)==null?void 0:u[(c=i[58])==null?void 0:c.name])==null?void 0:p[i[61]])+"")&&set_data(l,t)},d(i){i&&detach(l)}}}function create_each_block_1(e){let t;function l(s,_){return s[61]==="name"?create_if_block_2:create_else_block}let a=l(e),o=a(e);return{c(){o.c(),t=empty()},m(s,_){o.m(s,_),insert(s,t,_)},p(s,_){a===(a=l(s))&&o?o.p(s,_):(o.d(1),o=a(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&detach(t),o.d(s)}}}function create_each_block(e){let t,l,a=ensure_array_like(Object.keys(e[7])),o=[];for(let s=0;s<a.length;s+=1)o[s]=create_each_block_1(get_each_context_1(e,a,s));return{c(){t=element("tr");for(let s=0;s<o.length;s+=1)o[s].c();l=space(),attr(t,"class","hover")},m(s,_){insert(s,t,_);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(t,null);append(t,l)},p(s,_){if(_[0]&459948){a=ensure_array_like(Object.keys(s[7]));let i;for(i=0;i<a.length;i+=1){const n=get_each_context_1(s,a,i);o[i]?o[i].p(n,_):(o[i]=create_each_block_1(n),o[i].c(),o[i].m(t,l))}for(;i<o.length;i+=1)o[i].d(1);o.length=a.length}},d(s){s&&detach(t),destroy_each(o,s)}}}function create_if_block(e){let t,l;return t=new Loadingv2({props:{open:e[11]}}),{c(){create_component(t.$$.fragment)},m(a,o){mount_component(t,a,o),l=!0},p(a,o){const s={};o[0]&2048&&(s.open=a[11]),t.$set(s)},i(a){l||(transition_in(t.$$.fragment,a),l=!0)},o(a){transition_out(t.$$.fragment,a),l=!1},d(a){destroy_component(t,a)}}}function create_fragment(e){let t,l,a,o,s,_=`${e[13].t("crud.field")}s`,i,n,r,c,u,p=`${e[13].t("crud.layout")}`,f,b,g,v,O,m=`${e[13].t("crud.extend")}`,k,h,L,z,$,S,j,N,F,T,R,w,P,M;const C=[create_if_block_1,create_if_block_7,create_if_block_8],q=[];function _e(E,A){return E[1]===0?0:E[1]===1?1:E[1]===2?2:-1}~(j=_e(e))&&(N=q[j]=C[j](e)),T=new Toast({props:{open:e[6].open,type:e[6].type,msg:e[6].msg,timer:2e4}}),T.$on("dismiss",e[46]);let B=e[11]&&create_if_block(e);return{c(){t=element("div"),l=element("div"),a=element("div"),o=element("a"),s=element("b"),i=text(_),r=space(),c=element("a"),u=element("b"),f=text(p),g=space(),v=element("a"),O=element("b"),k=text(m),L=space(),z=element("a"),z.innerHTML="<b></b>",$=space(),S=element("div"),N&&N.c(),F=space(),create_component(T.$$.fragment),R=space(),B&&B.c(),attr(o,"role","tab"),attr(o,"class",n="tab text-md "+(e[1]===0?"tab-active active":"")),attr(c,"role","tab"),attr(c,"class",b="tab text-md "+(e[1]===1?"tab-active active":"")),attr(v,"role","tab"),attr(v,"class",h="tab text-md "+(e[1]===2?"tab-active active":"")),attr(z,"role","tab"),attr(z,"class","tab text-md grow"),attr(a,"role","tablist"),attr(a,"class","tabs tabs-lifted w-full flex"),attr(S,"class","w-full p-2"),attr(l,"class","grow w-full"),attr(t,"class","flex flex-col")},m(E,A){insert(E,t,A),append(t,l),append(l,a),append(a,o),append(o,s),append(s,i),append(a,r),append(a,c),append(c,u),append(u,f),append(a,g),append(a,v),append(v,O),append(O,k),append(a,L),append(a,z),append(l,$),append(l,S),~j&&q[j].m(S,null),append(l,F),mount_component(T,l,null),append(t,R),B&&B.m(t,null),w=!0,P||(M=[listen(o,"click",prevent_default(e[21])),listen(c,"click",prevent_default(e[22])),listen(v,"click",prevent_default(e[23]))],P=!0)},p(E,A){(!w||A[0]&8192)&&_!==(_=`${E[13].t("crud.field")}s`)&&set_data(i,_),(!w||A[0]&2&&n!==(n="tab text-md "+(E[1]===0?"tab-active active":"")))&&attr(o,"class",n),(!w||A[0]&8192)&&p!==(p=`${E[13].t("crud.layout")}`)&&set_data(f,p),(!w||A[0]&2&&b!==(b="tab text-md "+(E[1]===1?"tab-active active":"")))&&attr(c,"class",b),(!w||A[0]&8192)&&m!==(m=`${E[13].t("crud.extend")}`)&&set_data(k,m),(!w||A[0]&2&&h!==(h="tab text-md "+(E[1]===2?"tab-active active":"")))&&attr(v,"class",h);let K=j;j=_e(E),j===K?~j&&q[j].p(E,A):(N&&(group_outros(),transition_out(q[K],1,1,()=>{q[K]=null}),check_outros()),~j?(N=q[j],N?N.p(E,A):(N=q[j]=C[j](E),N.c()),transition_in(N,1),N.m(S,null)):N=null);const Z={};A[0]&64&&(Z.open=E[6].open),A[0]&64&&(Z.type=E[6].type),A[0]&64&&(Z.msg=E[6].msg),T.$set(Z),E[11]?B?(B.p(E,A),A[0]&2048&&transition_in(B,1)):(B=create_if_block(E),B.c(),transition_in(B,1),B.m(t,null)):B&&(group_outros(),transition_out(B,1,1,()=>{B=null}),check_outros())},i(E){w||(transition_in(N),transition_in(T.$$.fragment,E),transition_in(B),w=!0)},o(E){transition_out(N),transition_out(T.$$.fragment,E),transition_out(B),w=!1},d(E){E&&detach(t),~j&&q[j].d(),destroy_component(T),B&&B.d(),P=!1,run_all(M)}}}const dragover_handler=e=>e.preventDefault();function instance($$self,$$props,$$invalidate){let $_global,$i18n;component_subscribe($$self,_global,e=>$$invalidate(12,$_global=e)),component_subscribe($$self,i18n,e=>$$invalidate(13,$i18n=e)),createEventDispatcher();let{table}=$$props,{data={}}=$$props,{action={}}=$$props,tab=0,limit=10,offset=0,custom_table={};const order_by={};let custom_table_config={fields:{},layout:{allow_in_submenu:{},default_order:[],allow_import:!1},extra_options:[]},toast={open:!1,msg:null,type:null},_fields_schema={name:{type:"string",no_input:!0},label:{type:"string",width:"w-34"},use_label:{type:"boolean",disabled:"!custom_table_config?.fields?.[d?.name]?.label"},display:{type:"boolean"},ellipsis:{type:"string",width:"w-14"},nullable:{type:"boolean"},att:{type:"boolean",disabled:"custom_table_config?.fields?.[d?.name]?.number||custom_table_config?.fields?.[d?.name]?.date"},preview:{type:"boolean",disabled:"!custom_table_config?.fields?.[d?.name]?.att"},number:{type:"boolean"},dec_places:{type:"string",width:"w-14",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},tous_sep:{type:"string",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},intl_nformat:{type:"string",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},date:{type:"boolean"},date_format:{type:"string",width:"w-34",disabled:"!custom_table_config?.fields?.[d?.name]?.date"},link:{type:"boolean",disabled:"custom_table_config?.fields?.[d?.name]?.number||custom_table_config?.fields?.[d?.name]?.date"}};const sizes=[...Array(12).keys()].map(e=>({value:e+1,label:`${((e+1)/12*100).toFixed(2)}%`}));let _extra_opts_schema={component:{type:"string",width:"w-24"},label:{type:"string",width:"w-24"},data:{type:"text",width:"w-30"},icon:{type:"string",width:"w-24"},intercept_c:{type:"boolean"},intercept_u:{type:"boolean"},intercept_r:{type:"boolean"},intercept_d:{type:"boolean"},not_row_centred:{type:"boolean"},pop_up:{type:"boolean"},main:{type:"boolean"},size:{type:"select",width:"w-24",options:sizes}},_extra_opts={},fields=[],fk_tables=[],drag_field,loading=!1;const save=async e=>{$$invalidate(11,loading=!0);const t={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:{app_id:1,app:"ADMIN"},table:"custom_table",data:Object.assign(e.custom_table||custom_table,{config:JSON.stringify(e.custom_table_config||custom_table_config)})},l=await create_update(t);if(l.success===!0){$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="success",toast),$$invalidate(6,toast.msg=l.msg,toast),l.inserted_primary_key&&(e.custom_table?e.custom_table[$_global.tables.custom_table.pk]=l.inserted_primary_key:custom_table[$_global.tables.custom_table.pk]=l.inserted_primary_key),_global.set({...$_global,tables:{...$_global.tables,[table]:{...$_global.tables[table],custom_table:Object.assign(e.custom_table||custom_table,{config:JSON.stringify(e.custom_table_config||custom_table_config)})}}});try{action!=null&&action.action&&(action==null||action.action(e.custom_table_config||custom_table_config))}catch(a){console.log(a.message)}}else $$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=l.msg,toast);$$invalidate(11,loading=!1)},get_fields=e=>{var o,s,_,i,n,r,c,u,p,f,b,g,v,O,m,k,h,L,z;let t={};((o=e==null?void 0:e.fields_order)==null?void 0:o.length)>0&&(e!=null&&e.fields)?e==null||e.fields_order.forEach($=>{var S;t[$]=(S=e==null?void 0:e.fields)==null?void 0:S[$]}):e!=null&&e.fields?t=e==null?void 0:e.fields:t=e;const l=[],a=Object.keys(t);for(const $ in t)if(Object.hasOwnProperty.call(t,$)){if(t[$].pk)continue;if(t[$].fk){if(a.includes((_=(s=t[$])==null?void 0:s.ref)==null?void 0:_.referred_columns_desc))continue;l.push(Object.assign(t[$],{name:(n=(i=t[$])==null?void 0:i.ref)==null?void 0:n.referred_columns_desc,referred_table:((c=(r=t[$])==null?void 0:r.ref)==null?void 0:c.referred_table)||((u=t[$])==null?void 0:u.referred_table),comment:(h=(k=(v=(g=$_global==null?void 0:$_global.tables)==null?void 0:g[((f=(p=t[$])==null?void 0:p.ref)==null?void 0:f.referred_table)||((b=t[$])==null?void 0:b.referred_table)])==null?void 0:v.fields)==null?void 0:k[(m=(O=t[$])==null?void 0:O.ref)==null?void 0:m.referred_columns_desc])==null?void 0:h.comment,referred_column:(z=(L=t[$])==null?void 0:L.ref)==null?void 0:z.referred_column}))}else l.push(t[$])}return l},prepare_fields=e=>{var l;const t={};return get_fields(lodashExports.cloneDeep((l=$_global==null?void 0:$_global.tables)==null?void 0:l[e])||{}).forEach((a,o)=>{var s,_,i;try{const n={};n.name=a.name,n.label=a.comment,n.ellipsis=30,n.order=o+1,n.display=(((s=$_global==null?void 0:$_global.conf)==null?void 0:s.form_not_update)||[]).indexOf(a.name)===-1,n.fk=!!a.fk,n.autocomplete=!!a.fk,n.nullable=a.nullable||!1,n.att=a.name.toLowerCase().substring(0,7)==="attach_",n.number=["int","dec","flo","rea"].indexOf(a.name.toLowerCase().substring(0,3))!==-1,n.dec_places=null,n.tous_sep=null,n.intl_nformat=null,n.date=["date","datetime","timestamp"].indexOf((_=a==null?void 0:a.type)==null?void 0:_.toLowerCase())!==-1,n.long_text=["text","longtext"].indexOf((i=a==null?void 0:a.type)==null?void 0:i.toLowerCase())!==-1,n.date_format=null,n.regex_val=null,t[n.name]=Object.assign({},n)}catch(n){console.log(a,n.message)}}),t},handle_pagination=e=>{e.type==="next"?$$invalidate(3,offset+=1):e.type==="back"?$$invalidate(3,offset-=1):e.type==="first"?$$invalidate(3,offset=0):e.type==="last"?$$invalidate(3,offset=Math.ceil(limit/((data==null?void 0:data.total)||limit))):e.type==="rows_per_page"&&($$invalidate(2,limit=e.rows_per_page),$$invalidate(3,offset=0))},get_eval=(payload,d,field)=>{try{return eval(payload)}catch(e){return console.log(payload,d,field,e.message),!1}},handleDrag=e=>{drag_field=e.currentTarget.id},handleDrop=e=>{const t=e.currentTarget.id;if(drag_field!==t)try{let l=fields.map(s=>s.name);const a=Object.assign({},fields[l.indexOf(drag_field)]);fields.splice(l.indexOf(drag_field),1),fields.splice(l.indexOf(t),0,a),$$invalidate(10,fields=[...fields.map((s,_)=>(s.order=_+1,s))]);const o={};fields.forEach((s,_)=>{var i;o[s.name]=Object.assign((i=custom_table_config==null?void 0:custom_table_config.fields)==null?void 0:i[s.name],{order:_+1})}),$$invalidate(5,custom_table_config={...custom_table_config,fields:o})}catch(l){console.log(l.message)}};onMount(()=>{var e,t,l,a,o,s,_,i,n,r,c,u,p,f,b,g,v,O;$i18n.changeLanguage($_global==null?void 0:$_global.lang),console.log((e=$_global==null?void 0:$_global.tables)==null?void 0:e[table]);try{hooks.locale($_global==null?void 0:$_global.lang)}catch{hooks.locale("en-us")}$$invalidate(10,fields=get_fields(lodashExports.cloneDeep((t=$_global==null?void 0:$_global.tables)==null?void 0:t[table])||{}));for(const m in $_global==null?void 0:$_global.tables)for(const k in(a=(l=$_global==null?void 0:$_global.tables)==null?void 0:l[m])==null?void 0:a.fields)if(Object.hasOwnProperty.call((s=(o=$_global==null?void 0:$_global.tables)==null?void 0:o[m])==null?void 0:s.fields,k)){const h=(i=(_=$_global==null?void 0:$_global.tables)==null?void 0:_[m])==null?void 0:i.fields[k];if(h.fk&&((n=h==null?void 0:h.ref)==null?void 0:n.referred_table)===table){const L=Object.assign(h,{table:m});fk_tables.push(Object.assign(L,h==null?void 0:h.ref))}}if(custom_table=(c=(r=$_global==null?void 0:$_global.tables)==null?void 0:r[table])==null?void 0:c.custom_table,custom_table!=null&&custom_table.user_id&&((u=$_global==null?void 0:$_global.user)==null?void 0:u.user_id)!==(custom_table==null?void 0:custom_table.user_id)&&(delete custom_table.user_id,delete custom_table.custom_table_id),custom_table){if($$invalidate(5,custom_table_config=custom_table==null?void 0:custom_table.config),typeof custom_table_config=="string")try{$$invalidate(5,custom_table_config=JSON.parse(custom_table_config));const m=prepare_fields(table);if(!(custom_table_config!=null&&custom_table_config.fields))$$invalidate(5,custom_table_config.fields=m,custom_table_config);else{for(const h in m)Object.hasOwnProperty.call(m,h)&&(custom_table_config.fields[h]||$$invalidate(5,custom_table_config.fields[h]=m[h],custom_table_config));const k=[];for(const h in custom_table_config.fields)if(Object.hasOwnProperty.call(custom_table_config.fields,h)){const L=fields.filter(z=>z.name===h);k.push(Object.assign({},L[0]))}$$invalidate(10,fields=k)}custom_table_config!=null&&custom_table_config.layout||$$invalidate(5,custom_table_config.layout={allow_in_submenu:{},default_order:[],allow_import:!1},custom_table_config),custom_table_config!=null&&custom_table_config.extra_options||$$invalidate(5,custom_table_config.extra_options=[],custom_table_config)}catch(m){console.log(m.message)}}else{custom_table={table,db:((f=(p=$_global==null?void 0:$_global.tables)==null?void 0:p[table])==null?void 0:f.database)||((g=(b=$_global==null?void 0:$_global.tables)==null?void 0:b[table])==null?void 0:g.db)||((v=$_global==null?void 0:$_global.selected_app)==null?void 0:v.db),app_id:(O=$_global==null?void 0:$_global.selected_app)==null?void 0:O.app_id};const m=prepare_fields(table);$$invalidate(5,custom_table_config={fields:m,layout:{allow_in_submenu:{},default_order:[],allow_import:!1},extra_options:[]})}});const click_handler=()=>{$$invalidate(1,tab=0)},click_handler_1=()=>{$$invalidate(1,tab=1)},click_handler_2=()=>{$$invalidate(1,tab=2)};function input_change_handler(e,t){custom_table_config.fields[e.name][t]=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const change_handler=(e,t)=>{var l;try{$$invalidate(7,_fields_schema={..._fields_schema,[e]:{..._fields_schema[e],disabled:(l=_fields_schema==null?void 0:_fields_schema[e])==null?void 0:l.disabled}})}catch(a){console.log(a.message)}};function input_input_handler(e,t){custom_table_config.fields[e.name][t]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_input_handler_1(e,t){custom_table_config.fields[e.name][t]=to_number(this.value),$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const pageChange_handler=e=>handle_pagination(e.detail),click_handler_3=e=>{var t,l;try{(l=(t=custom_table_config==null?void 0:custom_table_config.layout)==null?void 0:t.allow_in_submenu)!=null&&l[e.table]?(delete custom_table_config.layout.allow_in_submenu[e.table],$$invalidate(5,custom_table_config.layout.allow_in_submenu={...custom_table_config.layout.allow_in_submenu},custom_table_config)):$$invalidate(5,custom_table_config.layout.allow_in_submenu={...custom_table_config.layout.allow_in_submenu,[e.table]:!0},custom_table_config)}catch(a){console.log(a.message)}},click_handler_4=e=>{try{custom_table_config.layout.default_order.splice(e,1),$$invalidate(5,custom_table_config.layout.default_order=[...custom_table_config.layout.default_order],custom_table_config)}catch{}};function input2_input_handler(){order_by.field=this.value,$$invalidate(4,order_by)}function input3_input_handler(){order_by.order=this.value,$$invalidate(4,order_by)}const click_handler_5=()=>{try{!order_by.field||!order_by.order||($$invalidate(5,custom_table_config.layout.default_order=[...custom_table_config.layout.default_order,Object.assign({},order_by)],custom_table_config),$$invalidate(4,order_by.field="",order_by),$$invalidate(4,order_by.order="",order_by))}catch{}};function input5_change_handler(){custom_table_config.layout.allow_import=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_change_handler_1(e,t,l){t[l][e]=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function textarea_input_handler(e,t,l){t[l][e]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function select_change_handler(e,t,l){t[l][e]=select_value(this),$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_input_handler_2(e,t,l){t[l][e]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const click_handler_6=e=>{try{custom_table_config.extra_options.splice(e,1),$$invalidate(5,custom_table_config.extra_options=[...custom_table_config.extra_options],custom_table_config)}catch{}};function input_change_handler_2(e){_extra_opts[e]=this.checked,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}const change_handler_1=(e,t)=>{var l;try{$$invalidate(8,_extra_opts_schema={..._extra_opts_schema,[e]:{..._extra_opts_schema[e],disabled:(l=_extra_opts_schema==null?void 0:_extra_opts_schema[e])==null?void 0:l.disabled}})}catch(a){console.log(a.message)}};function input_input_handler_3(e){_extra_opts[e]=this.value,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}function textarea_input_handler_1(e){_extra_opts[e]=this.value,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}function select_change_handler_1(e){_extra_opts[e]=select_value(this),$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}const click_handler_7=()=>{try{!_extra_opts.component||!_extra_opts.label||$$invalidate(5,custom_table_config.extra_options=[...custom_table_config.extra_options,Object.assign({},_extra_opts)],custom_table_config)}catch{}},dismiss_handler=e=>{$$invalidate(6,toast.open=!1,toast)};return $$self.$$set=e=>{"table"in e&&$$invalidate(0,table=e.table),"data"in e&&$$invalidate(19,data=e.data),"action"in e&&$$invalidate(20,action=e.action)},$$self.$$.update=()=>{$$self.$$.dirty[0]&1048576&&(action==null?void 0:action.name)=="save"&&save({})},[table,tab,limit,offset,order_by,custom_table_config,toast,_fields_schema,_extra_opts_schema,_extra_opts,fields,loading,$_global,$i18n,fk_tables,handle_pagination,get_eval,handleDrag,handleDrop,data,action,click_handler,click_handler_1,click_handler_2,input_change_handler,change_handler,input_input_handler,input_input_handler_1,pageChange_handler,click_handler_3,click_handler_4,input2_input_handler,input3_input_handler,click_handler_5,input5_change_handler,input_change_handler_1,textarea_input_handler,select_change_handler,input_input_handler_2,click_handler_6,input_change_handler_2,change_handler_1,input_input_handler_3,textarea_input_handler_1,select_change_handler_1,click_handler_7,dismiss_handler]}class TableCustomization extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{table:0,data:19,action:20},null,[-1,-1,-1])}}export{TableCustomization as default};
