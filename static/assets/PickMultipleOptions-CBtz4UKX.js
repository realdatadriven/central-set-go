import{S as ye,i as ze,s as Ie,I as Te,e as B,a as d,c as Ne,b as T,d as p,g as D,h,m as Se,j as ie,k as Y,o as X,p as De,q as x,r as Fe,u as F,v as Ae,w as ee,x as Ee,y as oe,z as He,A as Je,C as Re,D as re,J as ue,ag as ae,F as $,t as Me,n as qe}from"./index-XSy4RcHY.js";import"./pt-C8dmXWAd.js";import{P as Be}from"./Pagination-CGKBM0ax.js";function he(l,s,t){const e=l.slice();return e[21]=s[t],e[22]=s,e[23]=t,e}function _e(l,s,t){const e=l.slice();return e[24]=s[t],e}function ge(l,s,t){const e=l.slice();return e[24]=s[t],e}function me(l){var i,n;let s,t=B(((i=l[8])==null?void 0:i.columns)||Object.keys((n=l[0])==null?void 0:n[0])),e=[];for(let c=0;c<t.length;c+=1)e[c]=be(ge(l,t,c));return{c(){for(let c=0;c<e.length;c+=1)e[c].c();s=$()},m(c,r){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(c,r);D(c,s,r)},p(c,r){var o,b;if(r&257){t=B(((o=c[8])==null?void 0:o.columns)||Object.keys((b=c[0])==null?void 0:b[0]));let a;for(a=0;a<t.length;a+=1){const _=ge(c,t,a);e[a]?e[a].p(_,r):(e[a]=be(_),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(c){c&&F(s),ee(e,c)}}}function pe(l){let s,t=l[24]+"",e;return{c(){s=d("th"),e=Me(t)},m(i,n){D(i,s,n),h(s,e)},p(i,n){n&257&&t!==(t=i[24]+"")&&qe(e,t)},d(i){i&&F(s)}}}function be(l){let s=!["selected"].includes(l[24]),t,e=s&&pe(l);return{c(){e&&e.c(),t=$()},m(i,n){e&&e.m(i,n),D(i,t,n)},p(i,n){n&257&&(s=!["selected"].includes(i[24])),s?e?e.p(i,n):(e=pe(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&F(t),e&&e.d(i)}}}function ke(l){var i,n;let s,t=B(((i=l[8])==null?void 0:i.columns)||Object.keys((n=l[0])==null?void 0:n[0])),e=[];for(let c=0;c<t.length;c+=1)e[c]=Pe(_e(l,t,c));return{c(){for(let c=0;c<e.length;c+=1)e[c].c();s=$()},m(c,r){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(c,r);D(c,s,r)},p(c,r){var o,b;if(r&285){t=B(((o=c[8])==null?void 0:o.columns)||Object.keys((b=c[0])==null?void 0:b[0]));let a;for(a=0;a<t.length;a+=1){const _=_e(c,t,a);e[a]?e[a].p(_,r):(e[a]=Pe(_),e[a].c(),e[a].m(s.parentNode,s))}for(;a<e.length;a+=1)e[a].d(1);e.length=t.length}},d(c){c&&F(s),ee(e,c)}}}function de(l){var i;let s,t=((i=l[21])==null?void 0:i[l[24]])+"",e;return{c(){s=d("td"),e=Me(t)},m(n,c){D(n,s,c),h(s,e)},p(n,c){var r;c&285&&t!==(t=((r=n[21])==null?void 0:r[n[24]])+"")&&qe(e,t)},d(n){n&&F(s)}}}function Pe(l){let s=!["selected"].includes(l[24]),t,e=s&&de(l);return{c(){e&&e.c(),t=$()},m(i,n){e&&e.m(i,n),D(i,t,n)},p(i,n){n&257&&(s=!["selected"].includes(i[24])),s?e?e.p(i,n):(e=de(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&F(t),e&&e.d(i)}}}function we(l){var k,q;let s,t,e,i,n,c,r,o,b,a;function _(){l[16].call(n,l[22],l[23])}let g=(((k=l[8])==null?void 0:k.columns)||((q=l[0])==null?void 0:q[0]))&&ke(l);function S(){return l[18](l[21],l[22],l[23])}return{c(){s=d("tr"),t=d("td"),t.textContent=`${l[23]+1}`,e=T(),i=d("th"),n=d("input"),c=T(),g&&g.c(),r=T(),o=d("tr"),o.innerHTML="",p(t,"class","w-4"),p(n,"type","checkbox"),p(n,"class","checkbox checkbox-sm mt-0 p-0 checkbox-primary bg-transparent"),p(s,"class","hover cursor-pointer")},m(E,M){D(E,s,M),h(s,t),h(s,e),h(s,i),h(i,n),n.checked=l[21].selected,h(s,c),g&&g.m(s,null),h(s,r),D(E,o,M),b||(a=[Y(n,"change",_),Y(n,"change",l[17]),Y(s,"click",S)],b=!0)},p(E,M){var N,I;l=E,M&29&&(n.checked=l[21].selected),(N=l[8])!=null&&N.columns||(I=l[0])!=null&&I[0]?g?g.p(l,M):(g=ke(l),g.c(),g.m(s,r)):g&&(g.d(1),g=null)},d(E){E&&(F(s),F(o)),g&&g.d(),b=!1,Ee(a)}}}function Ce(l){var e,i;let s,t;return s=new Be({props:{lang:(e=l[5])==null?void 0:e.lang,conf:(i=l[5])==null?void 0:i.conf,rows_per_page:l[3],page:l[4],total_rows:l[0].length}}),s.$on("pageChange",l[19]),{c(){Ne(s.$$.fragment)},m(n,c){Se(s,n,c),t=!0},p(n,c){var o,b;const r={};c&32&&(r.lang=(o=n[5])==null?void 0:o.lang),c&32&&(r.conf=(b=n[5])==null?void 0:b.conf),c&8&&(r.rows_per_page=n[3]),c&16&&(r.page=n[4]),c&1&&(r.total_rows=n[0].length),s.$set(r)},i(n){t||(X(s.$$.fragment,n),t=!0)},o(n){x(s.$$.fragment,n),t=!1},d(n){Ae(s,n)}}}function Ge(l){var le,te;let s,t,e,i,n,c,r,o,b,a,_,g,S,k,q,E,M,N,I,J,Z,v,f,j,m,O,H;n=new Te({props:{type:"outline",icon:"search",path:"icons"}});let P=(((le=l[8])==null?void 0:le.columns)||((te=l[0])==null?void 0:te[0]))&&me(l),y=B((l[0]||[]).filter(l[15]).slice(l[4]*l[3],l[4]*l[3]+l[3])),w=[];for(let u=0;u<y.length;u+=1)w[u]=we(he(l,y,u));let C=l[1]==!1&&Ce(l);return{c(){var u,L,z,G,K,Q,U,V,W;s=d("div"),t=d("div"),e=d("button"),i=d("span"),Ne(n.$$.fragment),c=T(),r=d("input"),a=T(),_=d("div"),g=d("table"),S=d("thead"),k=d("tr"),q=d("th"),q.textContent="#",E=T(),M=d("th"),N=d("input"),Z=T(),P&&P.c(),v=T(),f=d("tbody");for(let R=0;R<w.length;R+=1)w[R].c();j=T(),C&&C.c(),p(i,"class","w-5 h-5"),p(e,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),p(r,"type","text"),p(r,"name",o=`${(u=l[8])==null?void 0:u.name}_filter`),p(r,"placeholder",b=`${l[6].t("crud.filter")}`),p(r,"class","grow input pl-8 input-bordered w-full input-sm"),p(r,"autocomplete","off"),p(r,"autocorrect","off"),p(t,"class","w-64 flex m-2"),p(q,"class","w-4"),p(N,"type","checkbox"),p(N,"class","checkbox checkbox-sm mt-0 p-0 checkbox-primary bg-transparent"),N.checked=I=((L=l[0])==null?void 0:L.length)===((G=(z=l[0])==null?void 0:z.filter(je))==null?void 0:G.length),N.indeterminate=J=((K=l[0])==null?void 0:K.length)!==((U=(Q=l[0])==null?void 0:Q.filter(Oe))==null?void 0:U.length)&&((W=(V=l[0])==null?void 0:V.filter(Le))==null?void 0:W.length)>0,p(g,"class","table table-zebra table-xs normal-case --table-pin-cols"),p(_,"class","overflow-x-auto"),p(s,"class","w-full")},m(u,L){D(u,s,L),h(s,t),h(t,e),h(e,i),Se(n,i,null),h(t,c),h(t,r),ie(r,l[2]),h(s,a),h(s,_),h(_,g),h(g,S),h(S,k),h(k,q),h(k,E),h(k,M),h(M,N),h(k,Z),P&&P.m(k,null),h(g,v),h(g,f);for(let z=0;z<w.length;z+=1)w[z]&&w[z].m(f,null);h(s,j),C&&C.m(s,null),m=!0,O||(H=[Y(r,"input",l[13]),Y(N,"change",l[14])],O=!0)},p(u,[L]){var z,G,K,Q,U,V,W,R,ne,se,fe;if((!m||L&256&&o!==(o=`${(z=u[8])==null?void 0:z.name}_filter`))&&p(r,"name",o),(!m||L&64&&b!==(b=`${u[6].t("crud.filter")}`))&&p(r,"placeholder",b),L&4&&r.value!==u[2]&&ie(r,u[2]),(!m||L&1&&I!==(I=((G=u[0])==null?void 0:G.length)===((Q=(K=u[0])==null?void 0:K.filter(je))==null?void 0:Q.length)))&&(N.checked=I),(!m||L&1&&J!==(J=((U=u[0])==null?void 0:U.length)!==((W=(V=u[0])==null?void 0:V.filter(Oe))==null?void 0:W.length)&&((ne=(R=u[0])==null?void 0:R.filter(Le))==null?void 0:ne.length)>0))&&(N.indeterminate=J),(se=u[8])!=null&&se.columns||(fe=u[0])!=null&&fe[0]?P?P.p(u,L):(P=me(u),P.c(),P.m(k,null)):P&&(P.d(1),P=null),L&285){y=B((u[0]||[]).filter(u[15]).slice(u[4]*u[3],u[4]*u[3]+u[3]));let A;for(A=0;A<y.length;A+=1){const ce=he(u,y,A);w[A]?w[A].p(ce,L):(w[A]=we(ce),w[A].c(),w[A].m(f,null))}for(;A<w.length;A+=1)w[A].d(1);w.length=y.length}u[1]==!1?C?(C.p(u,L),L&2&&X(C,1)):(C=Ce(u),C.c(),X(C,1),C.m(s,null)):C&&(De(),x(C,1,1,()=>{C=null}),Fe())},i(u){m||(X(n.$$.fragment,u),X(C),m=!0)},o(u){x(n.$$.fragment,u),x(C),m=!1},d(u){u&&F(s),Ae(n),P&&P.d(),ee(w,u),C&&C.d(),O=!1,Ee(H)}}}const je=l=>l==null?void 0:l.selected,Oe=l=>l==null?void 0:l.selected,Le=l=>l==null?void 0:l.selected;function Ke(l,s,t){let e,i;oe(l,He,f=>t(5,e=f)),oe(l,Je,f=>t(6,i=f));let{data:n=[]}=s,{value:c=null}=s,{selecetd_value:r=[]}=s,{action:o={}}=s,{disabledPagnation:b=!1}=s,{rowsPerPage:a=10}=s,_;const g=f=>{var m;const j=(m=n==null?void 0:n.filter(O=>O==null?void 0:O.selected))==null?void 0:m.map(O=>O==null?void 0:O[c]);f==null||f.action(j)};Re(async()=>{i.changeLanguage(e==null?void 0:e.lang);try{re.locale(e==null?void 0:e.lang)}catch{re.locale("en-us")}console.log(r),t(0,n=n==null?void 0:n.map(f=>(f.selected=!1,r!=null&&r.includes(f==null?void 0:f[c])&&(f.selected=!0),f)))});let S=a,k=0;const q=f=>{f.type==="next"?t(4,k+=1):f.type==="back"?t(4,k-=1):f.type==="first"?t(4,k=0):f.type==="last"?t(4,k=Math.ceil(S/((n==null?void 0:n.length)||S))):f.type==="rows_per_page"&&(t(3,S=f.rows_per_page),t(4,k=0))};function E(){_=this.value,t(2,_)}const M=f=>{t(0,n=n.map(j=>{var m;return{...j,selected:(m=f==null?void 0:f.target)==null?void 0:m.checked}}))},N=f=>{let j=!0;if(_){if(!((_==null?void 0:_.length)<3)){j=!1;let m=_;const O=m.split(":");let H=null;O.length>1&&(H=O[0],m=O[1],console.log({_field:H,_filter:m}));try{const P=new RegExp(m,"i");if(H)((f==null?void 0:f[H])||"").toString().match(P)&&(j=!0);else for(let y=0;y<Object.keys(f).length;y++){const w=Object.keys(f)[y];if(f[w]){if(f[w].toString().length<3)continue}else continue;if(f[w].toString().match(P)){j=!0;break}}}catch(P){console.log(P.message)}}}return j};function I(f,j){f[j].selected=this.checked,t(0,n),t(11,o),t(2,_),t(4,k),t(3,S)}const J=f=>{t(0,n=[...n])},Z=(f,j,m)=>{t(0,j[m].selected=!f.selected,n,t(2,_),t(4,k),t(3,S)),t(0,n=[...n])},v=f=>q(f.detail);return l.$$set=f=>{t(8,s=ue(ue({},s),ae(f))),"data"in f&&t(0,n=f.data),"value"in f&&t(9,c=f.value),"selecetd_value"in f&&t(10,r=f.selecetd_value),"action"in f&&t(11,o=f.action),"disabledPagnation"in f&&t(1,b=f.disabledPagnation),"rowsPerPage"in f&&t(12,a=f.rowsPerPage)},l.$$.update=()=>{l.$$.dirty&2049&&((o==null?void 0:o.name)=="CANCEL"&&(o==null||o.action()),(o==null?void 0:o.name)=="CLEAN"&&t(0,n=n==null?void 0:n.map(f=>({...f,selected:!1}))),(o==null?void 0:o.name)=="ALL"&&t(0,n=n==null?void 0:n.map(f=>({...f,selected:!0}))),(o==null?void 0:o.name)=="SET"&&g(o))},s=ae(s),[n,b,_,S,k,e,i,q,s,c,r,o,a,E,M,N,I,J,Z,v]}class We extends ye{constructor(s){super(),ze(this,s,Ke,Ge,Ie,{data:0,value:9,selecetd_value:10,action:11,disabledPagnation:1,rowsPerPage:12})}}export{We as default};
