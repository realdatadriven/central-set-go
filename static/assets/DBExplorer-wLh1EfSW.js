const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Export-CfREU7LV.js","./index-BpRaDDNn.js","./index-uB0_zdoO.css","./pt-WpTh3RxT.js"])))=>i.map(i=>d[i]);
import{S as Pl,i as Wl,s as Jl,I as Re,e as ue,a as w,b as F,c as he,t as Ne,F as Jt,d as c,f as ve,a1 as zl,g as M,h as m,m as ae,j as Ee,a2 as el,k as H,E as Fl,p as rt,q as R,r as ht,o as S,n as He,u as z,v as oe,w as mt,x as Rt,y as ll,z as Kl,A as Ql,a5 as sl,C as Vl,D as Bt,l as Wt,G as et,H as tt,V as Be,N as Xl,T as Gl,J as Yl,M as Zl,K as $l,L as ql,X as yl,a6 as nl,Q as es,a7 as ts,O as ls,a0 as pl,P as ss,Y as rl}from"./index-BpRaDDNn.js";import"./pt-WpTh3RxT.js";import{P as Hl}from"./Pagination-Bvi2KDzm.js";function hl(t,s,l){const n=t.slice();return n[108]=s[l],n[116]=s,n[110]=l,n}function al(t,s,l){const n=t.slice();return n[111]=s[l],n[117]=s,n[113]=l,n}function ol(t,s,l){const n=t.slice();return n[118]=s[l],n}function il(t,s,l){const n=t.slice();return n[111]=s[l],n[115]=l,n}function cl(t,s,l){const n=t.slice();return n[108]=s[l],n[110]=l,n}function fl(t,s,l){const n=t.slice();return n[111]=s[l],n[113]=l,n}function ul(t,s,l){const n=t.slice();return n[111]=s[l],n[115]=l,n}function bl(t,s,l){const n=t.slice();return n[122]=s[l],n[123]=s,n[124]=l,n}function _l(t,s,l){const n=t.slice();return n[125]=s[l],n}function ml(t,s,l){const n=t.slice();return n[128]=s[l],n[124]=l,n}function dl(t,s,l){const n=t.slice();return n[130]=s[l],n[124]=l,n}function gl(t,s,l){const n=t.slice();return n[128]=s[l],n[124]=l,n}function ns(t){var Z;let s,l,n,o,p,h,u,i,d,b,v,k,x;o=new Re({props:{type:"outline",icon:"chevron-left",path:"icons"}});let O=ue((Z=t[8])==null?void 0:Z.tables),e=[];for(let L=0;L<O.length;L+=1)e[L]=xl(gl(t,O,L));return b=new Re({props:{type:"outline",icon:"chevron-right",path:"icons"}}),{c(){var L,q,B,ne;s=w("div"),l=w("div"),n=w("span"),he(o.$$.fragment),p=F(),h=w("div");for(let N=0;N<e.length;N+=1)e[N].c();u=F(),i=w("div"),d=w("span"),he(b.$$.fragment),c(n,"class","h-5 w-full"),c(l,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),ve(l,"display",((q=(L=t[8])==null?void 0:L.tables)==null?void 0:q.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(h,"id",t[19]+"-selected"),c(h,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(d,"class","h-5 w-full"),c(i,"class","w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),ve(i,"display",((ne=(B=t[8])==null?void 0:B.tables)==null?void 0:ne.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(s,"class","w-full border-r-slate-200 flex flex-row")},m(L,q){M(L,s,q),m(s,l),m(l,n),ae(o,n,null),m(s,p),m(s,h);for(let B=0;B<e.length;B+=1)e[B]&&e[B].m(h,null);m(s,u),m(s,i),m(i,d),ae(b,d,null),v=!0,k||(x=[H(l,"click",t[29]),H(i,"click",t[28])],k=!0)},p(L,q){var B,ne,N,G,W;if(q[0]&256&&ve(l,"display",((ne=(B=L[8])==null?void 0:B.tables)==null?void 0:ne.length)>0&&L[25](`${L[19]}-selected`,"width",L[8])?null:"none"),q[0]&524608|q[1]&2){O=ue((N=L[8])==null?void 0:N.tables);let T;for(T=0;T<O.length;T+=1){const Q=gl(L,O,T);e[T]?e[T].p(Q,q):(e[T]=xl(Q),e[T].c(),e[T].m(h,null))}for(;T<e.length;T+=1)e[T].d(1);e.length=O.length}q[0]&256&&ve(i,"display",((W=(G=L[8])==null?void 0:G.tables)==null?void 0:W.length)>0&&L[25](`${L[19]}-selected`,"width",L[8])?null:"none")},i(L){v||(S(o.$$.fragment,L),S(b.$$.fragment,L),v=!0)},o(L){R(o.$$.fragment,L),R(b.$$.fragment,L),v=!1},d(L){L&&z(s),oe(o),mt(e,L),oe(b),k=!1,Rt(x)}}}function ps(t){let s,l=`${t[17].t("crud.drag")} ${t[17].t("crud.table")} ${t[17].t("crud.here")}!`,n;return{c(){s=w("div"),n=Ne(l),c(s,"class","border-dashed border-2 border-r-slate-400 text-center p-1 m-1 hover:border-none")},m(o,p){M(o,s,p),m(s,n)},p(o,p){p[0]&131072&&l!==(l=`${o[17].t("crud.drag")} ${o[17].t("crud.table")} ${o[17].t("crud.here")}!`)&&He(n,l)},i:Be,o:Be,d(o){o&&z(s)}}}function xl(t){let s,l=et(t[128],20)+"",n,o,p,h,u,i,d;function b(){return t[52](t[128])}function v(...k){return t[53](t[128],...k)}return{c(){var k;s=w("div"),n=Ne(l),o=F(),c(s,"id",p=t[19]+"-selected-"+t[128]),c(s,"title",h=tt(t[128],20)),c(s,"class",u="mr-1 p-1 rounded-md border-dotted border-2 "+(((k=t[8])==null?void 0:k.selecetd_table)===t[128]?"bg-base-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-base-200"),c(s,"draggable",!0)},m(k,x){M(k,s,x),m(s,n),m(s,o),i||(d=[H(s,"click",b),H(s,"dragstart",v)],i=!0)},p(k,x){var O;t=k,x[0]&256&&l!==(l=et(t[128],20)+"")&&He(n,l),x[0]&262400&&p!==(p=t[19]+"-selected-"+t[128])&&c(s,"id",p),x[0]&262400&&h!==(h=tt(t[128],20))&&c(s,"title",h),x[0]&262400&&u!==(u="mr-1 p-1 rounded-md border-dotted border-2 "+(((O=t[8])==null?void 0:O.selecetd_table)===t[128]?"bg-base-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-base-200")&&c(s,"class",u)},d(k){k&&z(s),i=!1,Rt(d)}}}function wl(t){let s,l,n,o,p,h,u,i,d,b;return o=new Re({props:{type:"outline",icon:"search",path:"icons"}}),{c(){s=w("div"),l=w("button"),n=w("span"),he(o.$$.fragment),p=F(),h=w("input"),c(n,"class","w-5 h-5"),c(l,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(h,"type","text"),c(h,"placeholder",u=`${t[17].t("crud.filter")} ${t[17].t("crud.field")}`),c(h,"class","grow input pl-8 input-bordered w-full input-sm"),c(h,"autocomplete","off"),c(h,"autocorrect","off"),c(s,"class","w-full flex border-b border-b-slate-200 p-1")},m(v,k){M(v,s,k),m(s,l),m(l,n),ae(o,n,null),m(s,p),m(s,h),Ee(h,t[12]),i=!0,d||(b=H(h,"input",t[56]),d=!0)},p(v,k){(!i||k[0]&131072&&u!==(u=`${v[17].t("crud.filter")} ${v[17].t("crud.field")}`))&&c(h,"placeholder",u),k[0]&4096&&h.value!==v[12]&&Ee(h,v[12])},i(v){i||(S(o.$$.fragment,v),i=!0)},o(v){R(o.$$.fragment,v),i=!1},d(v){v&&z(s),oe(o),d=!1,b()}}}function kl(t){let s,l,n,o,p;return{c(){var h;s=w("div"),l=Ne("*"),c(s,"id",n=t[19]+"-"+((h=t[8])==null?void 0:h.selecetd_table)+"-*"),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(h,u){M(h,s,u),m(s,l),o||(p=H(s,"dragstart",t[57]),o=!0)},p(h,u){var i;u[0]&262400&&n!==(n=h[19]+"-"+((i=h[8])==null?void 0:i.selecetd_table)+"-*")&&c(s,"id",n)},d(h){h&&z(s),o=!1,p()}}}function vl(t){let s,l=et(t[130],20)+"",n,o,p,h,u,i;function d(...b){return t[59](t[130],...b)}return{c(){var b;s=w("div"),n=Ne(l),o=F(),c(s,"id",p=t[19]+"-"+((b=t[8])==null?void 0:b.selecetd_table)+"-"+t[130]),c(s,"title",h=tt(t[130],20)),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(b,v){M(b,s,v),m(s,n),m(s,o),u||(i=H(s,"dragstart",d),u=!0)},p(b,v){var k;t=b,v[0]&4416&&l!==(l=et(t[130],20)+"")&&He(n,l),v[0]&266560&&p!==(p=t[19]+"-"+((k=t[8])==null?void 0:k.selecetd_table)+"-"+t[130])&&c(s,"id",p),v[0]&266560&&h!==(h=tt(t[130],20))&&c(s,"title",h)},d(b){b&&z(s),u=!1,i()}}}function El(t){let s,l=et(t[128],20)+"",n,o,p,h,u,i;function d(...b){return t[61](t[128],...b)}return{c(){s=w("div"),n=Ne(l),o=F(),c(s,"id",p=t[128]),c(s,"title",h=tt(t[128],20)),c(s,"class","mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-base-200"),c(s,"draggable",!0)},m(b,v){M(b,s,v),m(s,n),m(s,o),u||(i=H(s,"dragstart",d),u=!0)},p(b,v){t=b,v[0]&2240&&l!==(l=et(t[128],20)+"")&&He(n,l),v[0]&264384&&p!==(p=t[128])&&c(s,"id",p),v[0]&264384&&h!==(h=tt(t[128],20))&&c(s,"title",h)},d(b){b&&z(s),u=!1,i()}}}function Nl(t){let s,l=t[125]+"",n,o;return{c(){s=w("option"),n=Ne(l),s.__value=o=t[125],Ee(s,s.__value)},m(p,h){M(p,s,h),m(s,n)},p(p,h){h[0]&32768&&l!==(l=p[125]+"")&&He(n,l),h[0]&32768&&o!==(o=p[125])&&(s.__value=o,Ee(s,s.__value))},d(p){p&&z(s)}}}function Tl(t){let s,l,n,o,p,h;return n=new Re({props:{type:"outline",icon:"arrow-uturn-left",path:"icons"}}),{c(){s=w("button"),l=w("span"),he(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(u,i){M(u,s,i),m(s,l),ae(n,l,null),o=!0,p||(h=H(s,"click",t[67]),p=!0)},p:Be,i(u){o||(S(n.$$.fragment,u),o=!0)},o(u){R(n.$$.fragment,u),o=!1},d(u){u&&z(s),oe(n),p=!1,h()}}}function Ol(t){let s,l,n,o,p,h;return n=new Re({props:{type:"outline",icon:"save",path:"icons"}}),{c(){s=w("button"),l=w("span"),he(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(u,i){M(u,s,i),m(s,l),ae(n,l,null),o=!0,p||(h=H(s,"click",t[68]),p=!0)},p:Be,i(u){o||(S(n.$$.fragment,u),o=!0)},o(u){R(n.$$.fragment,u),o=!1},d(u){u&&z(s),oe(n),p=!1,h()}}}function rs(t){var n,o,p;let s=et(((p=(o=(n=t[8])==null?void 0:n.tabs)==null?void 0:o[t[122]])==null?void 0:p.label)||t[122],20)+"",l;return{c(){l=Ne(s)},m(h,u){M(h,l,u)},p(h,u){var i,d,b;u[0]&256&&s!==(s=et(((b=(d=(i=h[8])==null?void 0:i.tabs)==null?void 0:d[h[122]])==null?void 0:b.label)||h[122],20)+"")&&He(l,s)},d(h){h&&z(l)}}}function hs(t){let s,l,n;function o(){t[69].call(s,t[122])}return{c(){s=w("input"),c(s,"type","text"),c(s,"class","input input-xs p-0 w-auto")},m(p,h){M(p,s,h),Ee(s,t[8].tabs[t[122]].label),l||(n=H(s,"input",o),l=!0)},p(p,h){t=p,h[0]&262400&&s.value!==t[8].tabs[t[122]].label&&Ee(s,t[8].tabs[t[122]].label)},d(p){p&&z(s),l=!1,n()}}}function as(t){let s,l,n,o,p;l=new Re({props:{type:"outline",icon:"x-mark",path:"icons"}});function h(){return t[70](t[122])}return{c(){s=w("span"),he(l.$$.fragment),c(s,"class","ml-2 w-4 font-bold cursor-pointer -mr-2")},m(u,i){M(u,s,i),ae(l,s,null),n=!0,o||(p=H(s,"click",h),o=!0)},p(u,i){t=u},i(u){n||(S(l.$$.fragment,u),n=!0)},o(u){R(l.$$.fragment,u),n=!1},d(u){u&&z(s),oe(l),o=!1,p()}}}function Ll(t){let s,l,n,o,p,h,u,i,d,b;function v(Z,L){var q,B,ne;return(ne=(B=(q=Z[8])==null?void 0:q.tabs)==null?void 0:B[Z[122]])!=null&&ne.edit?hs:rs}let k=v(t),x=k(t),O=t[124]>0&&as(t);function e(){return t[71](t[122])}return{c(){s=w("a"),l=w("div"),n=w("b"),x.c(),p=F(),O&&O.c(),u=F(),c(n,"title",o=tt(t[122],20)),c(l,"class","flex-grow"),c(s,"role","tab"),c(s,"class",h="tab flex flex-row text-md "+(t[8].selected_tab===t[122]?"tab-active active":""))},m(Z,L){M(Z,s,L),m(s,l),m(l,n),x.m(n,null),m(s,p),O&&O.m(s,null),M(Z,u,L),i=!0,d||(b=[H(s,"click",Fl(e)),H(s,"dblclick",t[41])],d=!0)},p(Z,L){t=Z,k===(k=v(t))&&x?x.p(t,L):(x.d(1),x=k(t),x&&(x.c(),x.m(n,null))),(!i||L[0]&262400&&o!==(o=tt(t[122],20)))&&c(n,"title",o),t[124]>0&&O.p(t,L),(!i||L[0]&262400&&h!==(h="tab flex flex-row text-md "+(t[8].selected_tab===t[122]?"tab-active active":"")))&&c(s,"class",h)},i(Z){i||(S(O),i=!0)},o(Z){R(O),i=!1},d(Z){Z&&(z(s),z(u)),x.d(),O&&O.d(),d=!1,Rt(b)}}}function os(t){let s,l,n=`${t[17].t("crud.drag")} ${t[17].t("crud.field")}s ${t[17].t("crud.here")}!`,o;return{c(){s=w("div"),l=w("p"),o=Ne(n),c(s,"class","border-dashed h-64 border-2 border-r-slate-400 text-center align-middle p-1 m-1 hover:border-4"),ve(s,"vertical-align","middle")},m(p,h){M(p,s,h),m(s,l),m(l,o)},p(p,h){h[0]&131072&&n!==(n=`${p[17].t("crud.drag")} ${p[17].t("crud.field")}s ${p[17].t("crud.here")}!`)&&He(o,n)},i:Be,o:Be,d(p){p&&z(s)}}}function is(t){var dt,ft,D,P,ie,Ze,ce,ut,Oe,Ot,st,bt,_t,gt;let s,l,n,o,p,h,u,i,d,b,v,k,x,O,e,Z,L,q,B,ne,N,G,W,T,Q,y,J,Pe,we,Ge,ke=t[17].t("crud.use")+"",A,K,te,Te,Ke,Ue,We,Me,Qe,le,Ve,X,pe,be,pt,at;const lt=[us,fs],Ye=[];function Je(I,ee){var _e,me,de,ge;return(ge=(de=(_e=I[8])==null?void 0:_e.tabs)==null?void 0:de[(me=I[8])==null?void 0:me.selected_tab])!=null&&ge.show?0:1}return l=Je(t),n=Ye[l]=lt[l](t),b=new Re({props:{type:"outline",icon:"search",path:"icons"}}),q=new Re({props:{type:"outline",icon:"play",path:"icons"}}),T=new Re({props:{type:"outline",icon:"code",path:"icons"}}),Qe=new Re({props:{type:"outline",icon:"save",path:"icons"}}),pe=new Hl({props:{lang:(dt=t[16])==null?void 0:dt.lang,conf:(ft=t[16])==null?void 0:ft.conf,rows_per_page:((Ze=(ie=(D=t[8])==null?void 0:D.tabs)==null?void 0:ie[(P=t[8])==null?void 0:P.selected_tab])==null?void 0:Ze.limit)||10,page:((Ot=(Oe=(ce=t[8])==null?void 0:ce.tabs)==null?void 0:Oe[(ut=t[8])==null?void 0:ut.selected_tab])==null?void 0:Ot.offset)||0,total_rows:(((gt=(_t=(st=t[8])==null?void 0:st.tabs)==null?void 0:_t[(bt=t[8])==null?void 0:bt.selected_tab])==null?void 0:gt.fields)||[]).length}}),pe.$on("pageChange",t[93]),{c(){var I,ee,_e,me;s=w("div"),n.c(),o=F(),p=w("div"),h=w("div"),u=w("div"),i=w("button"),d=w("span"),he(b.$$.fragment),v=F(),k=w("input"),O=F(),e=w("div"),Z=w("button"),L=w("span"),he(q.$$.fragment),ne=F(),N=w("div"),G=w("button"),W=w("span"),he(T.$$.fragment),y=F(),J=w("div"),Pe=w("label"),we=w("span"),Ge=w("b"),A=Ne(ke),K=Ne(":"),te=F(),Te=w("input"),Ke=F(),Ue=w("div"),We=w("button"),Me=w("span"),he(Qe.$$.fragment),Ve=F(),X=w("div"),he(pe.$$.fragment),c(s,"class","w-full overflow-x-auto text-center"),c(d,"class","w-5 h-5"),c(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(k,"type","text"),c(k,"placeholder",x=`${t[17].t("crud.filter")} ${t[17].t("crud.query")} ${t[17].t("crud.field")}`),c(k,"class","grow input pl-8 input-bordered w-full input-sm"),c(k,"autocomplete","off"),c(k,"autocorrect","off"),c(u,"class","grow flex max-w-xs mr-2"),c(L,"class","w-6"),c(Z,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(e,"class","tooltip tooltip-right"),c(e,"data-tip",B=t[17].t("crud.execute")),c(W,"class","w-6"),c(G,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(N,"class","tooltip tooltip-right"),c(N,"data-tip",Q=t[17].t("crud.code")),c(we,"class","label-text"),c(Te,"type","checkbox"),c(Te,"class","toggle toggle-sm ml-2"),c(Pe,"class","label cursor-pointer justify-start"),c(J,"class","form-control mr-2"),c(Me,"class","w-6"),c(We,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(Ue,"class","tooltip tooltip-right"),c(Ue,"data-tip",le=t[17].t("crud.save")),c(h,"class","flex-grow flex flex-row align-middle p-2"),ve(h,"display",(((me=(_e=(I=t[8])==null?void 0:I.tabs)==null?void 0:_e[(ee=t[8])==null?void 0:ee.selected_tab])==null?void 0:me.fields)||[]).length>0?null:"none"),c(p,"class","w-full overflow-hidden flex flex-row")},m(I,ee){var _e,me;M(I,s,ee),Ye[l].m(s,null),M(I,o,ee),M(I,p,ee),m(p,h),m(h,u),m(u,i),m(i,d),ae(b,d,null),m(u,v),m(u,k),Ee(k,t[8].tabs[(_e=t[8])==null?void 0:_e.selected_tab].field_filter),m(h,O),m(h,e),m(e,Z),m(Z,L),ae(q,L,null),m(h,ne),m(h,N),m(N,G),m(G,W),ae(T,W,null),m(h,y),m(h,J),m(J,Pe),m(Pe,we),m(we,Ge),m(Ge,A),m(Ge,K),m(Pe,te),m(Pe,Te),Te.checked=t[8].tabs[(me=t[8])==null?void 0:me.selected_tab].use,m(h,Ke),m(h,Ue),m(Ue,We),m(We,Me),ae(Qe,Me,null),m(p,Ve),m(p,X),ae(pe,X,null),be=!0,pt||(at=[H(k,"input",t[88]),H(Z,"click",t[89]),H(G,"click",t[90]),H(Te,"change",t[91]),H(We,"click",t[92])],pt=!0)},p(I,ee){var de,ge,Lt,xt,wt,ot,it,ct,$e,kt,Dt,St,qe,It,U,re,vt,Le,Et,De,Nt;let _e=l;l=Je(I),l===_e?Ye[l].p(I,ee):(rt(),R(Ye[_e],1,1,()=>{Ye[_e]=null}),ht(),n=Ye[l],n?n.p(I,ee):(n=Ye[l]=lt[l](I),n.c()),S(n,1),n.m(s,null)),(!be||ee[0]&131072&&x!==(x=`${I[17].t("crud.filter")} ${I[17].t("crud.query")} ${I[17].t("crud.field")}`))&&c(k,"placeholder",x),ee[0]&262400&&k.value!==I[8].tabs[(de=I[8])==null?void 0:de.selected_tab].field_filter&&Ee(k,I[8].tabs[(ge=I[8])==null?void 0:ge.selected_tab].field_filter),(!be||ee[0]&131072&&B!==(B=I[17].t("crud.execute")))&&c(e,"data-tip",B),(!be||ee[0]&131072&&Q!==(Q=I[17].t("crud.code")))&&c(N,"data-tip",Q),(!be||ee[0]&131072)&&ke!==(ke=I[17].t("crud.use")+"")&&He(A,ke),ee[0]&262400&&(Te.checked=I[8].tabs[(Lt=I[8])==null?void 0:Lt.selected_tab].use),(!be||ee[0]&131072&&le!==(le=I[17].t("crud.save")))&&c(Ue,"data-tip",le),ee[0]&256&&ve(h,"display",(((it=(ot=(xt=I[8])==null?void 0:xt.tabs)==null?void 0:ot[(wt=I[8])==null?void 0:wt.selected_tab])==null?void 0:it.fields)||[]).length>0?null:"none");const me={};ee[0]&65536&&(me.lang=(ct=I[16])==null?void 0:ct.lang),ee[0]&65536&&(me.conf=($e=I[16])==null?void 0:$e.conf),ee[0]&256&&(me.rows_per_page=((qe=(St=(kt=I[8])==null?void 0:kt.tabs)==null?void 0:St[(Dt=I[8])==null?void 0:Dt.selected_tab])==null?void 0:qe.limit)||10),ee[0]&256&&(me.page=((vt=(re=(It=I[8])==null?void 0:It.tabs)==null?void 0:re[(U=I[8])==null?void 0:U.selected_tab])==null?void 0:vt.offset)||0),ee[0]&256&&(me.total_rows=(((Nt=(De=(Le=I[8])==null?void 0:Le.tabs)==null?void 0:De[(Et=I[8])==null?void 0:Et.selected_tab])==null?void 0:Nt.fields)||[]).length),pe.$set(me)},i(I){be||(S(n),S(b.$$.fragment,I),S(q.$$.fragment,I),S(T.$$.fragment,I),S(Qe.$$.fragment,I),S(pe.$$.fragment,I),be=!0)},o(I){R(n),R(b.$$.fragment,I),R(q.$$.fragment,I),R(T.$$.fragment,I),R(Qe.$$.fragment,I),R(pe.$$.fragment,I),be=!1},d(I){I&&(z(s),z(o),z(p)),Ye[l].d(),oe(b),oe(q),oe(T),oe(Qe),oe(pe),pt=!1,Rt(at)}}}function cs(t){let s,l,n,o;const p=[Ls,Os],h=[];function u(i,d){var b,v;return((b=i[14])==null?void 0:b.success)===!0?0:(v=i[14])!=null&&v.msg?1:-1}return~(s=u(t))&&(l=h[s]=p[s](t)),{c(){l&&l.c(),n=Jt()},m(i,d){~s&&h[s].m(i,d),M(i,n,d),o=!0},p(i,d){let b=s;s=u(i),s===b?~s&&h[s].p(i,d):(l&&(rt(),R(h[b],1,1,()=>{h[b]=null}),ht()),~s?(l=h[s],l?l.p(i,d):(l=h[s]=p[s](i),l.c()),S(l,1),l.m(n.parentNode,n)):l=null)},i(i){o||(S(l),o=!0)},o(i){R(l),o=!1},d(i){i&&z(n),~s&&h[s].d(i)}}}function fs(t){var we,Ge,ke,A,K,te,Te,Ke,Ue,We,Me,Qe,le,Ve,X,pe,be,pt,at,lt,Ye,Je,dt,ft;let s,l,n,o,p,h,u,i,d,b,v,k,x,O,e,Z,L,q,B,ne,N,G,W,T=ue(t[18]||[]),Q=[];for(let D=0;D<T.length;D+=1)Q[D]=Dl(il(t,T,D));let y=ue((((A=(ke=(we=t[8])==null?void 0:we.tabs)==null?void 0:ke[(Ge=t[8])==null?void 0:Ge.selected_tab])==null?void 0:A.fields)||[]).filter(t[77]).slice((((Ke=(Te=(K=t[8])==null?void 0:K.tabs)==null?void 0:Te[(te=t[8])==null?void 0:te.selected_tab])==null?void 0:Ke.offset)||0)*(((Qe=(Me=(Ue=t[8])==null?void 0:Ue.tabs)==null?void 0:Me[(We=t[8])==null?void 0:We.selected_tab])==null?void 0:Qe.limit)||10),(((pe=(X=(le=t[8])==null?void 0:le.tabs)==null?void 0:X[(Ve=t[8])==null?void 0:Ve.selected_tab])==null?void 0:pe.offset)||0)*(((lt=(at=(be=t[8])==null?void 0:be.tabs)==null?void 0:at[(pt=t[8])==null?void 0:pt.selected_tab])==null?void 0:lt.limit)||10)+(((ft=(dt=(Ye=t[8])==null?void 0:Ye.tabs)==null?void 0:dt[(Je=t[8])==null?void 0:Je.selected_tab])==null?void 0:ft.limit)||10))),J=[];for(let D=0;D<y.length;D+=1)J[D]=jl(hl(t,y,D));const Pe=D=>R(J[D],1,1,()=>{J[D]=null});return B=new Re({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){var D;s=w("table"),l=w("thead"),n=w("tr");for(let P=0;P<Q.length;P+=1)Q[P].c();o=F(),p=w("tbody");for(let P=0;P<J.length;P+=1)J[P].c();h=F(),u=w("tr"),i=w("td"),d=w("input"),v=F(),k=w("td"),x=w("input"),e=F(),Z=w("td"),L=w("button"),q=w("span"),he(B.$$.fragment),c(d,"type","text"),c(d,"class","input input-sm p-0 w-full bg-transparent"),c(d,"placeholder",b=t[17].t("crud.formula")),c(i,"class","p-0.5"),c(i,"colspan",((D=t[18]||[])==null?void 0:D.length)-3),c(x,"type","text"),c(x,"class","input input-sm p-0 w-full bg-transparent"),c(x,"placeholder",O=t[17].t("crud.label")),c(k,"class","p-0.5 w-32"),c(k,"colspan",2),c(q,"class","w-5"),c(L,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(Z,"class","p-0.5 w-8 text-right"),c(Z,"title",ne=t[17].t("crud.add")),c(s,"class","table table-zebra w-[98%] normal-case table-xs")},m(D,P){var ie,Ze;M(D,s,P),m(s,l),m(l,n);for(let ce=0;ce<Q.length;ce+=1)Q[ce]&&Q[ce].m(n,null);m(s,o),m(s,p);for(let ce=0;ce<J.length;ce+=1)J[ce]&&J[ce].m(p,null);m(p,h),m(p,u),m(u,i),m(i,d),Ee(d,t[8].tabs[(ie=t[8])==null?void 0:ie.selected_tab].formula),m(u,v),m(u,k),m(k,x),Ee(x,t[8].tabs[(Ze=t[8])==null?void 0:Ze.selected_tab].formula_label),m(u,e),m(u,Z),m(Z,L),m(L,q),ae(B,q,null),N=!0,G||(W=[H(d,"input",t[85]),H(x,"input",t[86]),H(L,"click",t[87])],G=!0)},p(D,P){var ie,Ze,ce,ut,Oe,Ot,st,bt,_t,gt,I,ee,_e,me,de,ge,Lt,xt,wt,ot,it,ct,$e,kt,Dt,St,qe,It;if(P[0]&393216){T=ue(D[18]||[]);let U;for(U=0;U<T.length;U+=1){const re=il(D,T,U);Q[U]?Q[U].p(re,P):(Q[U]=Dl(re),Q[U].c(),Q[U].m(n,null))}for(;U<Q.length;U+=1)Q[U].d(1);Q.length=T.length}if(P[0]&393536|P[1]&6400){y=ue((((ut=(ce=(ie=D[8])==null?void 0:ie.tabs)==null?void 0:ce[(Ze=D[8])==null?void 0:Ze.selected_tab])==null?void 0:ut.fields)||[]).filter(D[77]).slice((((bt=(st=(Oe=D[8])==null?void 0:Oe.tabs)==null?void 0:st[(Ot=D[8])==null?void 0:Ot.selected_tab])==null?void 0:bt.offset)||0)*(((ee=(I=(_t=D[8])==null?void 0:_t.tabs)==null?void 0:I[(gt=D[8])==null?void 0:gt.selected_tab])==null?void 0:ee.limit)||10),(((ge=(de=(_e=D[8])==null?void 0:_e.tabs)==null?void 0:de[(me=D[8])==null?void 0:me.selected_tab])==null?void 0:ge.offset)||0)*(((ot=(wt=(Lt=D[8])==null?void 0:Lt.tabs)==null?void 0:wt[(xt=D[8])==null?void 0:xt.selected_tab])==null?void 0:ot.limit)||10)+(((kt=($e=(it=D[8])==null?void 0:it.tabs)==null?void 0:$e[(ct=D[8])==null?void 0:ct.selected_tab])==null?void 0:kt.limit)||10)));let U;for(U=0;U<y.length;U+=1){const re=hl(D,y,U);J[U]?(J[U].p(re,P),S(J[U],1)):(J[U]=jl(re),J[U].c(),S(J[U],1),J[U].m(p,h))}for(rt(),U=y.length;U<J.length;U+=1)Pe(U);ht()}(!N||P[0]&131072&&b!==(b=D[17].t("crud.formula")))&&c(d,"placeholder",b),P[0]&262400&&d.value!==D[8].tabs[(Dt=D[8])==null?void 0:Dt.selected_tab].formula&&Ee(d,D[8].tabs[(St=D[8])==null?void 0:St.selected_tab].formula),(!N||P[0]&131072&&O!==(O=D[17].t("crud.label")))&&c(x,"placeholder",O),P[0]&262400&&x.value!==D[8].tabs[(qe=D[8])==null?void 0:qe.selected_tab].formula_label&&Ee(x,D[8].tabs[(It=D[8])==null?void 0:It.selected_tab].formula_label),(!N||P[0]&131072&&ne!==(ne=D[17].t("crud.add")))&&c(Z,"title",ne)},i(D){if(!N){for(let P=0;P<y.length;P+=1)S(J[P]);S(B.$$.fragment,D),N=!0}},o(D){J=J.filter(Boolean);for(let P=0;P<J.length;P+=1)R(J[P]);R(B.$$.fragment,D),N=!1},d(D){D&&z(s),mt(Q,D),mt(J,D),oe(B),G=!1,Rt(W)}}}function us(t){let s,l,n;return{c(){s=w("textarea"),c(s,"class","textarea textarea-bordered h-100 w-full textarea-xs --min-h-max"),c(s,"autocomplete","off"),c(s,"autocorrect","off"),c(s,"rows",10)},m(o,p){M(o,s,p),Ee(s,t[8].tabs[t[8].selected_tab].sql),l||(n=H(s,"input",t[76]),l=!0)},p(o,p){p[0]&262400&&Ee(s,o[8].tabs[o[8].selected_tab].sql)},i:Be,o:Be,d(o){o&&z(s),l=!1,n()}}}function Dl(t){var p,h;let s,l=(((p=t[111])==null?void 0:p.label)||t[17].t(`crud.${(h=t[111])==null?void 0:h.name}`))+"",n,o;return{c(){var u,i,d;s=w("th"),n=Ne(l),o=F(),c(s,"class","normal-case "+(((u=t[111])==null?void 0:u.width)||"")+" "+(((i=t[111])==null?void 0:i.type)==="button"?"p-1":"")),c(s,"style",((d=t[111])==null?void 0:d.style)||"")},m(u,i){M(u,s,i),m(s,n),m(s,o)},p(u,i){var d,b;i[0]&131072&&l!==(l=(((d=u[111])==null?void 0:d.label)||u[17].t(`crud.${(b=u[111])==null?void 0:b.name}`))+"")&&He(n,l)},d(u){u&&z(s)}}}function bs(t){let s,l,n,o;function p(){t[82].call(l,t[111],t[116],t[110])}return{c(){var h,u;s=w("td"),l=w("input"),c(l,"type","text"),c(l,"class","input input-sm p-0 "+(((h=t[111])==null?void 0:h.width)||"w-full")+" bg-transparent"),c(s,"class","p-0.5 "+(((u=t[111])==null?void 0:u.width)||""))},m(h,u){var i;M(h,s,u),m(s,l),Ee(l,t[108][(i=t[111])==null?void 0:i.name]),n||(o=H(l,"input",p),n=!0)},p(h,u){var i,d;t=h,u[0]&262464&&l.value!==t[108][(i=t[111])==null?void 0:i.name]&&Ee(l,t[108][(d=t[111])==null?void 0:d.name])},i:Be,o:Be,d(h){h&&z(s),n=!1,o()}}}function _s(t){let s,l,n,o;function p(){t[81].call(l,t[111],t[116],t[110])}return{c(){var h,u;s=w("td"),l=w("input"),c(l,"type","date"),c(l,"class","input input-sm p-0 pl-2 pr-2 "+(((h=t[111])==null?void 0:h.width)||"w-full")+" input-bordered bg-transparent"),c(s,"class","p-0.5 "+(((u=t[111])==null?void 0:u.width)||""))},m(h,u){var i;M(h,s,u),m(s,l),Ee(l,t[108][(i=t[111])==null?void 0:i.name]),n||(o=H(l,"input",p),n=!0)},p(h,u){var i;t=h,u[0]&262464&&Ee(l,t[108][(i=t[111])==null?void 0:i.name])},i:Be,o:Be,d(h){h&&z(s),n=!1,o()}}}function ms(t){var d;let s,l,n,o,p,h,u;o=new Re({props:{type:"outline",icon:(d=t[111])==null?void 0:d.icon,path:"icons"}});function i(){return t[80](t[111],t[108],t[110])}return{c(){var b;s=w("td"),l=w("button"),n=w("span"),he(o.$$.fragment),c(n,"class","w-5"),c(l,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(s,"class","p-0.5 w-8 text-right"),c(s,"title",(b=t[111])==null?void 0:b.label)},m(b,v){M(b,s,v),m(s,l),m(l,n),ae(o,n,null),p=!0,h||(u=H(l,"click",i),h=!0)},p(b,v){t=b},i(b){p||(S(o.$$.fragment,b),p=!0)},o(b){R(o.$$.fragment,b),p=!1},d(b){b&&z(s),oe(o),h=!1,u()}}}function ds(t){var i;let s,l,n,o,p=ue(((i=t[111])==null?void 0:i.options)||[]),h=[];for(let d=0;d<p.length;d+=1)h[d]=Sl(ol(t,p,d));function u(){t[79].call(l,t[111],t[116],t[110])}return{c(){var d,b,v;s=w("td"),l=w("select");for(let k=0;k<h.length;k+=1)h[k].c();c(l,"class","select text-xs select-sm p-0.5 pr-2 "+(((d=t[111])==null?void 0:d.width)||"w-full bg-transparent")),t[108][(b=t[111])==null?void 0:b.name]===void 0&&zl(u),c(s,"class","p-0.5 "+(((v=t[111])==null?void 0:v.width)||""))},m(d,b){var v;M(d,s,b),m(s,l);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(l,null);el(l,t[108][(v=t[111])==null?void 0:v.name],!0),n||(o=H(l,"change",u),n=!0)},p(d,b){var v,k;if(t=d,b[0]&393216){p=ue(((v=t[111])==null?void 0:v.options)||[]);let x;for(x=0;x<p.length;x+=1){const O=ol(t,p,x);h[x]?h[x].p(O,b):(h[x]=Sl(O),h[x].c(),h[x].m(l,null))}for(;x<h.length;x+=1)h[x].d(1);h.length=p.length}b[0]&262464&&el(l,t[108][(k=t[111])==null?void 0:k.name])},i:Be,o:Be,d(d){d&&z(s),mt(h,d),n=!1,o()}}}function gs(t){let s,l,n,o;function p(){t[78].call(l,t[111],t[116],t[110])}return{c(){var h;s=w("td"),l=w("input"),c(l,"type","checkbox"),c(l,"class","toggle toggle-sm toggle-primary"),c(s,"class","p-0.5 text-center align-middle "+(((h=t[111])==null?void 0:h.width)||""))},m(h,u){var i;M(h,s,u),m(s,l),l.checked=t[108][(i=t[111])==null?void 0:i.name],n||(o=H(l,"change",p),n=!0)},p(h,u){var i;t=h,u[0]&262464&&(l.checked=t[108][(i=t[111])==null?void 0:i.name])},i:Be,o:Be,d(h){h&&z(s),n=!1,o()}}}function xs(t){let s;function l(p,h){return p[113]!==0?ks:ws}let o=l(t)(t);return{c(){o.c(),s=Jt()},m(p,h){o.m(p,h),M(p,s,h)},p(p,h){o.p(p,h)},i:Be,o:Be,d(p){p&&z(s),o.d(p)}}}function Sl(t){var o,p;let s,l=((o=t[118])!=null&&o.label?t[17].t(`crud.${(p=t[118])==null?void 0:p.label}`):t[118].value)+"",n;return{c(){s=w("option"),n=Ne(l),s.__value=t[118].value,Ee(s,s.__value)},m(h,u){M(h,s,u),m(s,n)},p(h,u){var i,d;u[0]&131072&&l!==(l=((i=h[118])!=null&&i.label?h[17].t(`crud.${(d=h[118])==null?void 0:d.label}`):h[118].value)+"")&&He(n,l)},d(h){h&&z(s)}}}function ws(t){let s;function l(p,h){return p[111].dt_frmt?Es:vs}let o=l(t)(t);return{c(){var p,h;s=w("th"),o.c(),c(s,"class","normal-case "+(((p=t[111])==null?void 0:p.width)||"")),c(s,"style",((h=t[111])==null?void 0:h.style)||"")},m(p,h){M(p,s,h),o.m(s,null)},p(p,h){o.p(p,h)},d(p){p&&z(s),o.d()}}}function ks(t){let s;function l(p,h){return p[111].dt_frmt?Ts:Ns}let o=l(t)(t);return{c(){var p,h;s=w("td"),o.c(),c(s,"class","normal-case "+(((p=t[111])==null?void 0:p.width)||"")),c(s,"style",((h=t[111])==null?void 0:h.style)||"")},m(p,h){M(p,s,h),o.m(s,null)},p(p,h){o.p(p,h)},d(p){p&&z(s),o.d()}}}function vs(t){var p,h,u;let s,l=et((h=t[108])==null?void 0:h[(p=t[111])==null?void 0:p.name],((u=t[111])==null?void 0:u.ellipsis)||30)+"",n,o;return{c(){var i,d,b;s=w("span"),n=Ne(l),c(s,"title",o=t[108][(i=t[111])==null?void 0:i.tooltip]||tt(t[108][(d=t[111])==null?void 0:d.name],((b=t[111])==null?void 0:b.ellipsis)||30))},m(i,d){M(i,s,d),m(s,n)},p(i,d){var b,v,k,x,O,e;d[0]&320&&l!==(l=et((v=i[108])==null?void 0:v[(b=i[111])==null?void 0:b.name],((k=i[111])==null?void 0:k.ellipsis)||30)+"")&&He(n,l),d[0]&262464&&o!==(o=i[108][(x=i[111])==null?void 0:x.tooltip]||tt(i[108][(O=i[111])==null?void 0:O.name],((e=i[111])==null?void 0:e.ellipsis)||30))&&c(s,"title",o)},d(i){i&&z(s)}}}function Es(t){var n,o;let s=Bt((o=t[108])==null?void 0:o[(n=t[111])==null?void 0:n.name]).format(t[111].dt_frmt)+"",l;return{c(){l=Ne(s)},m(p,h){M(p,l,h)},p(p,h){var u,i;h[0]&320&&s!==(s=Bt((i=p[108])==null?void 0:i[(u=p[111])==null?void 0:u.name]).format(p[111].dt_frmt)+"")&&He(l,s)},d(p){p&&z(l)}}}function Ns(t){var p,h,u;let s,l=et((h=t[108])==null?void 0:h[(p=t[111])==null?void 0:p.name],((u=t[111])==null?void 0:u.ellipsis)||30)+"",n,o;return{c(){var i,d,b;s=w("span"),n=Ne(l),c(s,"title",o=t[108][(i=t[111])==null?void 0:i.tooltip]||tt(t[108][(d=t[111])==null?void 0:d.name],((b=t[111])==null?void 0:b.ellipsis)||30))},m(i,d){M(i,s,d),m(s,n)},p(i,d){var b,v,k,x,O,e;d[0]&320&&l!==(l=et((v=i[108])==null?void 0:v[(b=i[111])==null?void 0:b.name],((k=i[111])==null?void 0:k.ellipsis)||30)+"")&&He(n,l),d[0]&262464&&o!==(o=i[108][(x=i[111])==null?void 0:x.tooltip]||tt(i[108][(O=i[111])==null?void 0:O.name],((e=i[111])==null?void 0:e.ellipsis)||30))&&c(s,"title",o)},d(i){i&&z(s)}}}function Ts(t){var n,o;let s=Bt((o=t[108])==null?void 0:o[(n=t[111])==null?void 0:n.name]).format(t[111].dt_frmt)+"",l;return{c(){l=Ne(s)},m(p,h){M(p,l,h)},p(p,h){var u,i;h[0]&320&&s!==(s=Bt((i=p[108])==null?void 0:i[(u=p[111])==null?void 0:u.name]).format(p[111].dt_frmt)+"")&&He(l,s)},d(p){p&&z(l)}}}function Il(t){let s,l,n,o;const p=[xs,gs,ds,ms,_s,bs],h=[];function u(i,d){var b,v,k,x,O,e;return((b=i[111])==null?void 0:b.type)==="data"&&!((v=i[108])!=null&&v.formula)?0:((k=i[111])==null?void 0:k.type)==="boolean"?1:((x=i[111])==null?void 0:x.type)==="select"?2:((O=i[111])==null?void 0:O.type)==="button"?3:((e=i[111])==null?void 0:e.type)==="date"?4:5}return s=u(t),l=h[s]=p[s](t),{c(){l.c(),n=Jt()},m(i,d){h[s].m(i,d),M(i,n,d),o=!0},p(i,d){let b=s;s=u(i),s===b?h[s].p(i,d):(rt(),R(h[b],1,1,()=>{h[b]=null}),ht(),l=h[s],l?l.p(i,d):(l=h[s]=p[s](i),l.c()),S(l,1),l.m(n.parentNode,n))},i(i){o||(S(l),o=!0)},o(i){R(l),o=!1},d(i){i&&z(n),h[s].d(i)}}}function jl(t){let s,l,n,o,p=ue(t[18]||[]),h=[];for(let b=0;b<p.length;b+=1)h[b]=Il(al(t,p,b));const u=b=>R(h[b],1,1,()=>{h[b]=null});function i(...b){return t[83](t[108],t[110],...b)}function d(...b){return t[84](t[108],t[110],...b)}return{c(){s=w("tr");for(let b=0;b<h.length;b+=1)h[b].c();c(s,"class","hover"),c(s,"draggable",!0),ve(s,"display",t[108].excluded?"None":null)},m(b,v){M(b,s,v);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(s,null);l=!0,n||(o=[H(s,"dragstart",i),H(s,"drop",d)],n=!0)},p(b,v){if(t=b,v[0]&393536|v[1]&256){p=ue(t[18]||[]);let k;for(k=0;k<p.length;k+=1){const x=al(t,p,k);h[k]?(h[k].p(x,v),S(h[k],1)):(h[k]=Il(x),h[k].c(),S(h[k],1),h[k].m(s,null))}for(rt(),k=p.length;k<h.length;k+=1)u(k);ht()}v[0]&320&&ve(s,"display",t[108].excluded?"None":null)},i(b){if(!l){for(let v=0;v<p.length;v+=1)S(h[v]);l=!0}},o(b){h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)R(h[v]);l=!1},d(b){b&&z(s),mt(h,b),n=!1,Rt(o)}}}function Os(t){var n;let s=((n=t[14])==null?void 0:n.msg)+"",l;return{c(){l=Ne(s)},m(o,p){M(o,l,p)},p(o,p){var h;p[0]&16384&&s!==(s=((h=o[14])==null?void 0:h.msg)+"")&&He(l,s)},i:Be,o:Be,d(o){o&&z(l)}}}function Ls(t){var Q,y,J,Pe,we,Ge,ke;let s,l,n,o,p,h,u,i,d,b,v,k,x,O,e,Z,L,q,B,ne,N=ue(((Q=t[14])==null?void 0:Q.cols)||Object.keys(((J=(y=t[14])==null?void 0:y.data)==null?void 0:J[0])||{})||[]),G=[];for(let A=0;A<N.length;A+=1)G[A]=Al(ul(t,N,A));let W=ue((((Pe=t[14])==null?void 0:Pe.data)||[]).filter(t[73])),T=[];for(let A=0;A<W.length;A+=1)T[A]=Rl(cl(t,W,A));return x=new Re({props:{type:"outline",icon:"save",path:"icons"}}),L=new Hl({props:{lang:(we=t[16])==null?void 0:we.lang,conf:(Ge=t[16])==null?void 0:Ge.conf,rows_per_page:t[4]||10,page:t[5]||0,total_rows:(ke=t[14])==null?void 0:ke.n_rows}}),L.$on("pageChange",t[75]),{c(){var A;s=w("div"),l=w("table"),n=w("thead"),o=w("tr");for(let K=0;K<G.length;K+=1)G[K].c();p=F(),h=w("tbody");for(let K=0;K<T.length;K+=1)T[K].c();u=F(),i=w("div"),d=w("div"),b=w("div"),v=w("button"),k=w("span"),he(x.$$.fragment),e=F(),Z=w("div"),he(L.$$.fragment),c(l,"class","table table-zebra w-[98%] normal-case table-xs"),c(s,"class","w-full overflow-x-auto text-center"),c(k,"class","w-6"),c(v,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(b,"class","tooltip tooltip-right"),c(b,"data-tip",O=t[17].t("crud.save")),c(d,"class","flex-grow flex flex-row align-middle p-2"),ve(d,"display",(((A=t[14])==null?void 0:A.data)||[]).length>0?null:"none"),c(i,"class","w-full overflow-hidden flex flex-row")},m(A,K){M(A,s,K),m(s,l),m(l,n),m(n,o);for(let te=0;te<G.length;te+=1)G[te]&&G[te].m(o,null);m(l,p),m(l,h);for(let te=0;te<T.length;te+=1)T[te]&&T[te].m(h,null);M(A,u,K),M(A,i,K),m(i,d),m(d,b),m(b,v),m(v,k),ae(x,k,null),m(i,e),m(i,Z),ae(L,Z,null),q=!0,B||(ne=H(v,"click",t[74]),B=!0)},p(A,K){var Te,Ke,Ue,We,Me,Qe,le,Ve;if(K[0]&16384){N=ue(((Te=A[14])==null?void 0:Te.cols)||Object.keys(((Ue=(Ke=A[14])==null?void 0:Ke.data)==null?void 0:Ue[0])||{})||[]);let X;for(X=0;X<N.length;X+=1){const pe=ul(A,N,X);G[X]?G[X].p(pe,K):(G[X]=Al(pe),G[X].c(),G[X].m(o,null))}for(;X<G.length;X+=1)G[X].d(1);G.length=N.length}if(K[0]&16640|K[1]&262144){W=ue((((We=A[14])==null?void 0:We.data)||[]).filter(A[73]));let X;for(X=0;X<W.length;X+=1){const pe=cl(A,W,X);T[X]?T[X].p(pe,K):(T[X]=Rl(pe),T[X].c(),T[X].m(h,null))}for(;X<T.length;X+=1)T[X].d(1);T.length=W.length}(!q||K[0]&131072&&O!==(O=A[17].t("crud.save")))&&c(b,"data-tip",O),K[0]&16384&&ve(d,"display",(((Me=A[14])==null?void 0:Me.data)||[]).length>0?null:"none");const te={};K[0]&65536&&(te.lang=(Qe=A[16])==null?void 0:Qe.lang),K[0]&65536&&(te.conf=(le=A[16])==null?void 0:le.conf),K[0]&16&&(te.rows_per_page=A[4]||10),K[0]&32&&(te.page=A[5]||0),K[0]&16384&&(te.total_rows=(Ve=A[14])==null?void 0:Ve.n_rows),L.$set(te)},i(A){q||(S(x.$$.fragment,A),S(L.$$.fragment,A),q=!0)},o(A){R(x.$$.fragment,A),R(L.$$.fragment,A),q=!1},d(A){A&&(z(s),z(u),z(i)),mt(G,A),mt(T,A),oe(x),oe(L),B=!1,ne()}}}function Al(t){let s,l=et(t[111],20)+"",n,o;return{c(){s=w("th"),n=Ne(l),c(s,"class","normal-case"),c(s,"title",o=tt(t[111],20))},m(p,h){M(p,s,h),m(s,n)},p(p,h){h[0]&16384&&l!==(l=et(p[111],20)+"")&&He(n,l),h[0]&16384&&o!==(o=tt(p[111],20))&&c(s,"title",o)},d(p){p&&z(s)}}}function Ds(t){var p;let s,l=et((p=t[108])==null?void 0:p[t[111]],30)+"",n,o;return{c(){var h;s=w("td"),n=Ne(l),c(s,"class","normal-case whitespace-nowrap"),c(s,"title",o=tt((h=t[108])==null?void 0:h[t[111]],30))},m(h,u){M(h,s,u),m(s,n)},p(h,u){var i,d;u[0]&16384&&l!==(l=et((i=h[108])==null?void 0:i[h[111]],30)+"")&&He(n,l),u[0]&16384&&o!==(o=tt((d=h[108])==null?void 0:d[h[111]],30))&&c(s,"title",o)},d(h){h&&z(s)}}}function Ss(t){var o;let s,l=rl((o=t[108])==null?void 0:o[t[111]],",",0)+"",n;return{c(){s=w("th"),n=Ne(l),c(s,"class","normal-case")},m(p,h){M(p,s,h),m(s,n)},p(p,h){var u;h[0]&16384&&l!==(l=rl((u=p[108])==null?void 0:u[p[111]],",",0)+"")&&He(n,l)},d(p){p&&z(s)}}}function Cl(t){let s,l;function n(h,u){var i,d,b,v,k,x;return u[0]&16640&&(s=null),s==null&&(s=!!((x=h[49]((k=(v=(i=h[8])==null?void 0:i.tabs)==null?void 0:v[((d=h[8])==null?void 0:d.selected_tab_2_prev)||((b=h[8])==null?void 0:b.selected_tab)])==null?void 0:k.fields,h[111]))!=null&&x.tousnd_sep)),s?Ss:Ds}let o=n(t,[-1,-1,-1,-1,-1]),p=o(t);return{c(){p.c(),l=Jt()},m(h,u){p.m(h,u),M(h,l,u)},p(h,u){o===(o=n(h,u))&&p?p.p(h,u):(p.d(1),p=o(h),p&&(p.c(),p.m(l.parentNode,l)))},d(h){h&&z(l),p.d(h)}}}function Rl(t){var p,h,u;let s,l,n=ue(((p=t[14])==null?void 0:p.cols)||Object.keys(((u=(h=t[14])==null?void 0:h.data)==null?void 0:u[0])||{})||[]),o=[];for(let i=0;i<n.length;i+=1)o[i]=Cl(fl(t,n,i));return{c(){s=w("tr");for(let i=0;i<o.length;i+=1)o[i].c();l=F()},m(i,d){M(i,s,d);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(s,null);m(s,l)},p(i,d){var b,v,k;if(d[0]&16640|d[1]&262144){n=ue(((b=i[14])==null?void 0:b.cols)||Object.keys(((k=(v=i[14])==null?void 0:v.data)==null?void 0:k[0])||{})||[]);let x;for(x=0;x<n.length;x+=1){const O=fl(i,n,x);o[x]?o[x].p(O,d):(o[x]=Cl(O),o[x].c(),o[x].m(s,l))}for(;x<o.length;x+=1)o[x].d(1);o.length=n.length}},d(i){i&&z(s),mt(o,i)}}}function Bl(t){let s,l;return s=new Xl({props:{open:t[13]}}),{c(){he(s.$$.fragment)},m(n,o){ae(s,n,o),l=!0},p(n,o){const p={};o[0]&8192&&(p.open=n[13]),s.$set(p)},i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){R(s.$$.fragment,n),l=!1},d(n){oe(s,n)}}}function Ul(t){let s,l;return s=new Gl({props:{open:t[9].open,type:t[9].type,msg:t[9].msg,timer:2e4}}),s.$on("dismiss",t[96]),{c(){he(s.$$.fragment)},m(n,o){ae(s,n,o),l=!0},p(n,o){const p={};o[0]&512&&(p.open=n[9].open),o[0]&512&&(p.type=n[9].type),o[0]&512&&(p.msg=n[9].msg),s.$set(p)},i(n){l||(S(s.$$.fragment,n),l=!0)},o(n){R(s.$$.fragment,n),l=!1},d(n){oe(s,n)}}}function Ml(t){let s,l;const n=[t[10]];let o={};for(let p=0;p<n.length;p+=1)o=Yl(o,n[p]);return s=new Zl({props:o}),s.$on("dismiss",t[97]),{c(){he(s.$$.fragment)},m(p,h){ae(s,p,h),l=!0},p(p,h){const u=h[0]&1024?$l(n,[ql(p[10])]):{};s.$set(u)},i(p){l||(S(s.$$.fragment,p),l=!0)},o(p){R(s.$$.fragment,p),l=!1},d(p){oe(s,p)}}}function Is(t){var Vt,Xt,Gt,Yt,Zt,$t,qt,yt,r,f;let s,l,n,o,p,h,u,i,d,b,v,k,x,O,e,Z,L,q,B,ne,N,G,W,T,Q,y,J,Pe,we,Ge,ke,A,K,te,Te,Ke,Ue,We,Me,Qe,le,Ve,X,pe,be,pt,at,lt,Ye,Je,dt,ft,D,P,ie,Ze,ce,ut,Oe,Ot,st,bt,_t=`${t[17].t("crud.preview")} ${((Yt=(Gt=(Vt=t[8])==null?void 0:Vt.tabs)==null?void 0:Gt[(Xt=t[14])==null?void 0:Xt.tab])==null?void 0:Yt.label)||""}`,gt,I,ee,_e,me,de,ge,Lt,xt,wt,ot,it,ct,$e,kt,Dt;const St=[ps,ns],qe=[];function It(a,_){var E,j;return((j=(E=a[8])==null?void 0:E.tables)==null?void 0:j.length)===0?0:1}p=It(t),h=qe[p]=St[p](t);let U=(($t=(Zt=t[8])==null?void 0:Zt.selected_table_fields)==null?void 0:$t.length)>0&&wl(t);x=new Re({props:{type:"outline",icon:"chevron-up",path:"icons"}});let re=((yt=(qt=t[8])==null?void 0:qt.selected_table_fields)==null?void 0:yt.length)>0&&kl(t),vt=ue((r=t[8])==null?void 0:r.selected_table_fields.filter(t[58])),Le=[];for(let a=0;a<vt.length;a+=1)Le[a]=vl(dl(t,vt,a));N=new Re({props:{type:"outline",icon:"chevron-down",path:"icons"}}),J=new Re({props:{type:"outline",icon:"chevron-left",path:"icons"}});let Et=ue(t[7].filter(t[60])),De=[];for(let a=0;a<Et.length;a+=1)De[a]=El(ml(t,Et,a));K=new Re({props:{type:"outline",icon:"chevron-right",path:"icons"}}),Me=new Re({props:{type:"outline",icon:"search",path:"icons"}}),lt=new Re({props:{type:"outline",icon:"circle-stack",path:"icons"}});let Nt=ue(t[15]),Xe=[];for(let a=0;a<Nt.length;a+=1)Xe[a]=Nl(_l(t,Nt,a));let Se=t[1]&&Tl(t),Ie=t[2]&&Ol(t),At=ue(Object.keys(((f=t[8])==null?void 0:f.tabs)||{})),fe=[];for(let a=0;a<At.length;a+=1)fe[a]=Ll(bl(t,At,a));const tl=a=>R(fe[a],1,1,()=>{fe[a]=null});Oe=new Re({props:{type:"outline",icon:"plus",path:"icons"}});const Kt=[cs,is,os],jt=[];function Qt(a,_){var E,j,Y,$;return a[8].selected_tab==="query_preview"?0:((($=(Y=(E=a[8])==null?void 0:E.tabs)==null?void 0:Y[(j=a[8])==null?void 0:j.selected_tab])==null?void 0:$.fields)||[]).length>0?1:2}de=Qt(t),ge=jt[de]=Kt[de](t);let je=t[13]&&Bl(t),Ae=t[9].open&&Ul(t),Ce=t[10].open&&Ml(t);return{c(){var a,_,E,j,Y,$,se;s=w("div"),l=w("div"),n=w("div"),o=w("div"),h.c(),u=F(),i=w("div"),U&&U.c(),d=F(),b=w("div"),v=w("div"),k=w("span"),he(x.$$.fragment),O=F(),e=w("div"),re&&re.c(),Z=F();for(let g=0;g<Le.length;g+=1)Le[g].c();q=F(),B=w("div"),ne=w("span"),he(N.$$.fragment),G=F(),W=w("div"),T=w("div"),Q=w("div"),y=w("span"),he(J.$$.fragment),Pe=F(),we=w("div");for(let g=0;g<De.length;g+=1)De[g].c();Ge=F(),ke=w("div"),A=w("span"),he(K.$$.fragment),te=F(),Te=w("div"),Ke=w("div"),Ue=w("button"),We=w("span"),he(Me.$$.fragment),Qe=F(),le=w("input"),X=F(),pe=w("div"),be=w("div"),pt=w("button"),at=w("span"),he(lt.$$.fragment),Ye=F(),Je=w("select");for(let g=0;g<Xe.length;g+=1)Xe[g].c();dt=F(),Se&&Se.c(),ft=F(),Ie&&Ie.c(),D=F(),P=w("div"),ie=w("div");for(let g=0;g<fe.length;g+=1)fe[g].c();Ze=F(),ce=w("a"),ut=w("span"),he(Oe.$$.fragment),Ot=F(),st=w("a"),bt=w("b"),gt=Ne(_t),ee=F(),_e=w("a"),_e.innerHTML="<b></b>",me=F(),ge.c(),Lt=F(),xt=w("span"),wt=F(),je&&je.c(),ot=F(),Ae&&Ae.c(),it=F(),Ce&&Ce.c(),ct=Jt(),c(o,"class","w-full h-10 align-middle border-b border-r-slate-200 hover:border-dashed"),c(k,"class","h-5 w-5 m-auto"),c(v,"class","h-5 w-full flex cursor-pointer hover:bg-base-300 hover:rounded-md !text-center"),ve(v,"display",((_=(a=t[8])==null?void 0:a.tables)==null?void 0:_.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(e,"id",L=t[19]+"-"+((E=t[8])==null?void 0:E.selecetd_table)+"-selected"),c(e,"class","flex-grow flex flex-col overflow-hidden pt-0.5 pb-0.5"),c(ne,"class","h-5 w-5 m-auto"),c(B,"class","h-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md !text-center"),ve(B,"display",((Y=(j=t[8])==null?void 0:j.tables)==null?void 0:Y.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(b,"class","w-full flex flex-col flex-grow h-["+(window.innerHeight-200)+"px]"),c(i,"class","w-full align-middle border-r border-r-slate-200 hover:border-dashed flex flex-col"),c(n,"class","w-[18%] min-h-[90%] max-h-[90%] border-r border-r-slate-200"),ve(n,"min-height",t[47]-130+"px"),ve(n,"max-height",t[47]-130+"px"),c(y,"class","h-5 w-full"),c(Q,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),ve(Q,"display",(($=t[7])==null?void 0:$.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(we,"id",t[19]),c(we,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(A,"class","h-5 w-full"),c(ke,"class","w-5 min-w-5 flex cursor-pointer hover:bg-base-300 hover:rounded-md text-center"),ve(ke,"display",((se=t[7])==null?void 0:se.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(We,"class","w-5 h-5"),c(Ue,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(le,"type","text"),c(le,"placeholder",Ve=`${t[17].t("crud.filter")} ${t[17].t("crud.table")}`),c(le,"class","grow input pl-8 input-bordered w-full input-sm"),c(le,"autocomplete","off"),c(le,"autocorrect","off"),c(Ke,"class","grow flex"),c(Te,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 pt-0.5 flex flex-row"),c(at,"class","w-5 h-5"),c(pt,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(Je,"class","grow pl-8 select select-sm select-bordered w-full"),t[0].database===void 0&&zl(()=>t[65].call(Je)),c(be,"class","grow flex"),c(pe,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 ml-1 pt-0.5 flex flex-row"),c(T,"class","w-full h-10 border-b border-r-slate-200 flex flex-row align-baseline"),c(ut,"class","w-5 font-bold"),c(ce,"role","tab"),c(ce,"class","tab text-md"),c(st,"role","tab"),c(st,"class",I="tab text-md "+(t[8].selected_tab==="query_preview"?"tab-active active":"")),c(_e,"role","tab"),c(_e,"class","tab text-md grow"),c(ie,"role","tablist"),c(ie,"class","tabs tabs-lifted w-full flex"),c(P,"class","w-full flex-grow h-["+(window.innerHeight-200)+"px]"),c(W,"class","w-[82%] flex flex-col"),c(l,"class","flex flex-row"),c(xt,"class","w-10 w-20 h-[300px] h-[301px] h-[302px] h-[303px] h-[304px] h-[305px] h-[306px] h-[307px] h-[308px] h-[309px] h-[310px] h-[311px] h-[312px] h-[313px] h-[314px] h-[315px] h-[316px] h-[317px] h-[318px] h-[319px] h-[320px] h-[321px] h-[322px] h-[323px] h-[324px] h-[325px] h-[326px] h-[327px] h-[328px] h-[329px] h-[330px] h-[331px] h-[332px] h-[333px] h-[334px] h-[335px] h-[336px] h-[337px] h-[338px] h-[339px] h-[340px] h-[341px] h-[342px] h-[343px] h-[344px] h-[345px] h-[346px] h-[347px] h-[348px] h-[349px] h-[350px] h-[351px] h-[352px] h-[353px] h-[354px] h-[355px] h-[356px] h-[357px] h-[358px] h-[359px] h-[360px] h-[361px] h-[362px] h-[363px] h-[364px] h-[365px] h-[366px] h-[367px] h-[368px] h-[369px] h-[370px] h-[371px] h-[372px] h-[373px] h-[374px] h-[375px] h-[376px] h-[377px] h-[378px] h-[379px] h-[380px] h-[381px] h-[382px] h-[383px] h-[384px] h-[385px] h-[386px] h-[387px] h-[388px] h-[389px] h-[390px] h-[391px] h-[392px] h-[393px] h-[394px] h-[395px] h-[396px] h-[397px] h-[398px] h-[399px] h-[400px] h-[401px] h-[402px] h-[403px] h-[404px] h-[405px] h-[406px] h-[407px] h-[408px] h-[409px] h-[410px] h-[411px] h-[412px] h-[413px] h-[414px] h-[415px] h-[416px] h-[417px] h-[418px] h-[419px] h-[420px] h-[421px] h-[422px] h-[423px] h-[424px] h-[425px] h-[426px] h-[427px] h-[428px] h-[429px] h-[430px] h-[431px] h-[432px] h-[433px] h-[434px] h-[435px] h-[436px] h-[437px] h-[438px] h-[439px] h-[440px] h-[441px] h-[442px] h-[443px] h-[444px] h-[445px] h-[446px] h-[447px] h-[448px] h-[449px] h-[450px] h-[451px] h-[452px] h-[453px] h-[454px] h-[455px] h-[456px] h-[457px] h-[458px] h-[459px] h-[460px] h-[461px] h-[462px] h-[463px] h-[464px] h-[465px] h-[466px] h-[467px] h-[468px] h-[469px] h-[470px] h-[471px] h-[472px] h-[473px] h-[474px] h-[475px] h-[476px] h-[477px] h-[478px] h-[479px] h-[480px] h-[481px] h-[482px] h-[483px] h-[484px] h-[485px] h-[486px] h-[487px] h-[488px] h-[489px] h-[490px] h-[491px] h-[492px] h-[493px] h-[494px] h-[495px] h-[496px] h-[497px] h-[498px] h-[499px] h-[500px] h-[501px] h-[502px] h-[503px] h-[504px] h-[505px] h-[506px] h-[507px] h-[508px] h-[509px] h-[510px] h-[511px] h-[512px] h-[513px] h-[514px] h-[515px] h-[516px] h-[517px] h-[518px] h-[519px] h-[520px] h-[521px] h-[522px] h-[523px] h-[524px] h-[525px] h-[526px] h-[527px] h-[528px] h-[529px] h-[530px] h-[531px] h-[532px] h-[533px] h-[534px] h-[535px] h-[536px] h-[537px] h-[538px] h-[539px] h-[540px] h-[541px] h-[542px] h-[543px] h-[544px] h-[545px] h-[546px] h-[547px] h-[548px] h-[549px] h-[550px] h-[551px] h-[552px] h-[553px] h-[554px] h-[555px] h-[556px] h-[557px] h-[558px] h-[559px] h-[560px] h-[561px] h-[562px] h-[563px] h-[564px] h-[565px] h-[566px] h-[567px] h-[568px] h-[569px] h-[570px] h-[571px] h-[572px] h-[573px] h-[574px] h-[575px] h-[576px] h-[577px] h-[578px] h-[579px] h-[580px] h-[581px] h-[582px] h-[583px] h-[584px] h-[585px] h-[586px] h-[587px] h-[588px] h-[589px] h-[590px] h-[591px] h-[592px] h-[593px] h-[594px] h-[595px] h-[596px] h-[597px] h-[598px] h-[599px] h-[600px] h-[601px] h-[602px] h-[603px] h-[604px] h-[605px] h-[606px] h-[607px] h-[608px] h-[609px] h-[610px] h-[611px] h-[612px] h-[613px] h-[614px] h-[615px] h-[616px] h-[617px] h-[618px] h-[619px] h-[620px] h-[621px] h-[622px] h-[623px] h-[624px] h-[625px] h-[626px] h-[627px] h-[628px] h-[629px] h-[630px] h-[631px] h-[632px] h-[633px] h-[634px] h-[635px] h-[636px] h-[637px] h-[638px] h-[639px] h-[640px] h-[641px] h-[642px] h-[643px] h-[644px] h-[645px] h-[646px] h-[647px] h-[648px] h-[649px] h-[650px] h-[651px] h-[652px] h-[653px] h-[654px] h-[655px] h-[656px] h-[657px] h-[658px] h-[659px] h-[660px] h-[661px] h-[662px] h-[663px] h-[664px] h-[665px] h-[666px] h-[667px] h-[668px] h-[669px] h-[670px] h-[671px] h-[672px] h-[673px] h-[674px] h-[675px] h-[676px] h-[677px] h-[678px] h-[679px] h-[680px] h-[681px] h-[682px] h-[683px] h-[684px] h-[685px] h-[686px] h-[687px] h-[688px] h-[689px] h-[690px] h-[691px] h-[692px] h-[693px] h-[694px] h-[695px] h-[696px] h-[697px] h-[698px] h-[699px] h-[700px] h-[701px] h-[702px] h-[703px] h-[704px] h-[705px] h-[706px] h-[707px] h-[708px] h-[709px] h-[710px] h-[711px] h-[712px] h-[713px] h-[714px] h-[715px] h-[716px] h-[717px] h-[718px] h-[719px] h-[720px] h-[721px] h-[722px] h-[723px] h-[724px] h-[725px] h-[726px] h-[727px] h-[728px] h-[729px] h-[730px] h-[731px] h-[732px] h-[733px] h-[734px] h-[735px] h-[736px] h-[737px] h-[738px] h-[739px] h-[740px] h-[741px] h-[742px] h-[743px] h-[744px] h-[745px] h-[746px] h-[747px] h-[748px] h-[749px] h-[750px] h-[751px] h-[752px] h-[753px] h-[754px] h-[755px] h-[756px] h-[757px] h-[758px] h-[759px] h-[760px] h-[761px] h-[762px] h-[763px] h-[764px] h-[765px] h-[766px] h-[767px] h-[768px] h-[769px] h-[770px] h-[771px] h-[772px] h-[773px] h-[774px] h-[775px] h-[776px] h-[777px] h-[778px] h-[779px] h-[780px] h-[781px] h-[782px] h-[783px] h-[784px] h-[785px] h-[786px] h-[787px] h-[788px] h-[789px] h-[790px] h-[791px] h-[792px] h-[793px] h-[794px] h-[795px] h-[796px] h-[797px] h-[798px] h-[799px] h-[800px] h-[801px] h-[802px] h-[803px] h-[804px] h-[805px] h-[806px] h-[807px] h-[808px] h-[809px] h-[810px] h-[811px] h-[812px] h-[813px] h-[814px] h-[815px] h-[816px] h-[817px] h-[818px] h-[819px] h-[820px] h-[821px] h-[822px] h-[823px] h-[824px] h-[825px] h-[826px] h-[827px] h-[828px] h-[829px] h-[830px] h-[831px] h-[832px] h-[833px] h-[834px] h-[835px] h-[836px] h-[837px] h-[838px] h-[839px] h-[840px] h-[841px] h-[842px] h-[843px] h-[844px] h-[845px] h-[846px] h-[847px] h-[848px] h-[849px] h-[850px] h-[851px] h-[852px] h-[853px] h-[854px] h-[855px] h-[856px] h-[857px] h-[858px] h-[859px] h-[860px] h-[861px] h-[862px] h-[863px] h-[864px] h-[865px] h-[866px] h-[867px] h-[868px] h-[869px] h-[870px] h-[871px] h-[872px] h-[873px] h-[874px] h-[875px] h-[876px] h-[877px] h-[878px] h-[879px] h-[880px] h-[881px] h-[882px] h-[883px] h-[884px] h-[885px] h-[886px] h-[887px] h-[888px] h-[889px] h-[890px] h-[891px] h-[892px] h-[893px] h-[894px] h-[895px] h-[896px] h-[897px] h-[898px] h-[899px] h-[900px] h-[901px] h-[902px] h-[903px] h-[904px] h-[905px] h-[906px] h-[907px] h-[908px] h-[909px] h-[910px] h-[911px] h-[912px] h-[913px] h-[914px] h-[915px] h-[916px] h-[917px] h-[918px] h-[919px] h-[920px] h-[921px] h-[922px] h-[923px] h-[924px] h-[925px] h-[926px] h-[927px] h-[928px] h-[929px] h-[930px] h-[931px] h-[932px] h-[933px] h-[934px] h-[935px] h-[936px] h-[937px] h-[938px] h-[939px] h-[940px] h-[941px] h-[942px] h-[943px] h-[944px] h-[945px] h-[946px] h-[947px] h-[948px] h-[949px] h-[950px] h-[951px] h-[952px] h-[953px] h-[954px] h-[955px] h-[956px] h-[957px] h-[958px] h-[959px] h-[960px] h-[961px] h-[962px] h-[963px] h-[964px] h-[965px] h-[966px] h-[967px] h-[968px] h-[969px] h-[970px] h-[971px] h-[972px] h-[973px] h-[974px] h-[975px] h-[976px] h-[977px] h-[978px] h-[979px] h-[980px] h-[981px] h-[982px] h-[983px] h-[984px] h-[985px] h-[986px] h-[987px] h-[988px] h-[989px] h-[990px] h-[991px] h-[992px] h-[993px] h-[994px] h-[995px] h-[996px] h-[997px] h-[998px] h-[999px] "),c(s,"class","w-full --m-3")},m(a,_){M(a,s,_),m(s,l),m(l,n),m(n,o),qe[p].m(o,null),m(n,u),m(n,i),U&&U.m(i,null),m(i,d),m(i,b),m(b,v),m(v,k),ae(x,k,null),m(b,O),m(b,e),re&&re.m(e,null),m(e,Z);for(let E=0;E<Le.length;E+=1)Le[E]&&Le[E].m(e,null);m(b,q),m(b,B),m(B,ne),ae(N,ne,null),m(l,G),m(l,W),m(W,T),m(T,Q),m(Q,y),ae(J,y,null),m(T,Pe),m(T,we);for(let E=0;E<De.length;E+=1)De[E]&&De[E].m(we,null);m(T,Ge),m(T,ke),m(ke,A),ae(K,A,null),m(T,te),m(T,Te),m(Te,Ke),m(Ke,Ue),m(Ue,We),ae(Me,We,null),m(Ke,Qe),m(Ke,le),Ee(le,t[11]),m(T,X),m(T,pe),m(pe,be),m(be,pt),m(pt,at),ae(lt,at,null),m(be,Ye),m(be,Je);for(let E=0;E<Xe.length;E+=1)Xe[E]&&Xe[E].m(Je,null);el(Je,t[0].database,!0),m(T,dt),Se&&Se.m(T,null),m(T,ft),Ie&&Ie.m(T,null),m(W,D),m(W,P),m(P,ie);for(let E=0;E<fe.length;E+=1)fe[E]&&fe[E].m(ie,null);m(ie,Ze),m(ie,ce),m(ce,ut),ae(Oe,ut,null),m(ie,Ot),m(ie,st),m(st,bt),m(bt,gt),m(ie,ee),m(ie,_e),m(P,me),jt[de].m(P,null),m(s,Lt),m(s,xt),M(a,wt,_),je&&je.m(a,_),M(a,ot,_),Ae&&Ae.m(a,_),M(a,it,_),Ce&&Ce.m(a,_),M(a,ct,_),$e=!0,kt||(Dt=[H(o,"drop",t[54]),H(o,"dragover",t[55]),H(v,"click",t[31]),H(B,"click",t[30]),H(Q,"click",t[27]),H(we,"drop",t[62]),H(we,"dragover",t[63]),H(ke,"click",t[26]),H(le,"input",t[64]),H(Je,"change",t[65]),H(Je,"change",t[66]),H(ce,"click",t[40]),H(st,"click",Fl(t[72])),H(P,"drop",t[94]),H(P,"dragover",t[95])],kt=!0)},p(a,_){var Y,$,se,g,ze,ye,Fe,V,xe,nt,Ut,Mt,zt,Ft,Ht,Ct,Pt;let E=p;if(p=It(a),p===E?qe[p].p(a,_):(rt(),R(qe[E],1,1,()=>{qe[E]=null}),ht(),h=qe[p],h?h.p(a,_):(h=qe[p]=St[p](a),h.c()),S(h,1),h.m(o,null)),(($=(Y=a[8])==null?void 0:Y.selected_table_fields)==null?void 0:$.length)>0?U?(U.p(a,_),_[0]&256&&S(U,1)):(U=wl(a),U.c(),S(U,1),U.m(i,d)):U&&(rt(),R(U,1,1,()=>{U=null}),ht()),_[0]&256&&ve(v,"display",((g=(se=a[8])==null?void 0:se.tables)==null?void 0:g.length)>0&&a[25](`${a[19]}-${a[8].selecetd_table}-selected`,"height",a[8])?null:"none"),((ye=(ze=a[8])==null?void 0:ze.selected_table_fields)==null?void 0:ye.length)>0?re?re.p(a,_):(re=kl(a),re.c(),re.m(e,Z)):re&&(re.d(1),re=null),_[0]&528704|_[1]&32){vt=ue((Fe=a[8])==null?void 0:Fe.selected_table_fields.filter(a[58]));let C;for(C=0;C<vt.length;C+=1){const Tt=dl(a,vt,C);Le[C]?Le[C].p(Tt,_):(Le[C]=vl(Tt),Le[C].c(),Le[C].m(e,null))}for(;C<Le.length;C+=1)Le[C].d(1);Le.length=vt.length}if((!$e||_[0]&262400&&L!==(L=a[19]+"-"+((V=a[8])==null?void 0:V.selecetd_table)+"-selected"))&&c(e,"id",L),_[0]&256&&ve(B,"display",((nt=(xe=a[8])==null?void 0:xe.tables)==null?void 0:nt.length)>0&&a[25](`${a[19]}-${a[8].selecetd_table}-selected`,"height",a[8])?null:"none"),_[0]&128&&ve(Q,"display",((Ut=a[7])==null?void 0:Ut.length)>0&&a[25](a[19],"width",a[7])?null:"none"),_[0]&2240|_[1]&2){Et=ue(a[7].filter(a[60]));let C;for(C=0;C<Et.length;C+=1){const Tt=ml(a,Et,C);De[C]?De[C].p(Tt,_):(De[C]=El(Tt),De[C].c(),De[C].m(we,null))}for(;C<De.length;C+=1)De[C].d(1);De.length=Et.length}if(_[0]&128&&ve(ke,"display",((Mt=a[7])==null?void 0:Mt.length)>0&&a[25](a[19],"width",a[7])?null:"none"),(!$e||_[0]&131072&&Ve!==(Ve=`${a[17].t("crud.filter")} ${a[17].t("crud.table")}`))&&c(le,"placeholder",Ve),_[0]&2048&&le.value!==a[11]&&Ee(le,a[11]),_[0]&32768){Nt=ue(a[15]);let C;for(C=0;C<Nt.length;C+=1){const Tt=_l(a,Nt,C);Xe[C]?Xe[C].p(Tt,_):(Xe[C]=Nl(Tt),Xe[C].c(),Xe[C].m(Je,null))}for(;C<Xe.length;C+=1)Xe[C].d(1);Xe.length=Nt.length}if(_[0]&32769&&el(Je,a[0].database),a[1]?Se?(Se.p(a,_),_[0]&2&&S(Se,1)):(Se=Tl(a),Se.c(),S(Se,1),Se.m(T,ft)):Se&&(rt(),R(Se,1,1,()=>{Se=null}),ht()),a[2]?Ie?(Ie.p(a,_),_[0]&4&&S(Ie,1)):(Ie=Ol(a),Ie.c(),S(Ie,1),Ie.m(T,null)):Ie&&(rt(),R(Ie,1,1,()=>{Ie=null}),ht()),_[0]&256|_[1]&1024){At=ue(Object.keys(((zt=a[8])==null?void 0:zt.tabs)||{}));let C;for(C=0;C<At.length;C+=1){const Tt=bl(a,At,C);fe[C]?(fe[C].p(Tt,_),S(fe[C],1)):(fe[C]=Ll(Tt),fe[C].c(),S(fe[C],1),fe[C].m(ie,Ze))}for(rt(),C=At.length;C<fe.length;C+=1)tl(C);ht()}(!$e||_[0]&147712)&&_t!==(_t=`${a[17].t("crud.preview")} ${((Pt=(Ct=(Ft=a[8])==null?void 0:Ft.tabs)==null?void 0:Ct[(Ht=a[14])==null?void 0:Ht.tab])==null?void 0:Pt.label)||""}`)&&He(gt,_t),(!$e||_[0]&262400&&I!==(I="tab text-md "+(a[8].selected_tab==="query_preview"?"tab-active active":"")))&&c(st,"class",I);let j=de;de=Qt(a),de===j?jt[de].p(a,_):(rt(),R(jt[j],1,1,()=>{jt[j]=null}),ht(),ge=jt[de],ge?ge.p(a,_):(ge=jt[de]=Kt[de](a),ge.c()),S(ge,1),ge.m(P,null)),a[13]?je?(je.p(a,_),_[0]&8192&&S(je,1)):(je=Bl(a),je.c(),S(je,1),je.m(ot.parentNode,ot)):je&&(rt(),R(je,1,1,()=>{je=null}),ht()),a[9].open?Ae?(Ae.p(a,_),_[0]&512&&S(Ae,1)):(Ae=Ul(a),Ae.c(),S(Ae,1),Ae.m(it.parentNode,it)):Ae&&(rt(),R(Ae,1,1,()=>{Ae=null}),ht()),a[10].open?Ce?(Ce.p(a,_),_[0]&1024&&S(Ce,1)):(Ce=Ml(a),Ce.c(),S(Ce,1),Ce.m(ct.parentNode,ct)):Ce&&(rt(),R(Ce,1,1,()=>{Ce=null}),ht())},i(a){if(!$e){S(h),S(U),S(x.$$.fragment,a),S(N.$$.fragment,a),S(J.$$.fragment,a),S(K.$$.fragment,a),S(Me.$$.fragment,a),S(lt.$$.fragment,a),S(Se),S(Ie);for(let _=0;_<At.length;_+=1)S(fe[_]);S(Oe.$$.fragment,a),S(ge),S(je),S(Ae),S(Ce),$e=!0}},o(a){R(h),R(U),R(x.$$.fragment,a),R(N.$$.fragment,a),R(J.$$.fragment,a),R(K.$$.fragment,a),R(Me.$$.fragment,a),R(lt.$$.fragment,a),R(Se),R(Ie),fe=fe.filter(Boolean);for(let _=0;_<fe.length;_+=1)R(fe[_]);R(Oe.$$.fragment,a),R(ge),R(je),R(Ae),R(Ce),$e=!1},d(a){a&&(z(s),z(wt),z(ot),z(it),z(ct)),qe[p].d(),U&&U.d(),oe(x),re&&re.d(),mt(Le,a),oe(N),oe(J),mt(De,a),oe(K),oe(Me),oe(lt),mt(Xe,a),Se&&Se.d(),Ie&&Ie.d(),mt(fe,a),oe(Oe),jt[de].d(),je&&je.d(a),Ae&&Ae.d(a),Ce&&Ce.d(a),kt=!1,Rt(Dt)}}}function js(t,s,l){let n,o;ll(t,Kl,r=>l(16,n=r)),ll(t,Ql,r=>l(17,o=r));let{data:p}=s,{return_query:h}=s,{extra_save_op:u}=s,{option:i={}}=s,{action:d={}}=s,b={manage_query_id:null,manage_query:null,database:null,manage_query_conf:null,active:!0},v=10,k=0,x={},O=[],e={tables:[],selecetd_table:null,selected_table_fields:[],selected_tab:"Query 1",selected_tab_2_prev:null,tabs:{"Query 1":{label:"Query 1",fields:[],sql:null,show:!1,use:!1,limit:10,offset:0}}};const B=[{name:"field",type:"data",ellipsis:30},{name:"table",type:"data",ellipsis:30},{name:"func",type:"select",input:!0,options:[{value:"",label:""},{value:"COUNT",label:"COUNT",agreg:!0},{value:"SUM",label:"SUM",agreg:!0},{value:"AVG",label:"AVG",agreg:!0},{value:"MAX",label:"MAX",agreg:!0},{value:"MIN",label:"MIN",agreg:!0}],width:"w-10"},{name:"join",type:"text",input:!0,width:"w-10"},{name:"where_cond",type:"select",input:!0,options:[{value:"",label:""},{value:"=",label:"equal"},{value:">",label:"gt"},{value:">=",label:"gt_eq"},{value:"<",label:"lt"},{value:"<=",label:"lt_eq"},{value:"!=",label:"dif"},{value:"LIKE",label:"like"},{value:"NOT LIKE",label:"not_like"},{value:"IN",label:"in"},{value:"NOT IN",label:"not_in"},{value:"BETWEEN",label:"between"},{value:"NOT BETWEEN",label:"not_between"},{value:"IS NULL",label:"is_null"},{value:"IS NOT NULL",label:"is_not_null"},{value:"IS TRUE",label:"is_true"},{value:"IS FALSE",label:"is_false"}],width:"w-10"},{name:"where_val",type:"text",input:!0,width:"w-10"},{name:"group_by",type:"boolean",input:!0},{name:"order_by",type:"select",input:!0,options:[{value:"",label:""},{value:"ASC",label:"ASC"},{value:"DESC",label:"DESC"}]},{name:"label",type:"text",input:!0,width:"w-10"},{name:"ignore",type:"boolean",input:!0},{name:"formula",type:"boolean",input:!0},{name:"tousnd_sep",type:"boolean",input:!0},{name:"hidden",type:"boolean",input:!0},{name:"delete",type:"button",input:!0,action:"delete",icon:"trash",width:"w-10"}];let ne=sl("database-tables"),N={open:!1,msg:null,type:null},G={format:"csv",name:"export",compress:!1,compress_format:"gz",display_fields:"interface_fields",records:"all_records",column_names:"comments",csv:{sep:",",decimal:".",encoding:"utf-8",chunksize:1e4}},W={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},T="",Q="",y=!1,J={};const Pe=async r=>{var _,E;if(!(r!=null&&r.data)){const j={...b,manage_query_conf:JSON.stringify(e)};j.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[e==null?void 0:e.selected_tab])==null?void 0:E.label,r.data=j}l(13,y=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:r.table||"manage_query",data:r.data};if(!f.data||!f.table)return l(13,y=!1),null;const a=await yl(f);console.log("save res:",a,f.data),a.success===!0?(l(9,N.open=!0,N),l(9,N.type="success",N),l(9,N.msg=a.msg,N),a!=null&&a.inserted_primary_key&&l(3,b.manage_query_id=a.inserted_primary_key,b),d!=null&&d.action&&d.action({})):(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N)),l(13,y=!1)},we=async r=>{l(13,y=!0);try{const f={lang:r.lang||(n==null?void 0:n.lang),conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:r.app,database:r==null?void 0:r.database},a=await ss(f);if(l(13,y=!1),a.success===!0&&a.data)return a.data;l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N)}catch(f){console.log(f.message),l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=f.message,N)}l(13,y=!1)},Ge=r=>{r.detail.type==="next"?l(8,e.tabs[e.selected_tab].offset+=1,e):r.detail.type==="back"?l(8,e.tabs[e.selected_tab].offset-=1,e):r.detail.type==="first"?l(8,e.tabs[e.selected_tab].offset=0,e):r.detail.type==="last"?l(8,e.tabs[e.selected_tab].offset=Math.ceil(e.tabs[e.selected_tab].limit/((r==null?void 0:r.length)||e.tabs[e.selected_tab].limit)),e):r.detail.type==="rows_per_page"&&(l(8,e.tabs[e.selected_tab].limit=r.detail.rows_per_page,e),l(8,e.tabs[e.selected_tab].offset=0,e)),l(8,e={...e})},ke=r=>{r.detail.type==="next"?l(5,k+=1):r.detail.type==="back"?l(5,k-=1):r.detail.type==="first"?l(5,k=0):r.detail.type==="last"?l(5,k=Math.ceil(v/((r==null?void 0:r.length)||v))):r.detail.type==="rows_per_page"&&(l(4,v=r.detail.rows_per_page),l(5,k=0));let f=v,a=k;console.log(a*f),P({tab:(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab),limit:f,offset:a*f})},A=r=>{l(10,W.open=!1,W)},K=async r=>{var a,_,E,j;r=r||{database:(a=n==null?void 0:n.selected_app)==null?void 0:a.db,...p};const f=await we({database:r==null?void 0:r.database,app:n==null?void 0:n.selected_app,lang:r.lang});l(6,x={...f}),p!=null&&p.table&&(x!=null&&x[p==null?void 0:p.table])&&((_=e==null?void 0:e.tables)!=null&&_.includes(p==null?void 0:p.table)||(e.tables.push(p==null?void 0:p.table),l(8,e.selecetd_table=p==null?void 0:p.table,e),l(8,e.selected_table_fields=((E=x==null?void 0:x[p==null?void 0:p.table])==null?void 0:E.fields_order)||Object.keys((j=x==null?void 0:x[p==null?void 0:p.table])==null?void 0:j.fields),e),l(8,e={...e}))),l(7,O=Object.keys(x||{}))},te=(r,f,a)=>{try{const _=document.getElementById(r);let E=!1;return f==="width"?E=(_==null?void 0:_.clientWidth)<(_==null?void 0:_.scrollWidth):E=(_==null?void 0:_.clientHeight)<(_==null?void 0:_.scrollHeight),E}catch(_){return console.log(_.message),!1}},Te=()=>{const r=O[0];O.push(r),O.splice(0,1),l(7,O=[...O])},Ke=()=>{const r=O[O.length-1];O.splice(O.length-1,1),O.unshift(r),l(7,O=[...O])},Ue=()=>{const r=e==null?void 0:e.tables[0];e==null||e.tables.push(r),e==null||e.tables.splice(0,1),l(8,e={...e})},We=()=>{var f,a;const r=e==null?void 0:e.tables[(e==null?void 0:e.tables.length)-1];(f=e==null?void 0:e.tables)==null||f.splice((e==null?void 0:e.tables.length)-1,1),(a=e==null?void 0:e.tables)==null||a.unshift(r),l(8,e={...e})},Me=()=>{var f,a,_;const r=(f=e==null?void 0:e.selected_table_fields)==null?void 0:f[0];(a=e==null?void 0:e.selected_table_fields)==null||a.push(r),(_=e==null?void 0:e.selected_table_fields)==null||_.splice(0,1),l(8,e={...e})},Qe=()=>{var f,a,_,E,j;const r=(a=e==null?void 0:e.selected_table_fields)==null?void 0:a[((f=e==null?void 0:e.selected_table_fields)==null?void 0:f.length)-1];(E=e==null?void 0:e.selected_table_fields)==null||E.splice(((_=e==null?void 0:e.selected_table_fields)==null?void 0:_.length)-1,1),(j=e==null?void 0:e.selected_table_fields)==null||j.unshift(r),l(8,e={...e})},le=(r,f)=>{r.dataTransfer.setData("TABLE",f)},Ve=r=>{r.preventDefault()},X=r=>{var a,_,E;r.preventDefault();const f=r.dataTransfer.getData("TABLE");e!=null&&e.tables||l(8,e.tables=[],e),!((a=e==null?void 0:e.tables)!=null&&a.includes(f))&&f&&(e.tables.push(f),l(8,e.selecetd_table=f,e),l(8,e.selected_table_fields=((_=x==null?void 0:x[f])==null?void 0:_.fields_order)||Object.keys((E=x==null?void 0:x[f])==null?void 0:E.fields),e),l(8,e={...e}))},pe=r=>{var a,_,E,j,Y,$;r.preventDefault();const f=r.dataTransfer.getData("TABLE");if(e!=null&&e.tables||l(8,e.tables=[],e),(a=e==null?void 0:e.tables)!=null&&a.includes(f)&&f){if(e.tables.splice((_=e==null?void 0:e.tables)==null?void 0:_.indexOf(f),1),e.selecetd_table===f)if(((E=e==null?void 0:e.tables)==null?void 0:E.length)>0){const se=(j=e==null?void 0:e.tables)==null?void 0:j[0];l(8,e.selected_table_fields=((Y=x==null?void 0:x[se])==null?void 0:Y.fields_order)||Object.keys(($=x==null?void 0:x[se])==null?void 0:$.fields),e)}else l(8,e.selected_table_fields=[],e);l(8,e={...e})}},be=(r,f,a)=>{r.dataTransfer.setData("TABLE",f),r.dataTransfer.setData("FIELD",a)},pt=r=>{r.preventDefault()},at=(r,f)=>{var a,_;r.preventDefault();try{const E=r.dataTransfer.getData("TABLE"),j=r.dataTransfer.getData("FIELD");(_=(a=e==null?void 0:e.tabs)==null?void 0:a[f])!=null&&_.fields||l(8,e.tabs[f].fields=[],e),E&&j&&f&&(e.tabs[f].fields.push({table:E,field:j}),e.tabs[f].fields.map((Y,$)=>(Y.index=$,Y)),l(8,e={...e}))}catch{}},lt=r=>{var f,a,_,E;((f=r==null?void 0:r.field)==null?void 0:f.action)==="delete"&&((E=(_=(a=e==null?void 0:e.tabs)==null?void 0:a[r==null?void 0:r.tab])==null?void 0:_.fields)==null||E.splice(r==null?void 0:r.index,1),e.tabs[r==null?void 0:r.tab].fields.map((j,Y)=>(j.index=Y,j)),l(8,e={...e}))},Ye=()=>{const f={label:`Query ${Object.keys(e==null?void 0:e.tabs).length+1}`,fields:[],sql:null,show:!1,use:!1,limit:10,offset:0};l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[f==null?void 0:f.label]:Wt.cloneDeep(f)}})},Je=()=>{var r,f,a;l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[e==null?void 0:e.selected_tab]:{...(r=e==null?void 0:e.tabs)==null?void 0:r[e==null?void 0:e.selected_tab],edit:!((a=(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab])!=null&&a.edit)}}})},dt=(r,f,a)=>{r.dataTransfer.setData("TAB",f),r.dataTransfer.setData("INDEX",a)},ft=(r,f,a)=>{var Y,$,se,g,ze,ye,Fe,V,xe,nt,Ut,Mt,zt,Ft,Ht;r.preventDefault();const _=r.dataTransfer.getData("TAB"),E=Number(r.dataTransfer.getData("INDEX")),j=a;if(console.log({_tab:_,_org_field_index:E,_dest_field_index:j}),E!==j&&((se=($=(Y=e==null?void 0:e.tabs)==null?void 0:Y[_])==null?void 0:$.fields)!=null&&se[E])&&((ye=(ze=(g=e==null?void 0:e.tabs)==null?void 0:g[_])==null?void 0:ze.fields)!=null&&ye[j]))try{const Ct=Wt.cloneDeep((xe=(V=(Fe=e==null?void 0:e.tabs)==null?void 0:Fe[_])==null?void 0:V.fields)==null?void 0:xe[E]);(Mt=(Ut=(nt=e==null?void 0:e.tabs)==null?void 0:nt[_])==null?void 0:Ut.fields)==null||Mt.splice(E,1),(Ht=(Ft=(zt=e==null?void 0:e.tabs)==null?void 0:zt[_])==null?void 0:Ft.fields)==null||Ht.splice(j,0,Wt.cloneDeep(Ct)),e.tabs[_].fields.map((Pt,C)=>(Pt.index=C,Pt)),l(8,e={...e})}catch(Ct){console.log(Ct==null?void 0:Ct.message)}},D=r=>{var _,E,j,Y,$,se;const f={select:"",from:"",join:"",where:"",group_by:"",order_by:""};(j=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[r==null?void 0:r.tab])==null?void 0:E.fields)==null||j.forEach((g,ze)=>{if(!(g!=null&&g.ignore)){let ye=` AS "${g==null?void 0:g.field}"`,Fe=`"${g==null?void 0:g.table}"."${g==null?void 0:g.field}"`;if(g!=null&&g.label&&(ye=` AS "${g==null?void 0:g.label}"`),(g==null?void 0:g.field)==="*"&&(ye="",Fe=`"${g==null?void 0:g.table}".${g==null?void 0:g.field}`),g!=null&&g.formula&&(Fe=`${g==null?void 0:g.field}`),g!=null&&g.hidden||(g!=null&&g.func?f.select+=`${f.select?", ":""}${g==null?void 0:g.func}(${Fe})${ye}`:f.select+=`${f.select?", ":""}${Fe}${ye}`),!f.from&&(g!=null&&g.table)&&(f.from+=`"${g==null?void 0:g.table}"`),g!=null&&g.join&&(f.join+=`${f.join?`
`:""}LEFT OUTER JOIN "${g==null?void 0:g.table}" ON "${g==null?void 0:g.table}"."${g==null?void 0:g.field}" = ${g==null?void 0:g.join}`),g!=null&&g.where_cond){let V=`'${g==null?void 0:g.where_val}'`,xe=!1;if(["LIKE","NOT LIKE"].includes(g==null?void 0:g.where_cond))V.indexOf("%")!==-1?V=`${V}`:V=`'%${g==null?void 0:g.where_val}%'`;else if(["IN","NOT IN"].includes(g==null?void 0:g.where_cond)){const nt=V.split(";");(nt==null?void 0:nt.length)>0?V=`(${nt.join("', '")})`:xe=!0}else if(["BETWEEN","NOT BETWEEN"].includes(g==null?void 0:g.where_cond)){const nt=V.split(";");(nt==null?void 0:nt.length)===2?V=`${nt.join("' AND '")}`:xe=!0}else["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(g==null?void 0:g.where_cond)&&(console.log(g==null?void 0:g.where_cond),V="");!V&&!["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(g==null?void 0:g.where_cond)&&(xe=!0),xe===!1&&(f.where+=`${f.where?" AND ":""}${Fe} ${g==null?void 0:g.where_cond} ${V}`)}g!=null&&g.group_by&&!(g!=null&&g.hidden)&&(f.group_by+=`${f.group_by?", ":""}${Fe}`),g!=null&&g.order_by&&(f.order_by+=`${f.order_by?", ":""}${Fe} ${g==null?void 0:g.order_by}`)}}),console.log({_query_parts:f});const a=`SELECT ${f==null?void 0:f.select}
FROM ${f==null?void 0:f.from}${f!=null&&f.join?`
${f==null?void 0:f.join}`:""}${f!=null&&f.where?`
WHERE ${f==null?void 0:f.where}`:""}${f!=null&&f.group_by?`
GROUP BY ${f==null?void 0:f.group_by}`:""}${f!=null&&f.order_by?`
ORDER BY ${f==null?void 0:f.order_by}`:""}`;return(Y=e==null?void 0:e.tabs)!=null&&Y[r==null?void 0:r.tab]&&!((se=($=e==null?void 0:e.tabs)==null?void 0:$[r==null?void 0:r.tab])!=null&&se.use)&&l(8,e.tabs[r==null?void 0:r.tab].sql=a,e),a},P=async r=>{var _,E,j,Y,$,se,g,ze,ye,Fe;let f=D(r);(E=(_=e==null?void 0:e.tabs)==null?void 0:_[r==null?void 0:r.tab])!=null&&E.use&&(f=(Y=(j=e==null?void 0:e.tabs)==null?void 0:j[r==null?void 0:r.tab])==null?void 0:Y.sql);const a={class:"crud",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(se=($=e==null?void 0:e.tabs)==null?void 0:$[r==null?void 0:r.tab])!=null&&se.use?null:(ze=(g=e==null?void 0:e.tabs)==null?void 0:g[r==null?void 0:r.tab])==null?void 0:ze.fields,query:f,use_query_string:(Fe=(ye=e==null?void 0:e.tabs)==null?void 0:ye[r==null?void 0:r.tab])==null?void 0:Fe.use,database:p==null?void 0:p.database,limit:(r==null?void 0:r.limit)||v,offset:(r==null?void 0:r.offset)||k}};l(13,y=!0),(r==null?void 0:r.tab)!=="query_preview"&&(l(8,e.selected_tab_2_prev=r==null?void 0:r.tab,e),console.log("selected_tab_2_prev:",e.selected_tab_2_prev));try{const V=await nl(a);console.log("query run res:",V),l(14,J={...V,tab:r==null?void 0:r.tab}),l(8,e.selected_tab="query_preview",e),V.success===!0||(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=V.msg||V.toString(),N))}catch(V){l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=`${V==null?void 0:V.message}`,N)}l(13,y=!1)},ie=async r=>{var f,a,_,E,j,Y;if((f=e==null?void 0:e.tabs)!=null&&f[r==null?void 0:r.tab]&&!((_=(a=e==null?void 0:e.tabs)==null?void 0:a[r==null?void 0:r.tab])!=null&&_.show)){if(!((j=(E=e==null?void 0:e.tabs)==null?void 0:E[r==null?void 0:r.tab])!=null&&j.use)){const $=D(r);l(8,e.tabs[r==null?void 0:r.tab].sql=$,e)}l(8,e.tabs[r==null?void 0:r.tab].show=!0,e)}else(Y=e==null?void 0:e.tabs)!=null&&Y[r==null?void 0:r.tab]&&l(8,e.tabs[r==null?void 0:r.tab].show=!1,e)},Ze=async r=>{var f,a;G.name=(a=(f=e==null?void 0:e.tabs)==null?void 0:f[r==null?void 0:r.tab])==null?void 0:a.label,l(10,W.header=!0,W),l(10,W.title=`${o.t("crud.export")} ${o.t("crud.query")} - ${G.name}`,W),l(10,W.component=(await es(async()=>{const{default:_}=await import("./Export-CfREU7LV.js");return{default:_}},__vite__mapDeps([0,1,2,3]),import.meta.url)).default,W),l(10,W.data={type:"query",tab:r==null?void 0:r.tab,table:r.table,default_export:G},W),l(10,W.actions=[{type:"btn",icon:"ban",name:"CANCEL",class:"btn-sm text-error",label:o.t("crud.cancel"),action:A},{type:"btn",icon:"lightning-bolt",name:"YES",class:"btn-sm text-success",label:o.t("crud.exec"),action:ce}],W),l(10,W.width=4,W),l(10,W.heigth=null,W),l(10,W.open=!0,W)},ce=async r=>{var f,a,_,E,j,Y,$,se,g;if(r!=null&&r.data){const ze=(r==null?void 0:r.tab)||(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab);let ye=D(r);(a=(f=e==null?void 0:e.tabs)==null?void 0:f[ze])!=null&&a.use&&(ye=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[ze])==null?void 0:E.sql),G=r.data;const Fe={class:"export",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(Y=(j=e==null?void 0:e.tabs)==null?void 0:j[ze])==null?void 0:Y.fields,query:ye,use_query_string:(se=($=e==null?void 0:e.tabs)==null?void 0:$[ze])==null?void 0:se.use,database:p==null?void 0:p.database,limit:-1}};Fe.data._conf=G,A(),l(13,y=!0);const V=await nl(Fe);if(V.success===!0&&V.fname)try{const xe=document.createElement("a");xe.download=((g=V==null?void 0:V.aux)==null?void 0:g.name)||(V==null?void 0:V.fname),xe.target="_blank",xe.href=`${ts(n==null?void 0:n.conf,!0)}/${V==null?void 0:V.fname}?download`,console.log(xe.download,xe.href),xe.setAttribute("style","display: none"),document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)}catch(xe){console.log(xe.message)}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=V.msg,N);l(13,y=!1)}},ut=["etl_report_base","etl_rbase_output"];let Oe=[];const Ot=async r=>{var _,E,j,Y,$,se;r.no_loding||l(13,y=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:r==null?void 0:r.tables,fields:["database"],distinct:!0,limit:-1},a=await ls(f);if(l(15,Oe=(_=n==null?void 0:n.apps)==null?void 0:_.map(g=>g.db)),a.success===!0&&a.data){for(const g in a.data)if(Object.hasOwnProperty.call(a.data,g))for(let ze=0;ze<((Y=(j=(E=a==null?void 0:a.data)==null?void 0:E[g])==null?void 0:j.data)==null?void 0:Y.length);ze++)Oe.indexOf(($=a.data[g].data[ze])==null?void 0:$.database)===-1&&Oe.push((se=a.data[g].data[ze])==null?void 0:se.database);l(15,Oe=[...Oe])}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=a.msg,N);l(13,y=!1)};Vl(async()=>{var r,f,a,_,E;o.changeLanguage(n==null?void 0:n.lang);try{Bt.locale(n==null?void 0:n.lang)}catch{Bt.locale("en-us")}if(p!=null&&p.manage_query_id&&l(3,b={...p}),p!=null&&p.manage_query_conf){if(typeof(p==null?void 0:p.manage_query_conf)=="string")try{l(8,e=JSON.parse(p==null?void 0:p.manage_query_conf))}catch(j){console.log("ERR trying to parse manage_query_conf: ",j.message)}else if(typeof(p==null?void 0:p.manage_query_conf)=="object"){if((r=p==null?void 0:p.manage_query_conf)!=null&&r.tabs&&((f=p==null?void 0:p.manage_query_conf)!=null&&f.tabs))try{l(8,e=Wt.cloneDeep(p==null?void 0:p.manage_query_conf))}catch(j){console.log("ERR trying to parse manage_query_conf: ",j.message)}}}(p!=null&&p.database||(a=n==null?void 0:n.selected_app)!=null&&a.db)&&(l(3,b.database=(p==null?void 0:p.database)||((_=n==null?void 0:n.selected_app)==null?void 0:_.db),b),p!=null&&p.database||l(0,p.database=b.database,p),await K({database:(E=n==null?void 0:n.selected_app)==null?void 0:E.db,...p}),Ot({tables:ut}))});const st=window.innerHeight;sl("db");const bt=r=>{var _,E;const f=D(r);l(8,e.tabs[r==null?void 0:r.tab].sql=f,e);const a={...b,database:p==null?void 0:p.database,manage_query_conf:JSON.stringify(e),sql:f};a.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[e==null?void 0:e.selected_tab])==null?void 0:E.label,h(a)},_t=(r,f)=>{var a;try{return(a=r==null?void 0:r.filter(_=>(_==null?void 0:_.field)===f))==null?void 0:a[0]}catch{return null}},gt=r=>{var f,a;l(8,e.selecetd_table=r,e),l(8,e.selected_table_fields=((f=x==null?void 0:x[r])==null?void 0:f.fields_order)||Object.keys(((a=x==null?void 0:x[r])==null?void 0:a.fields)||{}),e)},I=(r,f)=>le(f,r),ee=r=>X(r),_e=r=>Ve(r);function me(){Q=this.value,l(12,Q)}const de=r=>be(r,e==null?void 0:e.selecetd_table,"*"),ge=r=>{var a,_;let f=!0;if(Q){if(Q.length>2)try{const E=new RegExp(Q,"i");let j=((_=(a=x==null?void 0:x[e==null?void 0:e.selecetd_table])==null?void 0:a.fields[r])==null?void 0:_.comment)||r;f=!1,(r.match(E)||j.match(E))&&(f=!0)}catch(E){console.log(E)}}return f},Lt=(r,f)=>be(f,e==null?void 0:e.selecetd_table,r),xt=r=>{var a;let f=!0;if(T){if(T.length>2){const _=new RegExp(T,"i");let E=(a=x==null?void 0:x[r])==null?void 0:a.comment;f=!1,(r.match(_)||E.match(_))&&(f=!0)}}return f},wt=(r,f)=>le(f,r),ot=r=>pe(r),it=r=>Ve(r);function ct(){T=this.value,l(11,T)}function $e(){p.database=pl(this),l(0,p),l(15,Oe)}const kt=r=>K(p),Dt=r=>bt({tab:(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab}),St=r=>{var _,E;const f=(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab,a={...b,manage_query_conf:JSON.stringify(e)};a.manage_query=(E=(_=e==null?void 0:e.tabs)==null?void 0:_[f])==null?void 0:E.label,Pe({table:"manage_query",data:a})};function qe(r){e.tabs[r].label=this.value,l(8,e),l(18,B)}const It=r=>{var a;const f=Object.keys((e==null?void 0:e.tabs)||{});(a=e==null?void 0:e.tabs)==null||delete a[r],l(8,e.selected_tab=f[0],e)},U=r=>{(e==null?void 0:e.selected_tab)!==r&&l(8,e={...e,selected_tab:r})},re=()=>{(e==null?void 0:e.selected_tab)!=="query_preview"&&l(8,e={...e,selected_tab:"query_preview"})},vt=r=>!0,Le=r=>Ze({tab:e==null?void 0:e.selected_tab_2_prev}),Et=r=>ke({detail:r.detail,length:J==null?void 0:J.n_rows});function De(){e.tabs[e.selected_tab].sql=this.value,l(8,e),l(18,B)}const Nt=r=>{var a,_,E,j,Y;let f=!0;if(e.tabs[e==null?void 0:e.selected_tab].field_filter){if(e.tabs[e==null?void 0:e.selected_tab].field_filter.length>2)try{const $=new RegExp(e.tabs[e==null?void 0:e.selected_tab].field_filter,"i");let se=(E=(_=(a=x==null?void 0:x[e==null?void 0:e.selecetd_table])==null?void 0:a.fields)==null?void 0:_[r])==null?void 0:E.comment;f=!1,((j=r==null?void 0:r.field)!=null&&j.match($)||(Y=r==null?void 0:r.label)!=null&&Y.match($)||se!=null&&se.match($))&&(f=!0)}catch($){console.log($)}}return f};function Xe(r,f,a){f[a][r==null?void 0:r.name]=this.checked,l(8,e),l(6,x),l(18,B)}function Se(r,f,a){f[a][r==null?void 0:r.name]=pl(this),l(8,e),l(6,x),l(18,B)}const Ie=(r,f,a)=>{var _;return lt({field:r,data:f,index:(f==null?void 0:f.index)||a,tab:e==null?void 0:e.selected_tab,name:f[(_=B==null?void 0:B[0])==null?void 0:_.name]})};function At(r,f,a){f[a][r==null?void 0:r.name]=this.value,l(8,e),l(6,x),l(18,B)}function fe(r,f,a){f[a][r==null?void 0:r.name]=this.value,l(8,e),l(6,x),l(18,B)}const tl=(r,f,a)=>dt(a,e==null?void 0:e.selected_tab,(r==null?void 0:r.index)||f),Kt=(r,f,a)=>ft(a,e==null?void 0:e.selected_tab,(r==null?void 0:r.index)||f);function jt(){e.tabs[e==null?void 0:e.selected_tab].formula=this.value,l(8,e),l(18,B)}function Qt(){e.tabs[e==null?void 0:e.selected_tab].formula_label=this.value,l(8,e),l(18,B)}const je=()=>{var r,f,a;(a=(f=(r=e==null?void 0:e.tabs)==null?void 0:r[e==null?void 0:e.selected_tab])==null?void 0:f.fields)==null||a.push(Wt.cloneDeep({field:e.tabs[e==null?void 0:e.selected_tab].formula,table:e==null?void 0:e.selected_table,label:e.tabs[e==null?void 0:e.selected_tab].formula_label,formula:!0})),l(8,e.tabs[e==null?void 0:e.selected_tab].formula="",e),l(8,e.tabs[e==null?void 0:e.selected_tab].formula_label="",e),l(8,e={...e})};function Ae(){e.tabs[e==null?void 0:e.selected_tab].field_filter=this.value,l(8,e),l(18,B)}const Ce=r=>P({tab:e==null?void 0:e.selected_tab}),Vt=r=>ie({tab:e==null?void 0:e.selected_tab});function Xt(){e.tabs[e==null?void 0:e.selected_tab].use=this.checked,l(8,e),l(18,B)}const Gt=r=>Ze({tab:e==null?void 0:e.selected_tab_2_prev}),Yt=r=>{var f,a,_;return Ge({detail:r.detail,data:(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab],length:(((_=(a=e==null?void 0:e.tabs)==null?void 0:a[e==null?void 0:e.selected_tab])==null?void 0:_.fields)||[]).length})},Zt=r=>at(r,e==null?void 0:e.selected_tab),$t=r=>pt(r),qt=r=>{l(9,N.open=!1,N)},yt=r=>A(r.detail);return t.$$set=r=>{"data"in r&&l(0,p=r.data),"return_query"in r&&l(1,h=r.return_query),"extra_save_op"in r&&l(2,u=r.extra_save_op),"option"in r&&l(50,i=r.option),"action"in r&&l(51,d=r.action)},t.$$.update=()=>{var r,f,a;t.$$.dirty[0]&1&&console.log(p==null?void 0:p.database),t.$$.dirty[1]&1048576&&(((r=d==null?void 0:d.name)==null?void 0:r.toLowerCase())=="CANCEL".toLowerCase()&&(d==null||d.action()),((f=d==null?void 0:d.name)==null?void 0:f.toLowerCase())=="REFRESH".toLowerCase()&&K(null),((a=d==null?void 0:d.name)==null?void 0:a.toLowerCase())=="SAVE".toLowerCase()&&Pe({table:"manage_query"}))},[p,h,u,b,v,k,x,O,e,N,W,T,Q,y,J,Oe,n,o,B,ne,Pe,Ge,ke,A,K,te,Te,Ke,Ue,We,Me,Qe,le,Ve,X,pe,be,pt,at,lt,Ye,Je,dt,ft,P,ie,Ze,st,bt,_t,i,d,gt,I,ee,_e,me,de,ge,Lt,xt,wt,ot,it,ct,$e,kt,Dt,St,qe,It,U,re,vt,Le,Et,De,Nt,Xe,Se,Ie,At,fe,tl,Kt,jt,Qt,je,Ae,Ce,Vt,Xt,Gt,Yt,Zt,$t,qt,yt]}class Bs extends Pl{constructor(s){super(),Wl(this,s,js,Is,Jl,{data:0,return_query:1,extra_save_op:2,option:50,action:51},null,[-1,-1,-1,-1,-1])}}export{Bs as default};
