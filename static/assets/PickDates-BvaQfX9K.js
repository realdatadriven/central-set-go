import{S as qe,i as Ce,s as Ne,e as ne,I as se,a as _,b as D,c as oe,t as J,d as u,a1 as ze,g as I,h as o,m as ae,j as y,a2 as de,k as K,o as H,p as Ae,r as Ee,n as $,q as W,u as j,w as be,v as ue,x as De,y as ge,z as Le,A as Se,D as N,C as Ie,a0 as je}from"./index-BpRaDDNn.js";import"./pt-WpTh3RxT.js";function we(t,c,s){const r=t.slice();return r[18]=c[s],r}function ve(t,c,s){const r=t.slice();return r[21]=c[s],r[23]=s,r}function ke(t){let c,s,r,g=N(t[21]).format(t[3].t("fmrt.date"))+"",n,i,d,m,v,b,k,z,q;v=new se({props:{type:"outline",icon:"trash",path:"icons"}});function B(){return t[9](t[21],t[23])}return{c(){c=_("li"),s=_("a"),r=_("span"),n=J(g),i=D(),d=_("button"),m=_("span"),oe(v.$$.fragment),b=D(),u(r,"class","grow"),u(m,"class","w-5 h-5"),u(d,"class","btn btn-circle btn-ghost btn-sm p-0 m-0"),u(s,"class","p-0 pl-2 flex flex-row"),u(c,"class","list-item bordered w-full flex-row")},m(h,A){I(h,c,A),o(c,s),o(s,r),o(r,n),o(s,i),o(s,d),o(d,m),ae(v,m,null),o(c,b),k=!0,z||(q=[K(d,"click",B),K(s,"click",t[10])],z=!0)},p(h,A){t=h,(!k||A&9)&&g!==(g=N(t[21]).format(t[3].t("fmrt.date"))+"")&&$(n,g)},i(h){k||(H(v.$$.fragment,h),k=!0)},o(h){W(v.$$.fragment,h),k=!1},d(h){h&&j(c),ue(v),z=!1,De(q)}}}function Ye(t){let c,s=t[3].t(`crud.${t[18]}`)+"",r,g;return{c(){c=_("option"),r=J(s),g=D(),c.__value=t[18],y(c,c.__value)},m(n,i){I(n,c,i),o(c,r),o(c,g)},p(n,i){i&8&&s!==(s=n[3].t(`crud.${n[18]}`)+"")&&$(r,s)},d(n){n&&j(c)}}}function Be(t){let c,s,r,g,n,i,d,m,v,b,k,z,q,B,h,A,E,T,Q,C,a=t[3].t("crud.last")+"",Y,M,F=t[3].t("crud.time")+"",R,ie,x=t[3].t("crud.unit")+"",re,fe,_e,O,ee,L,pe,te,S,me,X,le,U,P,ce,he,G=ne(t[0]),p=[];for(let e=0;e<G.length;e+=1)p[e]=ke(ve(t,G,e));const Me=e=>W(p[e],1,1,()=>{p[e]=null});m=new se({props:{type:"outline",icon:"calendar-days",path:"icons"}}),h=new se({props:{type:"outline",icon:"plus",path:"icons"}});let V=ne(t[4]),w=[];for(let e=0;e<V.length;e+=1)w[e]=Ye(we(t,V,e));return U=new se({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){c=_("div"),s=D(),r=_("ul");for(let e=0;e<p.length;e+=1)p[e].c();g=D(),n=_("div"),i=_("button"),d=_("span"),oe(m.$$.fragment),v=D(),b=_("input"),z=D(),q=_("button"),B=_("span"),oe(h.$$.fragment),A=D(),E=_("div"),T=_("label"),Q=_("span"),C=_("b"),Y=J(a),M=J(" N "),R=J(F),ie=D(),re=J(x),fe=J(":"),_e=D(),O=_("div"),ee=_("div"),L=_("input"),pe=D(),te=_("div"),S=_("select");for(let e=0;e<w.length;e+=1)w[e].c();me=D(),X=_("button"),le=_("span"),oe(U.$$.fragment),u(c,"class","flex flex-coll"),u(r,"class","grow mt-0 p-1 shadow menu menu-compact menu-vertical bg-base-100 w-full --max-h-56 overflow-y-auto overflow-x-hidden"),u(d,"class","w-5 h-5"),u(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),u(b,"type","date"),u(b,"placeholder",k=`${t[3].t("crud.filter")} ${t[3].t("crud.apps")}`),u(b,"class","grow input pl-8 pr-8 input-bordered w-full input-sm"),u(b,"autocomplete","off"),u(b,"autocorrect","off"),u(B,"class","w-5 h-5"),u(q,"class","btn btn-square btn-ghost btn-sm -ml-8 z-[1]"),u(n,"class","flex"),u(Q,"class","label-text"),u(T,"class","label"),u(T,"for",""),u(L,"type","text"),u(L,"placeholder","N"),u(L,"class","input input-bordered input-sm"),u(ee,"class","form-control w-16"),u(S,"class","grow pl-8 select select-sm select-bordered w-full"),t[1].unit===void 0&&ze(()=>t[14].call(S)),u(te,"class","form-control mr-2 ml-2 grow"),u(le,"class","w-5 h-5"),u(X,"class","btn btn-square btn-ghost btn-sm ml-2"),u(O,"class","flex flex-row pl-6 w-full"),u(E,"class","form-control")},m(e,f){I(e,c,f),I(e,s,f),I(e,r,f);for(let l=0;l<p.length;l+=1)p[l]&&p[l].m(r,null);I(e,g,f),I(e,n,f),o(n,i),o(i,d),ae(m,d,null),o(n,v),o(n,b),y(b,t[2]),o(n,z),o(n,q),o(q,B),ae(h,B,null),I(e,A,f),I(e,E,f),o(E,T),o(T,Q),o(Q,C),o(C,Y),o(C,M),o(C,R),o(C,ie),o(C,re),o(C,fe),o(E,_e),o(E,O),o(O,ee),o(ee,L),y(L,t[1].n),o(O,pe),o(O,te),o(te,S);for(let l=0;l<w.length;l+=1)w[l]&&w[l].m(S,null);de(S,t[1].unit,!0),o(O,me),o(O,X),o(X,le),ae(U,le,null),P=!0,ce||(he=[K(b,"input",t[11]),K(q,"click",t[12]),K(L,"input",t[13]),K(S,"change",t[14]),K(X,"click",t[15])],ce=!0)},p(e,[f]){if(f&137){G=ne(e[0]);let l;for(l=0;l<G.length;l+=1){const Z=ve(e,G,l);p[l]?(p[l].p(Z,f),H(p[l],1)):(p[l]=ke(Z),p[l].c(),H(p[l],1),p[l].m(r,null))}for(Ae(),l=G.length;l<p.length;l+=1)Me(l);Ee()}if((!P||f&8&&k!==(k=`${e[3].t("crud.filter")} ${e[3].t("crud.apps")}`))&&u(b,"placeholder",k),f&4&&y(b,e[2]),(!P||f&8)&&a!==(a=e[3].t("crud.last")+"")&&$(Y,a),(!P||f&8)&&F!==(F=e[3].t("crud.time")+"")&&$(R,F),(!P||f&8)&&x!==(x=e[3].t("crud.unit")+"")&&$(re,x),f&18&&L.value!==e[1].n&&y(L,e[1].n),f&24){V=ne(e[4]);let l;for(l=0;l<V.length;l+=1){const Z=we(e,V,l);w[l]?w[l].p(Z,f):(w[l]=Ye(Z),w[l].c(),w[l].m(S,null))}for(;l<w.length;l+=1)w[l].d(1);w.length=V.length}f&18&&de(S,e[1].unit)},i(e){if(!P){for(let f=0;f<G.length;f+=1)H(p[f]);H(m.$$.fragment,e),H(h.$$.fragment,e),H(U.$$.fragment,e),P=!0}},o(e){p=p.filter(Boolean);for(let f=0;f<p.length;f+=1)W(p[f]);W(m.$$.fragment,e),W(h.$$.fragment,e),W(U.$$.fragment,e),P=!1},d(e){e&&(j(c),j(s),j(r),j(g),j(n),j(A),j(E)),be(p,e),ue(m),ue(h),be(w,e),ue(U),ce=!1,De(he)}}}function Oe(t,c,s){let r,g;ge(t,Le,a=>s(16,r=a)),ge(t,Se,a=>s(3,g=a));let{dates_refs:n=[]}=c,{action:i={}}=c,d={n:null,unit:"months"},m=N().subtract(1,"days").format("YYYY-MM-DD"),v=["days","months","quarters","years"];const b=a=>{if(console.log({payload:a,dates_refs:n}),a.n&&a.unit&&(n.length>0||m)){let Y=N((n==null?void 0:n[0])||m);const M=[];M.push(Y);let F=Y.clone();for(let R=0;R<a.n-1;R++)F.subtract(1,a.unit),M.push(F.clone());s(0,n=[...M])}},k=a=>{const Y=N(a).format("YYYYMMDD");n.map(M=>N(M).format("YYYYMMDD")).indexOf(Y)===-1&&s(0,n=[...n,N(a)])},z=a=>{N(a.dt).format("YYYYMMDD");const Y=a.index,M=n;M.splice(Y,1),s(0,n=[...M])},q=a=>{a==null||a.action(n)};Ie(async()=>{g.changeLanguage(r==null?void 0:r.lang);try{N.locale(r==null?void 0:r.lang)}catch{N.locale("en-us")}});const B=(a,Y)=>z({dt:a,index:Y}),h=()=>{console.log(1)};function A(){m=this.value,s(2,m)}const E=a=>{k(m)};function T(){d.n=this.value,s(1,d),s(4,v)}function Q(){d.unit=je(this),s(1,d),s(4,v)}const C=a=>{b(d)};return t.$$set=a=>{"dates_refs"in a&&s(0,n=a.dates_refs),"action"in a&&s(8,i=a.action)},t.$$.update=()=>{t.$$.dirty&256&&((i==null?void 0:i.name)=="CANCEL"&&(i==null||i.action()),(i==null?void 0:i.name)=="CLEAN"&&s(0,n=[]),(i==null?void 0:i.name)=="SET"&&q(i))},[n,d,m,g,v,b,k,z,i,B,h,A,E,T,Q,C]}class Fe extends qe{constructor(c){super(),Ce(this,c,Oe,Be,Ne,{dates_refs:0,action:8})}}export{Fe as default};
